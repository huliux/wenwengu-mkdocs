<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Stock Valuation API åç«¯æ¥å£è¯¦ç»†åˆ†ææ–‡æ¡£ - My Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">My Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">01 project overview</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../01_project_overview/" class="dropdown-item">é¡¹ç›®æ¦‚è§ˆæ–‡æ¡£</a>
</li>
                                    
<li>
    <a href="../../01_project_overview/project_analysis_report/" class="dropdown-item">è‚¡ç¥¨ä¼°å€¼ç³»ç»Ÿé¡¹ç›®åˆ†ææŠ¥å‘Š</a>
</li>
                                    
<li>
    <a href="../../01_project_overview/project_status_2025_09_latest/" class="dropdown-item">è‚¡ç¥¨ä¼°å€¼ç³»ç»Ÿé¡¹ç›®çŠ¶æ€æŠ¥å‘Š</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">02 architecture</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../02_architecture/" class="dropdown-item">æ¶æ„è®¾è®¡æ–‡æ¡£</a>
</li>
                                    
<li>
    <a href="../../02_architecture/dcf_architecture/" class="dropdown-item">DCF æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸æ¶æ„</a>
</li>
                                    
<li>
    <a href="../../02_architecture/hybrid_architecture_design/" class="dropdown-item">è‚¡ç¥¨ä¼°å€¼ç³»ç»Ÿæ··åˆæ¶æ„è®¾è®¡æ–‡æ¡£</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">03 development</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../03_development/" class="dropdown-item">å¼€å‘æ–‡æ¡£</a>
</li>
                                    
<li>
    <a href="../../03_development/development_guide_2025_09/" class="dropdown-item">è‚¡ç¥¨ä¼°å€¼ç³»ç»Ÿå¼€å‘æŒ‡å—</a>
</li>
                                    
<li>
    <a href="../../03_development/testing_strategy_2025_09/" class="dropdown-item">æµ‹è¯•ç­–ç•¥ä¸è´¨é‡ä¿éšœæŒ‡å—</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">04 deployment</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../04_deployment/" class="dropdown-item">éƒ¨ç½²è¿ç»´æ–‡æ¡£</a>
</li>
                                    
<li>
    <a href="../../04_deployment/deployment_operations_guide_2025_09/" class="dropdown-item">éƒ¨ç½²è¿ç»´æŒ‡å—</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">05 data sources</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../05_data_sources/" class="dropdown-item">æ•°æ®æºä¸“é¢˜æ–‡æ¡£</a>
</li>
                                    
<li>
    <a href="../../05_data_sources/tushare_alignment/" class="dropdown-item">TuShareæ•°æ®æºå¯¹é½ä¸ç”Ÿäº§éƒ¨ç½²æŠ¥å‘Š</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Archived</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../" class="dropdown-item">å½’æ¡£æ–‡æ¡£</a>
</li>
                                    
<li>
    <a href="../Stock_investment_decision_making_process/" class="dropdown-item">Stock investment decision making process</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Stock Valuation API åç«¯æ¥å£è¯¦ç»†åˆ†ææ–‡æ¡£</a>
</li>
                                    
<li>
    <a href="../dcf_industry_standards_comprehensive_analysis/" class="dropdown-item">DCFä¼°å€¼é¡¹ç›®ä¸è¡Œä¸šæ ‡å‡†æ·±åº¦å¯¹æ¯”åˆ†ææŠ¥å‘Š</a>
</li>
                                    
<li>
    <a href="../dcf_optimization_plan/" class="dropdown-item">DCF æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¼˜åŒ–æ–¹æ¡ˆï¼ˆv1ï¼‰</a>
</li>
                                    
<li>
    <a href="../dcf_rolling_revaluation_guide/" class="dropdown-item">DCF æ»šåŠ¨é‡è¯„å®è·µæŒ‡å—ï¼ˆå­£åº¦/ä¸­æŠ¥æ›´æ–°ç‰ˆï¼‰</a>
</li>
                                    
<li>
    <a href="../directory_optimization_plan/" class="dropdown-item">é¡¹ç›®ç›®å½•ç»“æ„ä¼˜åŒ–æ–¹æ¡ˆ</a>
</li>
                                    
<li>
    <a href="../mckinsey_financial_ratios_and_forecasting_analysis/" class="dropdown-item">Stock Vale Valuation 3.0 è´¢åŠ¡æ¯”ç‡ä¸é¢„æµ‹é€»è¾‘ McKinsey æ ‡å‡†åˆè§„æ€§ä¸“é¢˜åˆ†ææŠ¥å‘Š</a>
</li>
                                    
<li>
    <a href="../mckinsey_standards_compliance_report/" class="dropdown-item">Stock Vale Valuation 3.0 é¡¹ç›® McKinsey æ ‡å‡†åˆè§„æ€§åˆ†ææŠ¥å‘Š</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Stock_investment_decision_making_process/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../dcf_industry_standards_comprehensive_analysis/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#stock-valuation-api" class="nav-link">Stock Valuation API åç«¯æ¥å£è¯¦ç»†åˆ†ææ–‡æ¡£</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#_1" class="nav-link">ğŸ“‹ ç›®å½•</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#api" class="nav-link">ğŸŒ APIæ¦‚è§ˆ</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_5" class="nav-link">ğŸ”— æ¥å£è¯¦æƒ…</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_10" class="nav-link">ğŸ“‹ å‚æ•°çº¦æŸæ¡ä»¶æ€»ç»“è¡¨</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_21" class="nav-link">ğŸ“Š æ•°æ®æ¨¡å‹</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_24" class="nav-link">âš ï¸ é”™è¯¯å¤„ç†</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_31" class="nav-link">ğŸš€ éƒ¨ç½²å’Œæµ‹è¯•</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_49" class="nav-link">ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_51" class="nav-link">ğŸ“ æœ€ä½³å®è·µ</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_52" class="nav-link">ğŸ”§ æ•…éšœæ’é™¤</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_55" class="nav-link">ğŸ“Š ç›‘æ§å’Œè¿ç»´</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_60" class="nav-link">ğŸ“… æœ€æ–°æ›´æ–°è®°å½•</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="stock-valuation-api">Stock Valuation API åç«¯æ¥å£è¯¦ç»†åˆ†ææ–‡æ¡£</h1>
<p><em>æœ€åæ›´æ–°: 2025-09-22</em></p>
<h2 id="_1">ğŸ“‹ ç›®å½•</h2>
<ul>
<li><a href="#apiæ¦‚è§ˆ">APIæ¦‚è§ˆ</a></li>
<li><a href="#æ¥å£è¯¦æƒ…">æ¥å£è¯¦æƒ…</a></li>
<li><a href="#1-æ ¹è·¯å¾„æ¥å£">1. æ ¹è·¯å¾„æ¥å£</a></li>
<li><a href="#2-è‚¡ç¥¨ä¼°å€¼æ¥å£">2. è‚¡ç¥¨ä¼°å€¼æ¥å£</a></li>
<li><a href="#3-æ•æ„Ÿæ€§åˆ†ææ¥å£">3. æ•æ„Ÿæ€§åˆ†ææ¥å£</a></li>
<li><a href="#4-è‚¡ç¥¨ç­›é€‰æ¥å£">4. è‚¡ç¥¨ç­›é€‰æ¥å£</a></li>
<li><a href="#æ•°æ®æ¨¡å‹">æ•°æ®æ¨¡å‹</a></li>
<li><a href="#é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</a></li>
<li><a href="#éƒ¨ç½²å’Œæµ‹è¯•">éƒ¨ç½²å’Œæµ‹è¯•</a></li>
<li><a href="#ä½¿ç”¨ç¤ºä¾‹">ä½¿ç”¨ç¤ºä¾‹</a></li>
<li><a href="#æœ€æ–°æ›´æ–°è®°å½•">æœ€æ–°æ›´æ–°è®°å½•</a></li>
</ul>
<hr />
<h2 id="api">ğŸŒ APIæ¦‚è§ˆ</h2>
<h3 id="_2">åŸºæœ¬ä¿¡æ¯</h3>
<ul>
<li><strong>æœåŠ¡åç§°</strong>: Stock Valuation API</li>
<li><strong>ç‰ˆæœ¬</strong>: 3.0.0</li>
<li><strong>æ¡†æ¶</strong>: FastAPI</li>
<li><strong>ç«¯å£</strong>: 8124</li>
<li><strong>åè®®</strong>: HTTP/HTTPS</li>
<li><strong>æ•°æ®æ ¼å¼</strong>: JSON</li>
<li><strong>æ•°æ®æº</strong>: TuShare(ä¸»è¦) + PostgreSQL(éªŒè¯)</li>
</ul>
<h3 id="_3">æ ¸å¿ƒåŠŸèƒ½</h3>
<ol>
<li><strong>DCFä¼°å€¼è®¡ç®—</strong>: åŸºäºæŠ˜ç°ç°é‡‘æµçš„ä¼ä¸šä¼°å€¼åˆ†æï¼Œæ”¯æŒé€€å‡ºå€æ•°æ³•å’Œæ°¸ç»­å¢é•¿æ³•</li>
<li><strong>æ•æ„Ÿæ€§åˆ†æ</strong>: å¤šç»´åº¦å‚æ•°æ•æ„Ÿæ€§åˆ†æï¼Œç”Ÿæˆsensitivity table</li>
<li><strong>è‚¡ç¥¨ç­›é€‰</strong>: åŸºäºè´¢åŠ¡æŒ‡æ ‡çš„å¤šæ¡ä»¶è‚¡ç¥¨ç­›é€‰å™¨</li>
<li><strong>LLMæ™ºèƒ½åˆ†æ</strong>: é›†æˆDeepSeek/OpenAIå…¼å®¹æ¨¡å‹ç”ŸæˆæŠ•èµ„åˆ†ææŠ¥å‘Š</li>
<li><strong>LTMåŸºçº¿</strong>: æ”¯æŒLast Twelve Monthsæ”¶å…¥åŸºæœŸï¼Œæå‡æ—¶æ•ˆæ€§</li>
<li><strong>LLMæ™ºèƒ½åˆ†æ</strong>: é›†æˆå¤§è¯­è¨€æ¨¡å‹çš„æŠ•èµ„å»ºè®®</li>
<li><strong>æ•°æ®ç®¡ç†</strong>: è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å’Œè¡Œæƒ…æ•°æ®æ›´æ–°</li>
<li><strong>è‚¡ç¥¨ç­›é€‰</strong>: åŸºäºè´¢åŠ¡æŒ‡æ ‡çš„è‚¡ç¥¨ç­›é€‰å™¨</li>
</ol>
<h3 id="_4">æŠ€æœ¯æ¶æ„</h3>
<pre><code>FastAPI App
â”œâ”€â”€ CORS Middleware (è·¨åŸŸæ”¯æŒ)
â”œâ”€â”€ Routes (è·¯ç”±å±‚)
â”‚   â”œâ”€â”€ Main Routes (ä¸»è¦ä¸šåŠ¡æ¥å£)
â”‚   â”œâ”€â”€ Data Update Routes (æ•°æ®æ›´æ–°æ¥å£)
â”‚   â””â”€â”€ Stock Screener Routes (è‚¡ç¥¨ç­›é€‰æ¥å£)
â”œâ”€â”€ Services (ä¸šåŠ¡æœåŠ¡å±‚)
â”‚   â”œâ”€â”€ ValuationService (ä¼°å€¼æœåŠ¡)
â”‚   â”œâ”€â”€ DataProcessor (æ•°æ®å¤„ç†æœåŠ¡)
â”‚   â””â”€â”€ LLM Utils (LLMè°ƒç”¨å·¥å…·)
â”œâ”€â”€ Core Calculators (æ ¸å¿ƒè®¡ç®—å™¨)
â”‚   â”œâ”€â”€ WACC Calculator (èµ„æœ¬æˆæœ¬è®¡ç®—)
â”‚   â”œâ”€â”€ DCF Calculators (DCFè®¡ç®—å™¨é›†ç¾¤)
â”‚   â””â”€â”€ Financial Forecaster (è´¢åŠ¡é¢„æµ‹å™¨)
â””â”€â”€ Data Layer (æ•°æ®å±‚)
    â”œâ”€â”€ AshareDataFetcher (æ•°æ®è·å–å™¨)
    â””â”€â”€ PostgreSQL (æ•°æ®åº“)
</code></pre>
<h3 id="2025-09-10">2025-09-10 å˜æ›´è¦ç‚¹ï¼ˆæ–°å¢/è°ƒæ•´å­—æ®µä¸è¡Œä¸ºï¼‰</h3>
<ul>
<li>è¯·æ±‚æ–°å¢/å¼ºè°ƒ</li>
<li><code>industry_preset_key</code>ï¼šè¡Œä¸šæ¨¡æ¿é”®ï¼ˆæ¨¡æ¿åŠ è½½ï¼Œä¸é™ç¼–è¾‘ï¼‰</li>
<li><code>use_gdp_cap</code> / <code>gdp_nominal_cap</code>ï¼šåä¹‰ GDP ä¸Šé™æ§åˆ¶ï¼ˆPGR clampï¼‰</li>
<li><code>ltm_baseline_enabled</code>ï¼šå¯ç”¨ LTM/Interim ç»è¥åŸºæœŸ</li>
<li>å“åº”æ–°å¢ï¼ˆStockBasicInfoModelï¼‰</li>
<li><code>latest_price_as_of_date</code>ï¼šä»·æ ¼ as-ofï¼ˆtrade_date â‰¤ ä¼°å€¼æ—¥ï¼‰</li>
<li><code>eps_annual_as_of_year</code>ï¼šEPSï¼ˆå¹´æŠ¥ï¼‰å¹´ä»½ï¼ˆend_date â‰¤ ä¼°å€¼æ—¥ï¼‰</li>
<li><code>ttm_dps_source</code>ï¼šTTM è‚¡æ¯æ¥æºï¼ˆimplemented/proposal/latest_annualï¼‰</li>
<li><code>ttm_window_start</code>/<code>ttm_window_end</code>ï¼šTTM çª—å£ï¼ˆè‹¥é€‚ç”¨ï¼‰</li>
<li>å“åº” Debugï¼ˆValuationResultsContainer.debug_request_sliceï¼‰</li>
<li><code>baseline_debug</code>ï¼šAnnual/LTM æ¨¡å¼ä¸ LTM ç»„æˆ</li>
<li><code>applied_preset</code> ä¸ <code>applied_preset_diff</code>ï¼šå·²åº”ç”¨è¡Œä¸šæ¨¡æ¿ä¸åç¦»æƒ…å†µï¼ˆwithin/warn/alertï¼‰</li>
<li>ç»ˆå€¼ä¸éšå«æŒ‡æ ‡</li>
<li>æ°¸ç»­å¢é•¿ï¼šæŒ‰ <code>min(pg_rate, GDP_cap)</code> å¤¹æŒï¼ˆæ¥æºæç¤ºï¼‰</li>
<li>é€€å‡ºä¹˜æ•°ï¼šè®¡ç®—éšå« PGR å¹¶ä¸ GDP ä¸Šé™å¯¹æ¯”æç¤º</li>
<li>æ•°æ®å±‚è¡Œä¸º</li>
<li>æœ€æ–°ä»·æ ¼æŒ‰ä¼°å€¼æ—¥å›é€€ï¼ˆ<code>trade_date â‰¤ ä¼°å€¼æ—¥</code>ï¼‰</li>
<li>è‚¡æ¯ TTMï¼šå®æ–½/å®Œæˆ â†’ æ— åˆ™ TTMÂ·é¢„æ¡ˆ â†’ ä»æ— åˆ™ å¹´åº¦æœ€è¿‘ä¸€æ¬¡</li>
</ul>
<h3 id="2025-09-11">2025-09-11 å˜æ›´è¦ç‚¹ï¼ˆæ•æ„Ÿæ€§ä¸ç¨³å¥æ€§å¢å¼ºï¼‰</h3>
<ul>
<li>æ•æ„Ÿæ€§è¾“å‡ºæ‰©å±•</li>
<li>æ–°å¢ <code>result_tables.ev_ebitda_terminal</code>ï¼šåŸºäºâ€œæœ«æœŸé¢„æµ‹ EBITDAâ€çš„ EV/EBITDAï¼ˆä¸ LTM å£å¾„åŒºåˆ†ï¼‰ã€‚</li>
<li>æ–°å¢ <code>result_tables.implied_pgr</code>ï¼šå½“é‡‡ç”¨é€€å‡ºä¹˜æ•°æ³•æ—¶ï¼Œé€æ ¼è®¡ç®—éšå«æ°¸ç»­å¢é•¿ç‡ <code>g = (TV*WACC âˆ’ FCF_T) / (TV + FCF_T)</code>ã€‚</li>
<li><code>result_tables.dcf_implied_pe</code> æ”¯æŒæŒ‰æ ¼å›é€€ï¼šè‹¥å•å…ƒæ ¼æœªè¿”å› <code>dcf_implied_diluted_pe</code>ï¼Œå°†ç”¨åŸºå‡† EPSï¼ˆæœ€è¿‘å¹´æŠ¥ï¼‰å’Œè¯¥æ ¼æ¯è‚¡ä»·å€¼è®¡ç®—å›å¡«ã€‚</li>
<li>ç‰©ç†å¯è¡Œæ€§çº¦æŸ</li>
<li>å½“å•å…ƒæ ¼é‡‡ç”¨æ°¸ç»­å¢é•¿æ³•ä¸” <code>g â‰¥ WACC</code> æ—¶ç›´æ¥è·³è¿‡è®¡ç®—ï¼Œå•å…ƒæ ¼ç½®ä¸º <code>null</code>ï¼ŒåŒæ—¶åœ¨ <code>data_warnings</code> ä¸­è¿½åŠ æç¤ºã€‚</li>
<li>WACC è®¡ç®—ç¨³å¥æ€§</li>
<li>å½“ <code>wacc_weight_mode = market</code> ä¸”å¸‚åœºæƒé‡è·¯å¾„å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨å›é€€è‡³ <code>target</code> æƒé‡å¹¶è®°å½•è­¦å‘Šï¼Œä¸å†å¯¼è‡´ 500ã€‚</li>
<li>æ–‡æ¡£æ¾„æ¸…</li>
<li>æ˜ç¡®åŒºåˆ† <code>result_tables.ev_ebitda</code>ï¼ˆLTM å£å¾„ï¼‰ä¸ <code>result_tables.ev_ebitda_terminal</code>ï¼ˆæœ«æœŸå£å¾„ï¼‰ï¼›é»˜è®¤ç»§ç»­è¾“å‡º LTM ä»¥ä¾¿å¯¹æ ‡ç°å®å£å¾„ï¼Œæœ«æœŸå£å¾„ä¸ºè¡¥å……è¡¨ã€‚</li>
<li>è½´å†ç”Ÿç­–ç•¥ï¼šWACC è½´åœ¨æä¾› <code>step+points</code> æ—¶æ€»æ˜¯å›´ç»•åŸºå‡†å†ç”Ÿï¼›å…¶ä»–è½´ä»…åœ¨ <code>values</code> ç©ºä¸”æä¾› <code>step+points</code> æ—¶å†ç”Ÿï¼ˆåç»­å¯ç»Ÿä¸€ï¼‰ã€‚</li>
</ul>
<hr />
<h2 id="_5">ğŸ”— æ¥å£è¯¦æƒ…</h2>
<h3 id="1">1. æ ¹è·¯å¾„æ¥å£</h3>
<h4 id="get">GET <code>/</code></h4>
<p><strong>æ¥å£æè¿°</strong>: APIå¥åº·æ£€æŸ¥å’ŒåŸºæœ¬ä¿¡æ¯</p>
<p><strong>è¯·æ±‚å‚æ•°</strong>: æ— </p>
<p><strong>å“åº”æ ¼å¼</strong>:</p>
<pre><code class="language-json">{
    &quot;message&quot;: &quot;Welcome to the Stock Valuation API (Streamlit Backend)&quot;
}
</code></pre>
<p>æ³¨ï¼ˆå£å¾„è¯´æ˜ï¼Œ2025-09-10 æ›´æ–°ï¼‰ï¼š
- LTM/åŸºæœŸæ”¶å…¥é€‰æ‹©ç»Ÿä¸€â€œä¼˜å…ˆè¥ä¸šæ”¶å…¥ revenueï¼Œå›é€€ total_revenueâ€ã€‚
- <code>baseline_debug</code> ä¸­ä»ä¿ç•™ <code>ytd_curr_total_revenue</code>ã€<code>ytd_prev_total_revenue</code>ã€<code>prev_annual_total_revenue</code> ç­‰å­—æ®µä»¥ä¾¿å®¡è®¡ï¼›ä½†å®é™…ç”¨äºåŸºæœŸé€‰æ‹©çš„ä¼˜å…ˆçº§ä¸º <code>revenue</code> å¯¹åº”å­—æ®µï¼Œå…¶æ¬¡æ‰æ˜¯ <code>total_revenue</code> å¯¹åº”å­—æ®µã€‚</p>
<p><strong>çŠ¶æ€ç </strong>:
- <code>200</code>: æˆåŠŸ</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>: 
- APIå¥åº·æ£€æŸ¥
- æœåŠ¡å¯ç”¨æ€§éªŒè¯</p>
<hr />
<h3 id="2">2. è‚¡ç¥¨ä¼°å€¼æ¥å£</h3>
<h4 id="post-apiv1valuation">POST <code>/api/v1/valuation</code></h4>
<p><strong>æ¥å£æè¿°</strong>: è®¡ç®—è‚¡ç¥¨DCFä¼°å€¼ï¼Œæ”¯æŒæ•æ„Ÿæ€§åˆ†æå’ŒLLMæ™ºèƒ½åˆ†æ</p>
<p><strong>è¯·æ±‚æ¨¡å‹</strong>: StockValuationRequest</p>
<p><strong>è¯·æ±‚å‚æ•°è¯¦è§£</strong>:</p>
<h5 id="_6">åŸºç¡€å‚æ•°</h5>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>å¿…å¡«</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ts_code</code></td>
<td>string</td>
<td>æ˜¯</td>
<td>æ— </td>
<td>è‚¡ç¥¨ä»£ç </td>
<td>ç¬¦åˆAè‚¡æ ¼å¼(6æ•°å­—.SH/SZ)</td>
<td>"600519.SH"</td>
</tr>
<tr>
<td><code>market</code></td>
<td>string</td>
<td>å¦</td>
<td>"A"</td>
<td>å¸‚åœºæ ‡è¯†</td>
<td>æšä¸¾å€¼: "A", "HK"</td>
<td>"A"</td>
</tr>
<tr>
<td><code>valuation_date</code></td>
<td>string</td>
<td>å¦</td>
<td>æœ€æ–°æ—¥æœŸ</td>
<td>ä¼°å€¼åŸºå‡†æ—¥æœŸ</td>
<td>YYYY-MM-DDæ ¼å¼</td>
<td>"2024-12-31"</td>
</tr>
<tr>
<td><code>ltm_baseline_enabled</code></td>
<td>bool</td>
<td>å¦</td>
<td>false</td>
<td>æ˜¯å¦ä½¿ç”¨LTM/InterimåŸºæœŸ</td>
<td>å¸ƒå°”å€¼</td>
<td>true, false</td>
</tr>
</tbody>
</table>
<h5 id="dcf">DCFæ ¸å¿ƒå‡è®¾å‚æ•°</h5>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>å¿…å¡«</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>forecast_years</code></td>
<td>int</td>
<td>å¦</td>
<td>5</td>
<td>é¢„æµ‹æœŸå¹´æ•°</td>
<td>1-20å¹´æ•´æ•°</td>
<td>5, 10, 15</td>
</tr>
<tr>
<td><code>cagr_decay_rate</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿè®¡ç®—</td>
<td>å†å²CAGRå¹´è¡°å‡ç‡</td>
<td>0-1ä¹‹é—´</td>
<td>0.1, 0.2</td>
</tr>
<tr>
<td><code>op_margin_forecast_mode</code></td>
<td>string</td>
<td>å¦</td>
<td>"historical_median"</td>
<td>è¥ä¸šåˆ©æ¶¦ç‡é¢„æµ‹æ¨¡å¼</td>
<td>æšä¸¾å€¼: "historical_median", "transition_to_target"</td>
<td>"historical_median"</td>
</tr>
<tr>
<td><code>target_operating_margin</code></td>
<td>float</td>
<td>å¦</td>
<td>æ— </td>
<td>ç›®æ ‡è¥ä¸šåˆ©æ¶¦ç‡</td>
<td>0-1ä¹‹é—´ï¼Œtransitionæ¨¡å¼å¿…éœ€</td>
<td>0.25, 0.30</td>
</tr>
<tr>
<td><code>op_margin_transition_years</code></td>
<td>int</td>
<td>å¦</td>
<td>æ— </td>
<td>åˆ©æ¶¦ç‡è¿‡æ¸¡å¹´æ•°</td>
<td>&gt;=1ï¼Œtransitionæ¨¡å¼å¿…éœ€</td>
<td>3, 5</td>
</tr>
</tbody>
</table>
<h5 id="wacc">WACCè®¡ç®—å‚æ•°</h5>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>å¿…å¡«</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wacc_weight_mode</code></td>
<td>string</td>
<td>å¦</td>
<td>"target"</td>
<td>WACCæƒé‡è®¡ç®—æ¨¡å¼</td>
<td>æ­£åˆ™: <code>^(target\|market)$</code></td>
<td>"target"</td>
</tr>
<tr>
<td><code>target_debt_ratio</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>ç›®æ ‡å€ºåŠ¡æ¯”ä¾‹</td>
<td>0-1ä¹‹é—´ï¼Œtargetæ¨¡å¼å¿…éœ€</td>
<td>0.3, 0.4</td>
</tr>
<tr>
<td><code>cost_of_debt</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>ç¨å‰å€ºåŠ¡æˆæœ¬</td>
<td>&gt;=0</td>
<td>0.05, 0.08</td>
</tr>
<tr>
<td><code>risk_free_rate</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>æ— é£é™©åˆ©ç‡</td>
<td>&gt;=0</td>
<td>0.03, 0.035</td>
</tr>
<tr>
<td><code>beta</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>è´å¡”ç³»æ•°</td>
<td>ä»»æ„å®æ•°</td>
<td>1.2, 0.8</td>
</tr>
<tr>
<td><code>market_risk_premium</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>å¸‚åœºé£é™©æº¢ä»·</td>
<td>&gt;=0</td>
<td>0.05, 0.06</td>
</tr>
<tr>
<td><code>size_premium</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>è§„æ¨¡æº¢ä»·</td>
<td>ä»»æ„å®æ•°</td>
<td>0.02, -0.01</td>
</tr>
</tbody>
</table>
<h5 id="_7">ç»ˆå€¼è®¡ç®—å‚æ•°</h5>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>å¿…å¡«</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>terminal_value_method</code></td>
<td>string</td>
<td>å¦</td>
<td>"exit_multiple"</td>
<td>ç»ˆå€¼è®¡ç®—æ–¹æ³•</td>
<td>æšä¸¾å€¼: "exit_multiple", "perpetual_growth"</td>
<td>"exit_multiple"</td>
</tr>
<tr>
<td><code>exit_multiple</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>é€€å‡ºä¹˜æ•°</td>
<td>&gt;=0ï¼Œexit_multipleæ¨¡å¼å¿…éœ€</td>
<td>15.0, 18.0</td>
</tr>
<tr>
<td><code>perpetual_growth_rate</code></td>
<td>float</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>æ°¸ç»­å¢é•¿ç‡</td>
<td>&gt;=0ï¼Œperpetual_growthæ¨¡å¼å¿…éœ€</td>
<td>0.03, 0.035</td>
</tr>
</tbody>
</table>
<h5 id="llm">LLMæ§åˆ¶å‚æ•°</h5>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>å¿…å¡«</th>
<th>é»˜è®¤å€¼</th>
<th>è¯´æ˜</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>request_llm_summary</code></td>
<td>bool</td>
<td>å¦</td>
<td>false</td>
<td>æ˜¯å¦è¯·æ±‚LLMåˆ†æ</td>
<td>å¸ƒå°”å€¼</td>
<td>true, false</td>
</tr>
<tr>
<td><code>llm_provider</code></td>
<td>string</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>LLMæä¾›å•†</td>
<td>å­—ç¬¦ä¸²</td>
<td>"deepseek", "openai"</td>
</tr>
<tr>
<td><code>llm_model_id</code></td>
<td>string</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>LLMæ¨¡å‹ID</td>
<td>å­—ç¬¦ä¸²</td>
<td>"deepseek-chat", "gpt-4"</td>
</tr>
<tr>
<td><code>llm_api_base_url</code></td>
<td>string</td>
<td>å¦</td>
<td>ç³»ç»Ÿé»˜è®¤</td>
<td>è‡ªå®šä¹‰APIåœ°å€</td>
<td>URLæ ¼å¼</td>
<td>"https://api.deepseek.com"</td>
</tr>
<tr>
<td><code>llm_temperature</code></td>
<td>float</td>
<td>å¦</td>
<td>0.7</td>
<td>ç”Ÿæˆæ¸©åº¦å‚æ•°</td>
<td>0.0-2.0ä¹‹é—´</td>
<td>0.5, 1.0, 1.5</td>
</tr>
<tr>
<td><code>llm_top_p</code></td>
<td>float</td>
<td>å¦</td>
<td>0.9</td>
<td>Top-På‚æ•°</td>
<td>0.0-1.0ä¹‹é—´</td>
<td>0.8, 0.95</td>
</tr>
<tr>
<td><code>llm_max_tokens</code></td>
<td>int</td>
<td>å¦</td>
<td>4000</td>
<td>æœ€å¤§Tokenæ•°</td>
<td>&gt;=1</td>
<td>2000, 4096</td>
</tr>
</tbody>
</table>
<h5 id="_8">æ•æ„Ÿæ€§åˆ†æå‚æ•°</h5>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>å¿…å¡«</th>
<th>è¯´æ˜</th>
<th>çº¦æŸæ¡ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sensitivity_analysis</code></td>
<td>SensitivityAnalysisRequest</td>
<td>å¦</td>
<td>æ•æ„Ÿæ€§åˆ†æé…ç½®</td>
<td>å¤æ‚å¯¹è±¡ç»“æ„</td>
</tr>
</tbody>
</table>
<p><strong>è¯¦ç»†è¯·æ±‚ä½“ç¤ºä¾‹</strong>:</p>
<h5 id="1_1">1. åŸºç¡€ä¼°å€¼è¯·æ±‚</h5>
<pre><code class="language-json">{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 5,
    &quot;request_llm_summary&quot;: false,
    &quot;ltm_baseline_enabled&quot;: false
}
</code></pre>
<h5 id="2_1">2. å®Œæ•´å‚æ•°è¯·æ±‚ï¼ˆåŒ…å«æ‰€æœ‰çº¦æŸæ¡ä»¶ç¤ºä¾‹ï¼‰</h5>
<pre><code class="language-json">{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;market&quot;: &quot;A&quot;,
    &quot;valuation_date&quot;: &quot;2024-12-31&quot;,

    &quot;forecast_years&quot;: 10,
    &quot;cagr_decay_rate&quot;: 0.15,
    &quot;op_margin_forecast_mode&quot;: &quot;transition_to_target&quot;,
    &quot;target_operating_margin&quot;: 0.30,
    &quot;op_margin_transition_years&quot;: 5,

    &quot;wacc_weight_mode&quot;: &quot;target&quot;,
    &quot;target_debt_ratio&quot;: 0.35,
    &quot;cost_of_debt&quot;: 0.045,
    &quot;risk_free_rate&quot;: 0.03,
    &quot;beta&quot;: 1.1,
    &quot;market_risk_premium&quot;: 0.055,
    &quot;size_premium&quot;: 0.015,

    &quot;terminal_value_method&quot;: &quot;exit_multiple&quot;,
    &quot;exit_multiple&quot;: 16.5,
    &quot;ltm_baseline_enabled&quot;: true,

    &quot;request_llm_summary&quot;: true,
    &quot;llm_provider&quot;: &quot;deepseek&quot;,
    &quot;llm_model_id&quot;: &quot;deepseek-chat&quot;,
    &quot;llm_api_base_url&quot;: &quot;https://api.deepseek.com&quot;,
    &quot;llm_temperature&quot;: 0.8,
    &quot;llm_top_p&quot;: 0.9,
    &quot;llm_max_tokens&quot;: 3000
}
</code></pre>
<h5 id="3">3. è¾¹ç•Œå€¼æµ‹è¯•è¯·æ±‚</h5>
<pre><code class="language-json">{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 20,
    &quot;cagr_decay_rate&quot;: 0.99,
    &quot;target_operating_margin&quot;: 0.99,
    &quot;op_margin_transition_years&quot;: 1,
    &quot;target_debt_ratio&quot;: 0.99,
    &quot;cost_of_debt&quot;: 0.20,
    &quot;risk_free_rate&quot;: 0.15,
    &quot;llm_temperature&quot;: 2.0,
    &quot;llm_top_p&quot;: 1.0,
    &quot;llm_max_tokens&quot;: 1
}
</code></pre>
<h5 id="4">4. æ•æ„Ÿæ€§åˆ†æè¯·æ±‚</h5>
<pre><code class="language-json">{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 5,
    &quot;sensitivity_analysis&quot;: {
        &quot;row_axis&quot;: {
            &quot;parameter_name&quot;: &quot;wacc&quot;,
            &quot;values&quot;: [0.08, 0.09, 0.10, 0.11],
            &quot;step&quot;: 0.01,
            &quot;points&quot;: 4
        },
        &quot;column_axis&quot;: {
            &quot;parameter_name&quot;: &quot;exit_multiple&quot;,
            &quot;values&quot;: [14, 16, 18, 20],
            &quot;step&quot;: 2,
            &quot;points&quot;: 4
        }
    }
}
</code></pre>
<h5 id="5">5. æ°¸ç»­å¢é•¿æ³•è¯·æ±‚</h5>
<pre><code class="language-json">{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 8,
    &quot;terminal_value_method&quot;: &quot;perpetual_growth&quot;,
    &quot;perpetual_growth_rate&quot;: 0.035,
    &quot;wacc_weight_mode&quot;: &quot;market&quot;,
    &quot;ltm_baseline_enabled&quot;: true,
    &quot;request_llm_summary&quot;: true
}
</code></pre>
<h5 id="6">6. é”™è¯¯è¯·æ±‚ç¤ºä¾‹ï¼ˆè¿åçº¦æŸæ¡ä»¶ï¼‰</h5>
<pre><code class="language-json">{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 25,  // é”™è¯¯ï¼šè¶…è¿‡æœ€å¤§å€¼20
    &quot;cagr_decay_rate&quot;: 1.5,  // é”™è¯¯ï¼šè¶…è¿‡æœ€å¤§å€¼1
    &quot;target_operating_margin&quot;: -0.1,  // é”™è¯¯ï¼šè´Ÿå€¼
    &quot;llm_temperature&quot;: 3.0,  // é”™è¯¯ï¼šè¶…è¿‡æœ€å¤§å€¼2.0
    &quot;llm_top_p&quot;: 1.5,  // é”™è¯¯ï¼šè¶…è¿‡æœ€å¤§å€¼1.0
    &quot;wacc_weight_mode&quot;: &quot;invalid_mode&quot;  // é”™è¯¯ï¼šä¸åœ¨æšä¸¾å€¼ä¸­
}
</code></pre>
<p><strong>å“åº”æ¨¡å‹</strong>: StockValuationResponse</p>
<p><strong>å“åº”æ ¼å¼è¯¦è§£</strong>:</p>
<h5 id="1-">1. æˆåŠŸå“åº” - åŸºç¡€ä¼°å€¼</h5>
<pre><code class="language-json">{
    &quot;stock_info&quot;: {
        &quot;ts_code&quot;: &quot;600519.SH&quot;,
        &quot;name&quot;: &quot;è´µå·èŒ…å°&quot;,
        &quot;industry&quot;: &quot;ç™½é…’&quot;,
        &quot;list_date&quot;: &quot;2001-08-27&quot;,
        &quot;exchange&quot;: &quot;ä¸Šäº¤æ‰€&quot;,
        &quot;currency&quot;: &quot;CNY&quot;,
        &quot;market&quot;: &quot;A&quot;,
        &quot;latest_pe_ttm&quot;: 45.2,
        &quot;latest_pb_mrq&quot;: 12.8,
        &quot;total_shares&quot;: 1256197800,
        &quot;free_float_shares&quot;: 1256197800,
        &quot;ttm_dps&quot;: 25.91,
        &quot;dividend_yield&quot;: 0.0158,
        &quot;act_name&quot;: &quot;è´µå·çœäººæ°‘æ”¿åºœå›½æœ‰èµ„äº§ç›‘ç£ç®¡ç†å§”å‘˜ä¼š&quot;,
        &quot;act_ent_type&quot;: &quot;å›½ä¼&quot;,
        &quot;latest_annual_diluted_eps&quot;: 49.32,
        &quot;base_report_date&quot;: &quot;2024-09-30&quot;
    },
    &quot;valuation_results&quot;: {
        &quot;latest_price&quot;: 1725.0,
        &quot;current_pe&quot;: 45.2,
        &quot;current_pb&quot;: 12.8,
        &quot;dcf_forecast_details&quot;: {
            &quot;enterprise_value&quot;: 2150000000000,
            &quot;equity_value&quot;: 2100000000000,
            &quot;value_per_share&quot;: 1675.5,
            &quot;net_debt&quot;: 50000000000,
            &quot;pv_forecast_ufcf&quot;: 800000000000,
            &quot;pv_terminal_value&quot;: 1350000000000,
            &quot;terminal_value&quot;: 2500000000000,
            &quot;wacc_used&quot;: 0.085,
            &quot;cost_of_equity_used&quot;: 0.12,
            &quot;terminal_value_method_used&quot;: &quot;exit_multiple&quot;,
            &quot;exit_multiple_used&quot;: 15.2,
            &quot;perpetual_growth_rate_used&quot;: null,
            &quot;forecast_period_years&quot;: 5,
            &quot;dcf_implied_diluted_pe&quot;: 33.97,
            &quot;base_ev_ebitda&quot;: 18.5,
            &quot;implied_perpetual_growth_rate&quot;: 0.035
        },
        &quot;other_analysis&quot;: {
            &quot;dividend_analysis&quot;: {
                &quot;current_yield_pct&quot;: 1.58,
                &quot;avg_dividend_3y&quot;: 22.5,
                &quot;payout_ratio_pct&quot;: 52.5
            },
            &quot;growth_analysis&quot;: {
                &quot;net_income_cagr_3y&quot;: 15.2,
                &quot;revenue_cagr_3y&quot;: 18.7
            }
        },
        &quot;detailed_forecast_table&quot;: [
            {
                &quot;year&quot;: 2024,
                &quot;revenue&quot;: 150000000000,
                &quot;revenue_growth&quot;: 0.18,
                &quot;gross_profit&quot;: 120000000000,
                &quot;operating_profit&quot;: 75000000000,
                &quot;operating_margin&quot;: 0.50,
                &quot;ebit&quot;: 75000000000,
                &quot;tax_rate&quot;: 0.25,
                &quot;nopat&quot;: 56250000000,
                &quot;da&quot;: 8000000000,
                &quot;capex&quot;: 12000000000,
                &quot;nwc_change&quot;: 5000000000,
                &quot;ufcf&quot;: 47250000000,
                &quot;nwc&quot;: 30000000000,
                &quot;nwc_days&quot;: 73
            },
            {
                &quot;year&quot;: 2025,
                &quot;revenue&quot;: 168000000000,
                &quot;revenue_growth&quot;: 0.12,
                &quot;gross_profit&quot;: 134400000000,
                &quot;operating_profit&quot;: 84000000000,
                &quot;operating_margin&quot;: 0.50,
                &quot;ebit&quot;: 84000000000,
                &quot;tax_rate&quot;: 0.25,
                &quot;nopat&quot;: 63000000000,
                &quot;da&quot;: 8960000000,
                &quot;capex&quot;: 13440000000,
                &quot;nwc_change&quot;: 5600000000,
                &quot;ufcf&quot;: 52960000000,
                &quot;nwc&quot;: 35600000000,
                &quot;nwc_days&quot;: 73
            }
        ],
        &quot;sensitivity_analysis_result&quot;: null,
        &quot;llm_analysis_summary&quot;: null,
        &quot;data_warnings&quot;: [
            &quot;2024å¹´æ•°æ®ä¸ºåŸºäºå‰ä¸‰ä¸ªå­£åº¦çš„é¢„æµ‹å€¼&quot;,
            &quot;éƒ¨åˆ†å†å²æ•°æ®ç¼ºå¤±ï¼Œä½¿ç”¨è¡Œä¸šå¹³å‡å€¼æ›¿ä»£&quot;
        ],
        &quot;historical_financial_summary&quot;: [
            {
                &quot;year&quot;: 2023,
                &quot;revenue&quot;: 129700000000,
                &quot;operating_profit&quot;: 64850000000,
                &quot;net_income&quot;: 48550000000,
                &quot;total_assets&quot;: 185000000000,
                &quot;total_liabilities&quot;: 45000000000
            }
        ],
        &quot;historical_ratios_summary&quot;: [
            {
                &quot;year&quot;: 2023,
                &quot;operating_margin&quot;: 0.50,
                &quot;roic&quot;: 0.28,
                &quot;asset_turnover&quot;: 0.70,
                &quot;debt_to_equity&quot;: 0.32
            }
        ],
        &quot;special_industry_warning&quot;: null
    },
    &quot;error&quot;: null
}
</code></pre>
<h5 id="_9">è°ƒè¯•å­—æ®µè¯´æ˜ï¼ˆç‰‡æ®µï¼‰</h5>
<p>å“åº”ä¸­è¿˜åŒ…å«ç”¨äºå®¡è®¡/è°ƒè¯•çš„ç‰‡æ®µï¼š</p>
<pre><code class="language-json">{
  &quot;valuation_results&quot;: {
    &quot;debug_request_slice&quot;: {
      &quot;forecast_years&quot;: 5,
      &quot;ltm_baseline_enabled&quot;: true,
      &quot;nwc_baseline_mode&quot;: &quot;component&quot;,
      &quot;baseline_debug&quot;: { &quot;mode&quot;: &quot;LTM&quot;, &quot;curr_end_date&quot;: &quot;2025-06-30&quot;, &quot;curr_end_type&quot;: &quot;2&quot; }
    }
  }
}
</code></pre>
<p>å…¶ä¸­ <code>baseline_debug</code> ä¼šåœ¨ LTM æ¨¡å¼ä¸‹åŒ…å« YTD/LTM çš„åˆ†è§£ï¼›åœ¨ Annual æ¨¡å¼ä¸º <code>{ "mode": "Annual" }</code>ã€‚</p>
<h6 id="vs">å¯¹ç…§è¯´æ˜ï¼ˆæœ€å°èŠ‚é€‰ vs å®Œæ•´ç‰ˆï¼‰</h6>
<ul>
<li>æœ€å°èŠ‚é€‰ï¼šä»…è¿”å›å‰ç«¯æœ€å¸¸ç”¨çš„å¿«å–å­—æ®µï¼ˆ<code>value_per_share</code>ã€<code>wacc_used</code>ã€<code>exit_multiple_used</code>ã€ä»·æ ¼ä¸TTMåˆ†çº¢å£å¾„ç­‰ï¼‰ï¼Œ<code>debug_request_slice</code> ä»…å« <code>baseline_debug</code>ã€‚</li>
<li>å®Œæ•´ç‰ˆï¼šåœ¨æœ€å°èŠ‚é€‰åŸºç¡€ä¸Šï¼Œè¡¥å…… <code>detailed_forecast_table</code>ã€<code>historical_*</code>ã€LLMæ‘˜è¦ã€ä»¥åŠ <code>debug_request_slice.applied_preset</code> ä¸ <code>applied_preset_diff</code>ï¼ˆå«åŒºé—´ä¸åç¦»çŠ¶æ€ï¼‰ã€‚</li>
<li>è¯¥å¯¹ç…§ç”¨äº UI å¿«é€ŸåŠ è½½ä¸å®¡è®¡æ·±æŒ–ä¸¤ç§è·¯å¾„ï¼Œæ¥å£ä¸€è‡´ï¼Œå­—æ®µå¯é€‰è¿”å›ã€‚</li>
</ul>
<h6 id="11-">1.1 æˆåŠŸå“åº” - æœ€å°èŠ‚é€‰ï¼ˆä¾¿äºå‰ç«¯å¿«é€Ÿå–ç”¨ï¼‰</h6>
<pre><code class="language-json">{
  &quot;stock_info&quot;: {
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;name&quot;: &quot;è´µå·èŒ…å°&quot;,
    &quot;market&quot;: &quot;ä¸»æ¿&quot;,
    &quot;latest_annual_diluted_eps&quot;: 68.64,
    &quot;base_report_date&quot;: &quot;2023-12-31&quot;,
    &quot;latest_price_as_of_date&quot;: &quot;2024-10-15&quot;,
    &quot;eps_annual_as_of_year&quot;: 2023,
    &quot;ttm_dps&quot;: 49.982,
    &quot;dividend_yield&quot;: 0.0349,
    &quot;ttm_dps_source&quot;: &quot;implemented&quot;
  },
  &quot;valuation_results&quot;: {
    &quot;latest_price&quot;: 1476.1,
    &quot;current_pe&quot;: 28.08,
    &quot;current_pb&quot;: 9.73,
    &quot;dcf_forecast_details&quot;: {
      &quot;value_per_share&quot;: 2318.05,
      &quot;wacc_used&quot;: 0.0609,
      &quot;terminal_value_method_used&quot;: &quot;exit_multiple&quot;,
      &quot;exit_multiple_used&quot;: 15.0,
      &quot;implied_perpetual_growth_rate&quot;: 0.0169
    },
    &quot;debug_request_slice&quot;: {
      &quot;baseline_debug&quot;: { &quot;mode&quot;: &quot;LTM&quot;, &quot;curr_end_date&quot;: &quot;2024-09-30&quot; }
    }
  }
}
</code></pre>
<h6 id="12-debugapplied_presetdiff">1.2 æˆåŠŸå“åº” - å®Œæ•´ç‰ˆï¼ˆå« debug/applied_preset/diffï¼‰</h6>
<pre><code class="language-json">{
  &quot;stock_info&quot;: {
    &quot;ts_code&quot;: &quot;601717.SH&quot;,
    &quot;name&quot;: &quot;éƒ‘ç…¤æœº&quot;,
    &quot;market&quot;: &quot;ä¸»æ¿&quot;,
    &quot;latest_annual_diluted_eps&quot;: 2.2120,
    &quot;base_report_date&quot;: &quot;2023-12-31&quot;,
    &quot;latest_price_as_of_date&quot;: &quot;2025-09-10&quot;,
    &quot;eps_annual_as_of_year&quot;: 2024,
    &quot;ttm_dps&quot;: 1.12,
    &quot;dividend_yield&quot;: 0.0516,
    &quot;ttm_dps_source&quot;: &quot;proposal&quot;,
    &quot;ttm_window_start&quot;: &quot;2024-09-10&quot;,
    &quot;ttm_window_end&quot;: &quot;2025-09-10&quot;
  },
  &quot;valuation_results&quot;: {
    &quot;latest_price&quot;: 21.71,
    &quot;current_pe&quot;: 9.23,
    &quot;current_pb&quot;: 1.48,
    &quot;dcf_forecast_details&quot;: {
      &quot;value_per_share&quot;: 26.86,
      &quot;wacc_used&quot;: 0.0609,
      &quot;terminal_value_method_used&quot;: &quot;exit_multiple&quot;,
      &quot;exit_multiple_used&quot;: 8.0,
      &quot;implied_perpetual_growth_rate&quot;: 0.0045
    },
    &quot;detailed_forecast_table&quot;: [ { &quot;year&quot;: 1, &quot;revenue&quot;: 3.70e10, &quot;ufcf&quot;: 1.23e9 } ],
    &quot;data_warnings&quot;: [],
    &quot;debug_request_slice&quot;: {
      &quot;baseline_debug&quot;: {
        &quot;mode&quot;: &quot;LTM&quot;,
        &quot;curr_end_date&quot;: &quot;2025-06-30&quot;,
        &quot;curr_end_type&quot;: &quot;2&quot;,
        &quot;ytd_curr_total_revenue&quot;: 2.786e10,
        &quot;ytd_prev_total_revenue&quot;: 2.726e10,
        &quot;prev_annual_total_revenue&quot;: 3.642e10
      },
      &quot;applied_preset&quot;: {
        &quot;key&quot;: &quot;industrials&quot;,
        &quot;beta&quot;: { &quot;default&quot;: 1.0, &quot;range&quot;: [0.8, 1.3] },
        &quot;forecast_years&quot;: { &quot;default&quot;: 5, &quot;range&quot;: [4, 7] },
        &quot;pgr_cap&quot;: { &quot;default&quot;: 0.045, &quot;range&quot;: [0.03, 0.05] },
        &quot;exit_multiple_ev_ebitda&quot;: { &quot;default&quot;: 9.0, &quot;range&quot;: [6.0, 12.0] },
        &quot;turnover_days&quot;: {
          &quot;ar&quot;: { &quot;median&quot;: 60, &quot;range&quot;: [20, 120] },
          &quot;inv&quot;: { &quot;median&quot;: 80, &quot;range&quot;: [40, 180] },
          &quot;ap&quot;: { &quot;median&quot;: 55, &quot;range&quot;: [25, 110] }
        }
      },
      &quot;applied_preset_diff&quot;: {
        &quot;beta&quot;: { &quot;value&quot;: 1.0, &quot;default&quot;: 1.0, &quot;range_status&quot;: &quot;within&quot;, &quot;modified&quot;: false },
        &quot;forecast_years&quot;: { &quot;value&quot;: 5.0, &quot;default&quot;: 5.0, &quot;range_status&quot;: &quot;within&quot;, &quot;modified&quot;: false },
        &quot;pgr_cap&quot;: { &quot;value&quot;: 0.045, &quot;default&quot;: 0.045, &quot;range_status&quot;: &quot;within&quot;, &quot;modified&quot;: false },
        &quot;exit_multiple_ev_ebitda&quot;: { &quot;value&quot;: 9.0, &quot;default&quot;: 9.0, &quot;range_status&quot;: &quot;within&quot;, &quot;modified&quot;: false },
        &quot;turnover_days&quot;: {
          &quot;ar&quot;: { &quot;value&quot;: 60.0, &quot;default&quot;: 60.0, &quot;range_status&quot;: &quot;within&quot;, &quot;modified&quot;: false },
          &quot;inv&quot;: { &quot;value&quot;: 80.0, &quot;default&quot;: 80.0, &quot;range_status&quot;: &quot;within&quot;, &quot;modified&quot;: false },
          &quot;ap&quot;: { &quot;value&quot;: 55.0, &quot;default&quot;: 55.0, &quot;range_status&quot;: &quot;within&quot;, &quot;modified&quot;: false }
        }
      }
    }
  },
  &quot;error&quot;: null
}
</code></pre>
<h5 id="1x">1.x ä¸‰æƒ…æ™¯åˆ†æï¼ˆä¹è§‚/åŸºå‡†/æ‚²è§‚ï¼‰ï¼ˆææ¡ˆï¼‰</h5>
<p>ä¸ºè¡¥è¶³â€œåŒºé—´è¾“å‡ºã€å…³é”®é©±åŠ¨æ’åºâ€çš„éœ€æ±‚ï¼Œå»ºè®®åœ¨ç°æœ‰ä¼°å€¼æ¥å£ä¸­å¼•å…¥å¯é€‰å­—æ®µ <code>scenarios</code>ï¼Œç”±å®¢æˆ·ç«¯æäº¤ä¸‰å¥—å‚æ•°è°ƒæ•´ï¼ŒæœåŠ¡ç«¯æŒ‰ä¸‰å¥—å‡è®¾å„è‡ªè·‘ä¸€éä¼°å€¼ï¼Œå¹¶ç»™å‡ºæ±‡æ€»åŒºé—´ä¸é©±åŠ¨æ’åºã€‚</p>
<p>è¯·æ±‚æ¨¡å‹æ‰©å±•ï¼ˆæ–°å¢ï¼Œå¯é€‰ï¼‰ï¼š</p>
<pre><code class="language-json">{
  &quot;ts_code&quot;: &quot;600519.SH&quot;,
  &quot;forecast_years&quot;: 5,
  &quot;terminal_value_method&quot;: &quot;exit_multiple&quot;,
  &quot;exit_multiple&quot;: 15,
  &quot;scenarios&quot;: {
    &quot;base&quot;: {
      &quot;label&quot;: &quot;åŸºå‡†&quot;,
      &quot;weight&quot;: 0.5,
      &quot;overrides&quot;: {},
      &quot;multipliers&quot;: {}
    },
    &quot;bull&quot;: {
      &quot;label&quot;: &quot;ä¹è§‚&quot;,
      &quot;weight&quot;: 0.25,
      &quot;overrides&quot;: { &quot;wacc&quot;: 0.07, &quot;exit_multiple&quot;: 17 },
      &quot;multipliers&quot;: { &quot;target_operating_margin&quot;: 1.05, &quot;target_inventory_days&quot;: 0.9 }
    },
    &quot;bear&quot;: {
      &quot;label&quot;: &quot;æ‚²è§‚&quot;,
      &quot;weight&quot;: 0.25,
      &quot;overrides&quot;: { &quot;wacc&quot;: 0.10, &quot;exit_multiple&quot;: 13 },
      &quot;multipliers&quot;: { &quot;target_operating_margin&quot;: 0.95, &quot;target_inventory_days&quot;: 1.1 }
    }
  }
}
</code></pre>
<p>å­—æ®µçº¦å®šï¼š
- <code>overrides</code>ï¼šæŒ‰è¯·æ±‚æ¨¡å‹åŒåå­—æ®µè¿›è¡Œæ›¿æ¢ï¼ˆå¦‚ <code>wacc</code>ã€<code>exit_multiple</code>ã€<code>perpetual_growth_rate</code>ã€<code>target_operating_margin</code>ã€<code>target_*_days</code> ç­‰ï¼‰ã€‚
- <code>multipliers</code>ï¼šæŒ‰è¯·æ±‚æ¨¡å‹åŒåå­—æ®µè¿›è¡Œä¹˜æ•°è°ƒæ•´ï¼ˆå…ˆä¹˜åæˆªæ–­åˆ°æœ‰æ•ˆåŒºé—´ï¼Œä¼˜å…ˆçº§ä½äº <code>overrides</code>ï¼‰ã€‚
- <code>weight</code>ï¼šç”¨äºåŠ æƒå‡å€¼/åˆ†ä½çš„æƒé‡ï¼ˆå¯é€‰ï¼Œé»˜è®¤å„ 1/3ï¼‰ã€‚</p>
<p>å“åº”æ‰©å±•ï¼ˆæ–°å¢ï¼Œå¯é€‰ï¼‰ï¼š</p>
<pre><code class="language-json">{
  &quot;valuation_results&quot;: {
    &quot;scenario_results&quot;: {
      &quot;base&quot;: {
        &quot;dcf_forecast_details&quot;: { &quot;value_per_share&quot;: 1675.5, &quot;wacc_used&quot;: 0.085 },
        &quot;ev_ebitda&quot;: 18.5
      },
      &quot;bull&quot;: {
        &quot;dcf_forecast_details&quot;: { &quot;value_per_share&quot;: 1850.2, &quot;wacc_used&quot;: 0.078 },
        &quot;ev_ebitda&quot;: 19.8
      },
      &quot;bear&quot;: {
        &quot;dcf_forecast_details&quot;: { &quot;value_per_share&quot;: 1498.3, &quot;wacc_used&quot;: 0.094 },
        &quot;ev_ebitda&quot;: 17.2
      },
      &quot;summary&quot;: {
        &quot;value_per_share&quot;: { &quot;min&quot;: 1498.3, &quot;p10&quot;: 1510.0, &quot;p50&quot;: 1675.5, &quot;p90&quot;: 1830.0, &quot;max&quot;: 1850.2, &quot;weighted_mean&quot;: 1674.9 },
        &quot;enterprise_value&quot;: { &quot;min&quot;: 1.76e12, &quot;p50&quot;: 2.10e12, &quot;max&quot;: 2.32e12 },
        &quot;key_drivers_ranking&quot;: [
          { &quot;name&quot;: &quot;wacc&quot;, &quot;contribution&quot;: 0.46 },
          { &quot;name&quot;: &quot;exit_multiple&quot;, &quot;contribution&quot;: 0.31 },
          { &quot;name&quot;: &quot;target_operating_margin&quot;, &quot;contribution&quot;: 0.15 },
          { &quot;name&quot;: &quot;nwc_days&quot;, &quot;contribution&quot;: 0.08 }
        ],
        &quot;note&quot;: &quot;æ’ååŸºäºåŸºå‡†ç‚¹å‘¨è¾¹ä¸€å› å­å¼¹æ€§/æ–¹å·®è´¡çŒ®çš„è¿‘ä¼¼åˆ†è§£ï¼ˆææ¡ˆï¼‰ã€‚&quot;
      }
    }
  }
}
</code></pre>
<p>å®ç°å¤‡æ³¨ï¼š
- å½“å‰ä»£ç å°šæœªè¿”å› <code>scenario_results</code> å­—æ®µï¼Œæ­¤ä¸ºæ¥å£ææ¡ˆï¼›è½åœ°éœ€åœ¨ <code>StockValuationRequest</code> å¢åŠ  <code>scenarios</code>ï¼Œå¹¶åœ¨ <code>ValuationService</code> é€æƒ…æ™¯é‡è·‘å¹¶æ±‡æ€»ã€‚
- <code>key_drivers_ranking</code> å¯åŸºäºä¸€å› å­æ‰°åŠ¨ï¼ˆOFATï¼‰æˆ– Sobol è¿‘ä¼¼ï¼ˆè½»é‡ï¼‰è®¡ç®—ç›¸å¯¹è´¡çŒ®ï¼Œå…ˆå®ç° OFAT ç‰ˆä»¥ä¿è¯æ€§èƒ½ä¸å¯è§£é‡Šæ€§ã€‚
- UI å»ºè®®ï¼š
  - æƒ…æ™¯é¢æ¿ï¼šä¸ºâ€œæ”¶å…¥å¢é€Ÿ/åˆ©æ¶¦ç‡/NWC/WACC/ç»ˆå€¼å‚æ•°â€æä¾›â€œè¦†ç›–/ä¹˜æ•°â€ä¸¤ç§è¾“å…¥ï¼Œæ”¯æŒæƒé‡ï¼›æä¾›â€œé‡ç½®ä¸ºè¡Œä¸šé¢„è®¾â€çš„æŒ‰é’®ã€‚
  - ç»“æœæ±‡æ€»ï¼šå±•ç¤ºä¼°å€¼åŒºé—´ï¼ˆæ¡å½¢/èƒ¡é¡»å›¾ï¼‰ã€æƒé‡å‡å€¼ã€ä¸åŸºå‡†å·®å¼‚ï¼›ç»˜åˆ¶â€œå…³é”®é©±åŠ¨æ’åºâ€ï¼ˆTornado chartï¼‰ã€‚</p>
<h5 id="2-">2. æˆåŠŸå“åº” - åŒ…å«æ•æ„Ÿæ€§åˆ†æ</h5>
<pre><code class="language-json">{
    &quot;stock_info&quot;: {
        &quot;ts_code&quot;: &quot;600519.SH&quot;,
        &quot;name&quot;: &quot;è´µå·èŒ…å°&quot;,
        &quot;industry&quot;: &quot;ç™½é…’&quot;,
        &quot;market&quot;: &quot;A&quot;,
        &quot;latest_pe_ttm&quot;: 45.2,
        &quot;latest_pb_mrq&quot;: 12.8,
        &quot;total_shares&quot;: 1256197800,
        &quot;base_report_date&quot;: &quot;2024-09-30&quot;
    },
    &quot;valuation_results&quot;: {
        &quot;latest_price&quot;: 1725.0,
        &quot;current_pe&quot;: 45.2,
        &quot;current_pb&quot;: 12.8,
        &quot;dcf_forecast_details&quot;: {
            &quot;enterprise_value&quot;: 2150000000000,
            &quot;equity_value&quot;: 2100000000000,
            &quot;value_per_share&quot;: 1675.5,
            &quot;wacc_used&quot;: 0.085,
            &quot;terminal_value_method_used&quot;: &quot;exit_multiple&quot;,
            &quot;exit_multiple_used&quot;: 15.2,
            &quot;forecast_period_years&quot;: 5,
            &quot;dcf_implied_diluted_pe&quot;: 33.97
        },
        &quot;sensitivity_analysis_result&quot;: {
            &quot;row_parameter&quot;: &quot;wacc&quot;,
            &quot;column_parameter&quot;: &quot;exit_multiple&quot;,
            &quot;row_values&quot;: [0.08, 0.09, 0.10, 0.11],
            &quot;column_values&quot;: [14, 16, 18, 20],
            &quot;result_tables&quot;: {
                &quot;value_per_share&quot;: [
                    [1850.5, 1675.5, 1520.3, 1380.2],
                    [1680.3, 1520.8, 1380.5, 1255.2],
                    [1535.2, 1388.6, 1260.4, 1148.3],
                    [1408.1, 1274.2, 1157.8, 1054.6]
                ],
                &quot;enterprise_value&quot;: [
                    [2325000000000, 2100000000000, 1900000000000, 1720000000000],
                    [2110000000000, 1910000000000, 1730000000000, 1570000000000],
                    [1925000000000, 1740000000000, 1580000000000, 1430000000000],
                    [1760000000000, 1590000000000, 1440000000000, 1310000000000]
                ],
                &quot;dcf_implied_pe&quot;: [
                    [37.5, 33.97, 30.8, 27.9],
                    [34.0, 30.8, 27.9, 25.3],
                    [31.1, 28.1, 25.5, 23.2],
                    [28.5, 25.8, 23.4, 21.3]
                ],
                &quot;tv_ev_ratio&quot;: [
                    [0.68, 0.65, 0.62, 0.60],
                    [0.70, 0.66, 0.63, 0.61],
                    [0.71, 0.67, 0.64, 0.62],
                    [0.72, 0.68, 0.65, 0.63]
                ],
                &quot;ev_ebitda&quot;: [
                    [18.9, 17.8, 16.7, 15.9],
                    [18.3, 17.2, 16.3, 15.5],
                    [17.7, 16.7, 15.8, 15.1],
                    [17.2, 16.2, 15.4, 14.8]
                ],
                &quot;ev_ebitda_terminal&quot;: [
                    [16.2, 15.1, 14.3, 13.7],
                    [15.7, 14.7, 13.9, 13.3],
                    [15.3, 14.3, 13.6, 13.0],
                    [14.9, 14.0, 13.3, 12.8]
                ],
                &quot;implied_pgr&quot;: [
                    [0.017, 0.013, 0.011, 0.009],
                    [0.019, 0.015, 0.012, 0.010],
                    [0.021, 0.017, 0.014, 0.011],
                    [0.022, 0.018, 0.015, 0.012]
                ]
            }
        },
        &quot;data_warnings&quot;: [],
        &quot;historical_financial_summary&quot;: [...],
        &quot;historical_ratios_summary&quot;: [...]
    },
    &quot;error&quot;: null
}
</code></pre>
<p>è¯´æ˜ï¼š
- è‹¥åˆ—å‚æ•°ä¸º <code>perpetual_growth_rate</code> ä¸”å‡ºç° <code>g â‰¥ WACC</code> çš„è¡Œ/åˆ—ç»„åˆï¼Œè¯¥å•å…ƒæ ¼è¿”å› <code>null</code>ï¼›åŒæ—¶ <code>valuation_results.data_warnings</code> ä¼šåŒ…å«â€œç»„åˆè¢«è·³è¿‡â€çš„æç¤ºï¼Œä¾¿äº UI æ ‡æ³¨ç©ºç™½çš„åˆç†æ€§ã€‚
- <code>dcf_implied_pe</code> çš„å•å…ƒæ ¼æ•°å€¼ä¼˜å…ˆå–æ¨¡å‹è¿”å›ï¼›ç¼ºå¤±æ—¶ä»¥åŸºå‡† EPSï¼ˆæœ€è¿‘å¹´æŠ¥ï¼‰ä¸è¯¥æ ¼æ¯è‚¡ä»·å€¼è®¡ç®—å›å¡«ã€‚
- <code>ev_ebitda</code> ä»¥ LTM å®é™… EBITDA ä¸ºåˆ†æ¯ï¼›<code>ev_ebitda_terminal</code> ä»¥æœ«æœŸé¢„æµ‹ EBITDA ä¸ºåˆ†æ¯ã€‚ä¸¤è€…å£å¾„ä¸åŒï¼Œä½¿ç”¨åœºæ™¯ä¸åŒï¼ˆLTM ä¾¿äºä¸å¸‚åœºå£å¾„å¯¹æ ‡ï¼ŒTerminal ä¾¿äºæ ¡éªŒé€€å‡ºå€æ•°å‡è®¾ï¼‰ã€‚</p>
<h5 id="3-llm">3. æˆåŠŸå“åº” - åŒ…å«LLMåˆ†æ</h5>
<pre><code class="language-json">{
    &quot;stock_info&quot;: {
        &quot;ts_code&quot;: &quot;600519.SH&quot;,
        &quot;name&quot;: &quot;è´µå·èŒ…å°&quot;,
        &quot;industry&quot;: &quot;ç™½é…’&quot;,
        &quot;market&quot;: &quot;A&quot;,
        &quot;latest_pe_ttm&quot;: 45.2,
        &quot;base_report_date&quot;: &quot;2024-09-30&quot;
    },
    &quot;valuation_results&quot;: {
        &quot;latest_price&quot;: 1725.0,
        &quot;current_pe&quot;: 45.2,
        &quot;dcf_forecast_details&quot;: {
            &quot;value_per_share&quot;: 1675.5,
            &quot;wacc_used&quot;: 0.085,
            &quot;terminal_value_method_used&quot;: &quot;exit_multiple&quot;,
            &quot;exit_multiple_used&quot;: 15.2,
            &quot;dcf_implied_diluted_pe&quot;: 33.97
        },
        &quot;llm_analysis_summary&quot;: &quot;# è´µå·èŒ…å°(600519.SH)æŠ•èµ„åˆ†ææŠ¥å‘Š\n\n## ä¼°å€¼æ‘˜è¦\n- **å½“å‰è‚¡ä»·**: 1,725.0å…ƒ\n- **DCFä¼°å€¼**: 1,675.5å…ƒ\n- **ä¼°å€¼å·®å¼‚**: -2.9% (ç•¥å¾®ä½ä¼°)\n- **å»ºè®®è¯„çº§**: æŒæœ‰\n\n## æŠ•èµ„äº®ç‚¹\n1. **å“ç‰ŒæŠ¤åŸæ²³**: èŒ…å°æ‹¥æœ‰å¼ºå¤§çš„å“ç‰Œä»·å€¼å’Œå®šä»·æƒ\n2. **è´¢åŠ¡è¡¨ç°**: æ¯›åˆ©ç‡é«˜è¾¾50%ï¼ŒROEè¶…è¿‡25%\n3. **å¢é•¿ç¨³å®š**: æ”¶å…¥å’Œåˆ©æ¶¦ä¿æŒç¨³å¥å¢é•¿\n4. **ç°é‡‘æµ**: äº§ç”Ÿå¼ºåŠ²çš„è‡ªç”±ç°é‡‘æµ\n\n## é£é™©å› ç´ \n1. **ä¼°å€¼åé«˜**: å½“å‰PE_TTMä¸º45.2å€ï¼Œé«˜äºå†å²å¹³å‡\n2. **æ”¿ç­–é£é™©**: ç™½é…’è¡Œä¸šé¢ä¸´æ¶ˆè´¹æ”¿ç­–å˜åŒ–é£é™©\n3. **ç«äº‰åŠ å‰§**: é«˜ç«¯ç™½é…’å¸‚åœºç«äº‰åŠ å‰§\n\n## æŠ•èµ„å»ºè®®\nåŸºäºDCFä¼°å€¼ç»“æœï¼Œå½“å‰è‚¡ä»·ç•¥å¾®é«˜ä¼°ï¼Œå»ºè®®æŠ•èµ„è€…ç­‰å¾…æ›´å¥½çš„ä¹°å…¥æ—¶æœºã€‚é•¿æœŸæ¥çœ‹ï¼ŒèŒ…å°ä¾ç„¶æ˜¯ä¼˜è´¨çš„æ ¸å¿ƒèµ„äº§ã€‚\n\n&gt; *åˆ†æåŸºäºDCFä¼°å€¼æ¨¡å‹ï¼Œå­˜åœ¨æ¨¡å‹å‡è®¾é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚*&quot;,
        &quot;data_warnings&quot;: [
            &quot;LLMåˆ†æåŸºäºå†å²æ•°æ®ï¼Œæœªæ¥è¡¨ç°å¯èƒ½å­˜åœ¨å·®å¼‚&quot;
        ]
    },
    &quot;error&quot;: null
}
</code></pre>
<h5 id="4-">4. é”™è¯¯å“åº” - å‚æ•°éªŒè¯å¤±è´¥</h5>
<pre><code class="language-json">{
    &quot;detail&quot;: [
        {
            &quot;loc&quot;: [&quot;body&quot;, &quot;forecast_years&quot;],
            &quot;msg&quot;: &quot;ensure this value is less than or equal to 20&quot;,
            &quot;type&quot;: &quot;value_error.number.not_le&quot;,
            &quot;ctx&quot;: {
                &quot;limit_value&quot;: 20
            }
        },
        {
            &quot;loc&quot;: [&quot;body&quot;, &quot;cagr_decay_rate&quot;],
            &quot;msg&quot;: &quot;ensure this value is less than or equal to 1&quot;,
            &quot;type&quot;: &quot;value_error.number.not_le&quot;,
            &quot;ctx&quot;: {
                &quot;limit_value&quot;: 1
            }
        }
    ]
}
</code></pre>
<h5 id="5-">5. é”™è¯¯å“åº” - è‚¡ç¥¨æ•°æ®æœªæ‰¾åˆ°</h5>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;æ— æ³•è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯: 999999.SH&quot;
}
</code></pre>
<h5 id="6-">6. é”™è¯¯å“åº” - ä¸šåŠ¡é€»è¾‘é”™è¯¯</h5>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;é¢„æµ‹æœŸå¹´æ•°å¿…é¡»åœ¨1-20ä¹‹é—´&quot;
}
</code></pre>
<h5 id="7-">7. é”™è¯¯å“åº” - æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</h5>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: è®¡ç®—WACCå¤±è´¥&quot;
}
</code></pre>
<h5 id="8-">8. æˆåŠŸå“åº” - é‡‘èè¡Œä¸šç‰¹æ®Šè­¦å‘Š</h5>
<pre><code class="language-json">{
    &quot;stock_info&quot;: {
        &quot;ts_code&quot;: &quot;600036.SH&quot;,
        &quot;name&quot;: &quot;æ‹›å•†é“¶è¡Œ&quot;,
        &quot;industry&quot;: &quot;é“¶è¡Œ&quot;,
        &quot;market&quot;: &quot;A&quot;,
        &quot;latest_pe_ttm&quot;: 8.5,
        &quot;base_report_date&quot;: &quot;2024-09-30&quot;
    },
    &quot;valuation_results&quot;: {
        &quot;latest_price&quot;: 35.6,
        &quot;current_pe&quot;: 8.5,
        &quot;dcf_forecast_details&quot;: {
            &quot;value_per_share&quot;: 38.2,
            &quot;wacc_used&quot;: 0.075,
            &quot;terminal_value_method_used&quot;: &quot;perpetual_growth&quot;,
            &quot;perpetual_growth_rate_used&quot;: 0.03
        },
        &quot;special_industry_warning&quot;: &quot;âš ï¸ é‡‘èè¡Œä¸šè­¦å‘Šï¼šDCFæ¨¡å‹å¯¹é‡‘èä¼ä¸šé€‚ç”¨æ€§æœ‰é™ã€‚å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è¾…åŠ©ä¼°å€¼ï¼š\n1. è‚¡æ¯æŠ˜ç°æ¨¡å‹(DDM)\n2. å¸‚å‡€ç‡(P/B)ç›¸å¯¹ä¼°å€¼\n3. å‡€èµ„äº§æ”¶ç›Šç‡(ROE)åˆ†æ\n4. ä¸è‰¯è´·æ¬¾ç‡å’Œæ‹¨å¤‡è¦†ç›–ç‡åˆ†æ\n\nå½“å‰DCFä¼°å€¼ç»“æœä»…ä¾›å‚è€ƒï¼ŒæŠ•èµ„å†³ç­–è¯·ç»“åˆä¸“ä¸šé‡‘èåˆ†æã€‚&quot;
    },
    &quot;error&quot;: null
}
</code></pre>
<h5 id="9-llm">9. æˆåŠŸå“åº” - æ‰¹é‡å¤„ç†ï¼ˆæ— LLMï¼‰</h5>
<pre><code class="language-json">{
    &quot;stock_info&quot;: {
        &quot;ts_code&quot;: &quot;600519.SH&quot;,
        &quot;name&quot;: &quot;è´µå·èŒ…å°&quot;,
        &quot;industry&quot;: &quot;ç™½é…’&quot;,
        &quot;market&quot;: &quot;A&quot;,
        &quot;latest_pe_ttm&quot;: 45.2,
        &quot;total_shares&quot;: 1256197800,
        &quot;base_report_date&quot;: &quot;2024-09-30&quot;
    },
    &quot;valuation_results&quot;: {
        &quot;latest_price&quot;: 1725.0,
        &quot;current_pe&quot;: 45.2,
        &quot;dcf_forecast_details&quot;: {
            &quot;enterprise_value&quot;: 2150000000000,
            &quot;equity_value&quot;: 2100000000000,
            &quot;value_per_share&quot;: 1675.5,
            &quot;wacc_used&quot;: 0.085,
            &quot;terminal_value_method_used&quot;: &quot;exit_multiple&quot;,
            &quot;exit_multiple_used&quot;: 15.2,
            &quot;forecast_period_years&quot;: 5,
            &quot;dcf_implied_diluted_pe&quot;: 33.97
        },
        &quot;llm_analysis_summary&quot;: null,
        &quot;data_warnings&quot;: [&quot;æ‰¹é‡å¤„ç†æ¨¡å¼ï¼Œå·²å…³é—­LLMåˆ†æä»¥æé«˜æ€§èƒ½&quot;],
        &quot;detailed_forecast_table&quot;: [...],
        &quot;historical_financial_summary&quot;: [...]
    },
    &quot;error&quot;: null
}
</code></pre>
<p><strong>ä¸šåŠ¡é€»è¾‘æµç¨‹</strong>:
1. <strong>æ•°æ®è·å–é˜¶æ®µ</strong>: è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ã€ä»·æ ¼ã€è´¢åŠ¡æŠ¥è¡¨æ•°æ®
2. <strong>æ•°æ®å¤„ç†é˜¶æ®µ</strong>: æ¸…æ´—æ•°æ®ã€è®¡ç®—è´¢åŠ¡æŒ‡æ ‡ã€ç”Ÿæˆå†å²æ¯”ç‡
3. <strong>ä¼°å€¼è®¡ç®—é˜¶æ®µ</strong>: 
   - åˆå§‹åŒ–WACCè®¡ç®—å™¨
   - è¿è¡Œè´¢åŠ¡é¢„æµ‹
   - è®¡ç®—DCFä¼°å€¼
   - è®¡ç®—ç»ˆå€¼
4. <strong>æ•æ„Ÿæ€§åˆ†æé˜¶æ®µ</strong>: å¤šç»´åº¦å‚æ•°æ•æ„Ÿæ€§æµ‹è¯•
5. <strong>LLMåˆ†æé˜¶æ®µ</strong>: è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ç”ŸæˆæŠ•èµ„å»ºè®®
6. <strong>ç»“æœæ•´åˆé˜¶æ®µ</strong>: æ•´åˆæ‰€æœ‰è®¡ç®—ç»“æœå’Œè­¦å‘Šä¿¡æ¯</p>
<p><strong>çŠ¶æ€ç </strong>:
- <code>200</code>: æˆåŠŸ
- <code>400</code>: è¯·æ±‚å‚æ•°é”™è¯¯
- <code>404</code>: è‚¡ç¥¨æ•°æ®æœªæ‰¾åˆ°
- <code>500</code>: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</p>
<hr />
<h3 id="3_1">3. æ•°æ®æ›´æ–°æ¥å£</h3>
<h4 id="post-update_stock_basic">POST <code>/update_stock_basic</code></h4>
<p><strong>æ¥å£æè¿°</strong>: æ›´æ–°è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯æ•°æ®</p>
<p><strong>è¯·æ±‚å‚æ•°</strong>: æ— </p>
<p><strong>è¯·æ±‚ä½“ç¤ºä¾‹</strong>:</p>
<pre><code class="language-json">{}
</code></pre>
<p><strong>è¯¦ç»†å“åº”ä½“ç¤ºä¾‹</strong>:</p>
<h5 id="1-_1">1. æˆåŠŸå“åº” - æ­£å¸¸æ›´æ–°</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯æ›´æ–°æˆåŠŸï¼Œå…±5,234æ¡è®°å½•&quot;,
    &quot;count&quot;: 5234,
    &quot;details&quot;: {
        &quot;updated_count&quot;: 5234,
        &quot;new_count&quot;: 156,
        &quot;execution_time&quot;: 45.2,
        &quot;data_source&quot;: &quot;tushare&quot;,
        &quot;update_time&quot;: &quot;2024-12-31T10:30:00Z&quot;
    }
}
</code></pre>
<h5 id="2-_1">2. æˆåŠŸå“åº” - æ— æ–°æ•°æ®</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å·²æ˜¯æœ€æ–°ï¼Œæ— éœ€æ›´æ–°&quot;,
    &quot;count&quot;: 0,
    &quot;details&quot;: {
        &quot;updated_count&quot;: 0,
        &quot;new_count&quot;: 0,
        &quot;execution_time&quot;: 5.1,
        &quot;data_source&quot;: &quot;tushare&quot;,
        &quot;update_time&quot;: &quot;2024-12-31T10:30:00Z&quot;
    }
}
</code></pre>
<h5 id="3-">3. æˆåŠŸå“åº” - éƒ¨åˆ†æ›´æ–°</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;partial_success&quot;,
    &quot;message&quot;: &quot;è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯éƒ¨åˆ†æ›´æ–°æˆåŠŸï¼Œå…±æ›´æ–°3,200æ¡è®°å½•ï¼Œ1,500æ¡è®°å½•å¤±è´¥&quot;,
    &quot;count&quot;: 3200,
    &quot;details&quot;: {
        &quot;updated_count&quot;: 3200,
        &quot;failed_count&quot;: 1500,
        &quot;new_count&quot;: 89,
        &quot;execution_time&quot;: 38.7,
        &quot;data_source&quot;: &quot;tushare&quot;,
        &quot;update_time&quot;: &quot;2024-12-31T10:30:00Z&quot;,
        &quot;errors&quot;: [
            &quot;APIè°ƒç”¨é¢‘ç‡é™åˆ¶&quot;,
            &quot;éƒ¨åˆ†è‚¡ç¥¨ä»£ç æ ¼å¼é”™è¯¯&quot;
        ]
    }
}
</code></pre>
<h5 id="4-api">4. é”™è¯¯å“åº” - APIè°ƒç”¨å¤±è´¥</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;error&quot;,
    &quot;message&quot;: &quot;æ›´æ–°å¤±è´¥ï¼šTuShare APIè°ƒç”¨å¤±è´¥&quot;,
    &quot;error&quot;: &quot;API connection timeout&quot;,
    &quot;details&quot;: {
        &quot;error_code&quot;: &quot;API_TIMEOUT&quot;,
        &quot;error_message&quot;: &quot;Connection to TuShare API timed out after 30 seconds&quot;,
        &quot;execution_time&quot;: 30.0,
        &quot;failed_count&quot;: 0
    }
}
</code></pre>
<h5 id="5-_1">5. é”™è¯¯å“åº” - æ•°æ®åº“é”™è¯¯</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;error&quot;,
    &quot;message&quot;: &quot;æ›´æ–°å¤±è´¥ï¼šæ•°æ®åº“è¿æ¥é”™è¯¯&quot;,
    &quot;error&quot;: &quot;Database connection failed&quot;,
    &quot;details&quot;: {
        &quot;error_code&quot;: &quot;DB_CONNECTION_ERROR&quot;,
        &quot;error_message&quot;: &quot;Unable to connect to PostgreSQL database&quot;,
        &quot;execution_time&quot;: 0.5,
        &quot;failed_count&quot;: 0
    }
}
</code></pre>
<p><strong>ä¸šåŠ¡é€»è¾‘</strong>:
1. è°ƒç”¨æ•°æ®å¤„ç†å™¨æ›´æ–°è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
2. å¼ºåˆ¶ä»æ•°æ®æºè·å–æœ€æ–°æ•°æ®
3. æ›´æ–°æ•°æ®åº“è®°å½•
4. è¿”å›æ›´æ–°ç»“æœç»Ÿè®¡</p>
<p><strong>çŠ¶æ€ç </strong>:
- <code>200</code>: æ›´æ–°æˆåŠŸ
- <code>500</code>: æ›´æ–°å¤±è´¥</p>
<hr />
<h4 id="post-update_daily_basic">POST <code>/update_daily_basic</code></h4>
<p><strong>æ¥å£æè¿°</strong>: æ›´æ–°æ¯æ—¥è¡Œæƒ…æŒ‡æ ‡æ•°æ®</p>
<p><strong>è¯·æ±‚å‚æ•°</strong>: æ— </p>
<p><strong>è¯·æ±‚ä½“ç¤ºä¾‹</strong>:</p>
<pre><code class="language-json">{}
</code></pre>
<p><strong>è¯¦ç»†å“åº”ä½“ç¤ºä¾‹</strong>:</p>
<h5 id="1-_2">1. æˆåŠŸå“åº” - æ­£å¸¸æ›´æ–°</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;æ¯æ—¥è¡Œæƒ…æŒ‡æ ‡æ›´æ–°æˆåŠŸï¼Œå…±4,856æ¡è®°å½•&quot;,
    &quot;count&quot;: 4856,
    &quot;details&quot;: {
        &quot;updated_count&quot;: 4856,
        &quot;new_count&quot;: 45,
        &quot;execution_time&quot;: 32.8,
        &quot;data_source&quot;: &quot;tushare&quot;,
        &quot;update_time&quot;: &quot;2024-12-31T10:35:00Z&quot;,
        &quot;trade_date&quot;: &quot;2024-12-30&quot;
    }
}
</code></pre>
<h5 id="2-_2">2. æˆåŠŸå“åº” - å¸‚åœºä¼‘å¸‚</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;å½“å‰æ—¥æœŸä¸ºå‘¨æœ«æˆ–èŠ‚å‡æ—¥ï¼Œæ— éœ€æ›´æ–°è¡Œæƒ…æ•°æ®&quot;,
    &quot;count&quot;: 0,
    &quot;details&quot;: {
        &quot;updated_count&quot;: 0,
        &quot;new_count&quot;: 0,
        &quot;execution_time&quot;: 2.1,
        &quot;data_source&quot;: &quot;tushare&quot;,
        &quot;update_time&quot;: &quot;2024-12-31T10:35:00Z&quot;,
        &quot;trade_date&quot;: &quot;2024-12-29&quot;,
        &quot;note&quot;: &quot;å‘¨æœ«ä¼‘å¸‚&quot;
    }
}
</code></pre>
<h5 id="3-_1">3. æˆåŠŸå“åº” - éƒ¨åˆ†æ›´æ–°</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;partial_success&quot;,
    &quot;message&quot;: &quot;æ¯æ—¥è¡Œæƒ…æŒ‡æ ‡éƒ¨åˆ†æ›´æ–°æˆåŠŸï¼Œå…±æ›´æ–°4,000æ¡è®°å½•ï¼Œ500æ¡è®°å½•å¤±è´¥&quot;,
    &quot;count&quot;: 4000,
    &quot;details&quot;: {
        &quot;updated_count&quot;: 4000,
        &quot;failed_count&quot;: 500,
        &quot;new_count&quot;: 23,
        &quot;execution_time&quot;: 28.5,
        &quot;data_source&quot;: &quot;tushare&quot;,
        &quot;update_time&quot;: &quot;2024-12-31T10:35:00Z&quot;,
        &quot;trade_date&quot;: &quot;2024-12-30&quot;,
        &quot;errors&quot;: [
            &quot;éƒ¨åˆ†è‚¡ç¥¨åœç‰Œ&quot;,
            &quot;APIè°ƒç”¨é¢‘ç‡é™åˆ¶&quot;
        ]
    }
}
</code></pre>
<h5 id="4-_1">4. é”™è¯¯å“åº” - ç½‘ç»œé”™è¯¯</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;error&quot;,
    &quot;message&quot;: &quot;æ›´æ–°å¤±è´¥ï¼šç½‘ç»œè¿æ¥é”™è¯¯&quot;,
    &quot;error&quot;: &quot;Network connection failed&quot;,
    &quot;details&quot;: {
        &quot;error_code&quot;: &quot;NETWORK_ERROR&quot;,
        &quot;error_message&quot;: &quot;Unable to connect to TuShare API server&quot;,
        &quot;execution_time&quot;: 10.0,
        &quot;failed_count&quot;: 0
    }
}
</code></pre>
<h5 id="5-_2">5. é”™è¯¯å“åº” - æ•°æ®æ ¼å¼é”™è¯¯</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;error&quot;,
    &quot;message&quot;: &quot;æ›´æ–°å¤±è´¥ï¼šæ•°æ®æ ¼å¼é”™è¯¯&quot;,
    &quot;error&quot;: &quot;Data format error&quot;,
    &quot;details&quot;: {
        &quot;error_code&quot;: &quot;DATA_FORMAT_ERROR&quot;,
        &quot;error_message&quot;: &quot;Received data format does not match expected schema&quot;,
        &quot;execution_time&quot;: 15.2,
        &quot;failed_count&quot;: 0,
        &quot;sample_error&quot;: &quot;Field 'pe_ttm' is missing in some records&quot;
    }
}
</code></pre>
<p><strong>ä¸šåŠ¡é€»è¾‘</strong>:
1. è°ƒç”¨æ•°æ®å¤„ç†å™¨æ›´æ–°æ¯æ—¥è¡Œæƒ…æ•°æ®
2. è·å–æœ€æ–°PEã€PBã€å¸‚å€¼ç­‰æŒ‡æ ‡
3. æ›´æ–°æ•°æ®åº“è®°å½•
4. è¿”å›æ›´æ–°ç»“æœç»Ÿè®¡</p>
<p><strong>çŠ¶æ€ç </strong>:
- <code>200</code>: æ›´æ–°æˆåŠŸ
- <code>500</code>: æ›´æ–°å¤±è´¥</p>
<hr />
<h3 id="4_1">4. è‚¡ç¥¨ç­›é€‰æ¥å£</h3>
<h4 id="post-screen_stocks">POST <code>/screen_stocks</code></h4>
<p><strong>æ¥å£æè¿°</strong>: æ ¹æ®PEã€PBã€å¸‚å€¼ç­‰æ¡ä»¶ç­›é€‰è‚¡ç¥¨</p>
<p><strong>è¯·æ±‚å‚æ•°è¯¦è§£</strong>:
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ | çº¦æŸæ¡ä»¶ | ç¤ºä¾‹ |
|--------|------|------|--------|------|----------|------|
| <code>pe_min</code> | float | å¦ | æ—  | æœ€å°å¸‚ç›ˆç‡ | &gt;=0 | 10, 15 |
| <code>pe_max</code> | float | å¦ | æ—  | æœ€å¤§å¸‚ç›ˆç‡ | &gt;=pe_min | 30, 50 |
| <code>pb_min</code> | float | å¦ | æ—  | æœ€å°å¸‚å‡€ç‡ | &gt;=0 | 1, 2 |
| <code>pb_max</code> | float | å¦ | æ—  | æœ€å¤§å¸‚å‡€ç‡ | &gt;=pb_min | 5, 8 |
| <code>market_cap_min</code> | float | å¦ | æ—  | æœ€å°å¸‚å€¼(äº¿å…ƒ) | &gt;=0 | 100, 200 |
| <code>market_cap_max</code> | float | å¦ | æ—  | æœ€å¤§å¸‚å€¼(äº¿å…ƒ) | &gt;=market_cap_min | 1000, 2000 |</p>
<p><strong>è¯¦ç»†è¯·æ±‚ä½“ç¤ºä¾‹</strong>:</p>
<h5 id="1_2">1. åŸºç¡€ç­›é€‰è¯·æ±‚</h5>
<pre><code class="language-json">{
    &quot;pe_min&quot;: 10,
    &quot;pe_max&quot;: 30,
    &quot;market_cap_min&quot;: 100
}
</code></pre>
<h5 id="2_2">2. å®Œæ•´ç­›é€‰æ¡ä»¶</h5>
<pre><code class="language-json">{
    &quot;pe_min&quot;: 5,
    &quot;pe_max&quot;: 25,
    &quot;pb_min&quot;: 0.5,
    &quot;pb_max&quot;: 3,
    &quot;market_cap_min&quot;: 50,
    &quot;market_cap_max&quot;: 500
}
</code></pre>
<h5 id="3_2">3. å•ä¸€æ¡ä»¶ç­›é€‰</h5>
<pre><code class="language-json">{
    &quot;pe_max&quot;: 20
}
</code></pre>
<h5 id="4_2">4. å¤§ç›˜è‚¡ç­›é€‰</h5>
<pre><code class="language-json">{
    &quot;market_cap_min&quot;: 1000,
    &quot;pe_max&quot;: 25,
    &quot;pb_max&quot;: 5
}
</code></pre>
<h5 id="5_1">5. å°ç›˜ä»·å€¼è‚¡ç­›é€‰</h5>
<pre><code class="language-json">{
    &quot;market_cap_max&quot;: 200,
    &quot;pe_max&quot;: 15,
    &quot;pb_max&quot;: 2
}
</code></pre>
<h5 id="6_1">6. è¾¹ç•Œå€¼æµ‹è¯•è¯·æ±‚</h5>
<pre><code class="language-json">{
    &quot;pe_min&quot;: 0,
    &quot;pe_max&quot;: 9999,
    &quot;pb_min&quot;: 0,
    &quot;pb_max&quot;: 9999,
    &quot;market_cap_min&quot;: 0,
    &quot;market_cap_max&quot;: 999999
}
</code></pre>
<h5 id="7">7. é”™è¯¯è¯·æ±‚ç¤ºä¾‹</h5>
<pre><code class="language-json">{
    &quot;pe_min&quot;: 30,  // é”™è¯¯ï¼špe_min &gt; pe_max
    &quot;pe_max&quot;: 10,
    &quot;pb_min&quot;: -5,  // é”™è¯¯ï¼šè´Ÿå€¼
    &quot;market_cap_min&quot;: 5000,  // é”™è¯¯ï¼šmarket_cap_min &gt; market_cap_max
    &quot;market_cap_max&quot;: 1000
}
</code></pre>
<p><strong>è¯¦ç»†å“åº”ä½“ç¤ºä¾‹</strong>:</p>
<h5 id="1-_3">1. æˆåŠŸå“åº” - åŸºç¡€ç­›é€‰</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;ç­›é€‰å®Œæˆï¼Œå…±æ‰¾åˆ°150åªç¬¦åˆæ¡ä»¶çš„è‚¡ç¥¨&quot;,
    &quot;count&quot;: 150,
    &quot;data&quot;: [
        {
            &quot;ts_code&quot;: &quot;600519.SH&quot;,
            &quot;name&quot;: &quot;è´µå·èŒ…å°&quot;,
            &quot;industry&quot;: &quot;ç™½é…’&quot;,
            &quot;area&quot;: &quot;è´µå·&quot;,
            &quot;market&quot;: &quot;ä¸»æ¿&quot;,
            &quot;list_date&quot;: &quot;2001-08-27&quot;,
            &quot;close&quot;: 1725.0,
            &quot;pe&quot;: 45.2,
            &quot;pb&quot;: 12.8,
            &quot;total_mv&quot;: 21500.0,
            &quot;float_mv&quot;: 21500.0,
            &quot;turnover_rate&quot;: 0.85,
            &quot;volume_ratio&quot;: 1.2,
            &quot;price_change&quot;: 2.5
        },
        {
            &quot;ts_code&quot;: &quot;000858.SZ&quot;,
            &quot;name&quot;: &quot;äº”ç²®æ¶²&quot;,
            &quot;industry&quot;: &quot;ç™½é…’&quot;,
            &quot;area&quot;: &quot;å››å·&quot;,
            &quot;market&quot;: &quot;ä¸»æ¿&quot;,
            &quot;list_date&quot;: &quot;1998-04-27&quot;,
            &quot;close&quot;: 125.8,
            &quot;pe&quot;: 28.5,
            &quot;pb&quot;: 8.2,
            &quot;total_mv&quot;: 5150.0,
            &quot;float_mv&quot;: 5150.0,
            &quot;turnover_rate&quot;: 1.2,
            &quot;volume_ratio&quot;: 1.5,
            &quot;price_change&quot;: 1.8
        }
    ]
}
</code></pre>
<h5 id="2-_3">2. æˆåŠŸå“åº” - æ— ç»“æœ</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;ç­›é€‰å®Œæˆï¼Œæœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è‚¡ç¥¨&quot;,
    &quot;count&quot;: 0,
    &quot;data&quot;: []
}
</code></pre>
<h5 id="3-_2">3. æˆåŠŸå“åº” - å•ä¸€ç»“æœ</h5>
<pre><code class="language-json">{
    &quot;status&quot;: &quot;success&quot;,
    &quot;message&quot;: &quot;ç­›é€‰å®Œæˆï¼Œå…±æ‰¾åˆ°1åªç¬¦åˆæ¡ä»¶çš„è‚¡ç¥¨&quot;,
    &quot;count&quot;: 1,
    &quot;data&quot;: [
        {
            &quot;ts_code&quot;: &quot;600519.SH&quot;,
            &quot;name&quot;: &quot;è´µå·èŒ…å°&quot;,
            &quot;industry&quot;: &quot;ç™½é…’&quot;,
            &quot;area&quot;: &quot;è´µå·&quot;,
            &quot;market&quot;: &quot;ä¸»æ¿&quot;,
            &quot;list_date&quot;: &quot;2001-08-27&quot;,
            &quot;close&quot;: 1725.0,
            &quot;pe&quot;: 45.2,
            &quot;pb&quot;: 12.8,
            &quot;total_mv&quot;: 21500.0,
            &quot;float_mv&quot;: 21500.0,
            &quot;turnover_rate&quot;: 0.85,
            &quot;volume_ratio&quot;: 1.2,
            &quot;price_change&quot;: 2.5
        }
    ]
}
</code></pre>
<h5 id="4-_2">4. é”™è¯¯å“åº” - å‚æ•°éªŒè¯å¤±è´¥</h5>
<pre><code class="language-json">{
    &quot;detail&quot;: [
        {
            &quot;loc&quot;: [&quot;body&quot;, &quot;pe_min&quot;],
            &quot;msg&quot;: &quot;ensure this value is greater than or equal to 0&quot;,
            &quot;type&quot;: &quot;value_error.number.not_ge&quot;,
            &quot;ctx&quot;: {
                &quot;limit_value&quot;: 0
            }
        },
        {
            &quot;loc&quot;: [&quot;body&quot;, &quot;market_cap_min&quot;],
            &quot;msg&quot;: &quot;ensure this value is less than or equal to market_cap_max&quot;,
            &quot;type&quot;: &quot;value_error.number.not_le&quot;,
            &quot;ctx&quot;: {
                &quot;limit_value&quot;: 1000
            }
        }
    ]
}
</code></pre>
<h5 id="5-_3">5. é”™è¯¯å“åº” - æ•°æ®æœªæ‰¾åˆ°</h5>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;æ— æ³•è·å–è‚¡ç¥¨æ•°æ®ï¼Œè¯·å…ˆæ›´æ–°è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯&quot;
}
</code></pre>
<p><strong>ä¸šåŠ¡é€»è¾‘</strong>:
1. è·å–åˆå¹¶åçš„è‚¡ç¥¨æ•°æ®
2. åº”ç”¨ç­›é€‰æ¡ä»¶ï¼ˆPEã€PBã€å¸‚å€¼èŒƒå›´ï¼‰
3. ç§»é™¤æ— æ•ˆæ•°æ®
4. æŒ‰å¸‚å€¼é™åºæ’åˆ—
5. è¿”å›ç­›é€‰ç»“æœ</p>
<p><strong>çŠ¶æ€ç </strong>:
- <code>200</code>: ç­›é€‰æˆåŠŸ
- <code>404</code>: æ•°æ®æœªæ‰¾åˆ°
- <code>500</code>: ç­›é€‰å¤±è´¥</p>
<hr />
<h2 id="_10">ğŸ“‹ å‚æ•°çº¦æŸæ¡ä»¶æ€»ç»“è¡¨</h2>
<h3 id="_11">è‚¡ç¥¨ä¼°å€¼æ¥å£å‚æ•°çº¦æŸ</h3>
<h4 id="_12">åŸºç¡€å‚æ•°çº¦æŸ</h4>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>è¯´æ˜</th>
<th>æœ‰æ•ˆç¤ºä¾‹</th>
<th>æ— æ•ˆç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ts_code</code></td>
<td>string</td>
<td>ç¬¦åˆAè‚¡æ ¼å¼</td>
<td>6ä½æ•°å­—+.SH/.SZ</td>
<td>"600519.SH"</td>
<td>"600519", "999999.SH"</td>
</tr>
<tr>
<td><code>market</code></td>
<td>string</td>
<td>æšä¸¾å€¼</td>
<td>"A", "HK"</td>
<td>"A"</td>
<td>"US", "NASDAQ"</td>
</tr>
<tr>
<td><code>valuation_date</code></td>
<td>string</td>
<td>YYYY-MM-DDæ ¼å¼</td>
<td>æœ‰æ•ˆçš„æ—¥æœŸæ ¼å¼</td>
<td>"2024-12-31"</td>
<td>"2024/12/31", "invalid"</td>
</tr>
</tbody>
</table>
<h4 id="_13">æ•°å€¼èŒƒå›´çº¦æŸå‚æ•°</h4>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>æœ€å°å€¼</th>
<th>æœ€å¤§å€¼</th>
<th>è¯´æ˜</th>
<th>æœ‰æ•ˆç¤ºä¾‹</th>
<th>æ— æ•ˆç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>forecast_years</code></td>
<td>int</td>
<td>1</td>
<td>20</td>
<td>é¢„æµ‹æœŸå¹´æ•°</td>
<td>5, 10, 20</td>
<td>0, 25, -1</td>
</tr>
<tr>
<td><code>cagr_decay_rate</code></td>
<td>float</td>
<td>0</td>
<td>1</td>
<td>CAGRè¡°å‡ç‡</td>
<td>0.1, 0.5, 0.99</td>
<td>-0.1, 1.5</td>
</tr>
<tr>
<td><code>target_operating_margin</code></td>
<td>float</td>
<td>0</td>
<td>1</td>
<td>ç›®æ ‡è¥ä¸šåˆ©æ¶¦ç‡</td>
<td>0.25, 0.5</td>
<td>-0.1, 1.5</td>
</tr>
<tr>
<td><code>op_margin_transition_years</code></td>
<td>int</td>
<td>1</td>
<td>æ— é™åˆ¶</td>
<td>è¿‡æ¸¡å¹´æ•°</td>
<td>3, 5, 10</td>
<td>0, -1</td>
</tr>
<tr>
<td><code>target_debt_ratio</code></td>
<td>float</td>
<td>0</td>
<td>1</td>
<td>ç›®æ ‡å€ºåŠ¡æ¯”ä¾‹</td>
<td>0.3, 0.5</td>
<td>-0.1, 1.5</td>
</tr>
<tr>
<td><code>llm_temperature</code></td>
<td>float</td>
<td>0.0</td>
<td>2.0</td>
<td>LLMæ¸©åº¦å‚æ•°</td>
<td>0.0, 1.0, 2.0</td>
<td>-0.1, 2.1</td>
</tr>
<tr>
<td><code>llm_top_p</code></td>
<td>float</td>
<td>0.0</td>
<td>1.0</td>
<td>LLM Top-På‚æ•°</td>
<td>0.0, 0.5, 1.0</td>
<td>-0.1, 1.1</td>
</tr>
</tbody>
</table>
<h4 id="_14">éè´Ÿçº¦æŸå‚æ•°</h4>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>è¯´æ˜</th>
<th>æœ‰æ•ˆç¤ºä¾‹</th>
<th>æ— æ•ˆç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cost_of_debt</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>ç¨å‰å€ºåŠ¡æˆæœ¬</td>
<td>0.05, 0.08</td>
<td>-0.01</td>
</tr>
<tr>
<td><code>risk_free_rate</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æ— é£é™©åˆ©ç‡</td>
<td>0.03, 0.035</td>
<td>-0.01</td>
</tr>
<tr>
<td><code>market_risk_premium</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>å¸‚åœºé£é™©æº¢ä»·</td>
<td>0.05, 0.06</td>
<td>-0.01</td>
</tr>
<tr>
<td><code>exit_multiple</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>é€€å‡ºä¹˜æ•°</td>
<td>15.0, 18.0</td>
<td>-1.0</td>
</tr>
<tr>
<td><code>perpetual_growth_rate</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æ°¸ç»­å¢é•¿ç‡</td>
<td>0.03, 0.035</td>
<td>-0.01</td>
</tr>
<tr>
<td><code>llm_max_tokens</code></td>
<td>int</td>
<td>&gt;=1</td>
<td>æœ€å¤§Tokenæ•°</td>
<td>1000, 4000</td>
<td>0, -100</td>
</tr>
</tbody>
</table>
<h4 id="_15">æšä¸¾å€¼çº¦æŸå‚æ•°</h4>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>å¯é€‰å€¼</th>
<th>è¯´æ˜</th>
<th>æœ‰æ•ˆç¤ºä¾‹</th>
<th>æ— æ•ˆç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>op_margin_forecast_mode</code></td>
<td>string</td>
<td>"historical_median", "transition_to_target"</td>
<td>åˆ©æ¶¦ç‡é¢„æµ‹æ¨¡å¼</td>
<td>"historical_median"</td>
<td>"invalid_mode"</td>
</tr>
<tr>
<td><code>wacc_weight_mode</code></td>
<td>string</td>
<td>"target", "market"</td>
<td>WACCæƒé‡æ¨¡å¼</td>
<td>"target"</td>
<td>"invalid_mode"</td>
</tr>
<tr>
<td><code>terminal_value_method</code></td>
<td>string</td>
<td>"exit_multiple", "perpetual_growth"</td>
<td>ç»ˆå€¼è®¡ç®—æ–¹æ³•</td>
<td>"exit_multiple"</td>
<td>"invalid_method"</td>
</tr>
</tbody>
</table>
<h4 id="_16">æ¡ä»¶çº¦æŸå‚æ•°</h4>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>ä¾èµ–æ¡ä»¶</th>
<th>çº¦æŸè¯´æ˜</th>
<th>æœ‰æ•ˆç¤ºä¾‹</th>
<th>æ— æ•ˆç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target_operating_margin</code></td>
<td>float</td>
<td>op_margin_forecast_mode="transition_to_target"</td>
<td>å¿…é¡»æä¾›ç›®æ ‡åˆ©æ¶¦ç‡</td>
<td>0.30</td>
<td>null</td>
</tr>
<tr>
<td><code>op_margin_transition_years</code></td>
<td>int</td>
<td>op_margin_forecast_mode="transition_to_target"</td>
<td>å¿…é¡»æä¾›è¿‡æ¸¡å¹´æ•°</td>
<td>5</td>
<td>null</td>
</tr>
<tr>
<td><code>exit_multiple</code></td>
<td>float</td>
<td>terminal_value_method="exit_multiple"</td>
<td>å¿…é¡»æä¾›é€€å‡ºä¹˜æ•°</td>
<td>15.0</td>
<td>null</td>
</tr>
<tr>
<td><code>perpetual_growth_rate</code></td>
<td>float</td>
<td>terminal_value_method="perpetual_growth"</td>
<td>å¿…é¡»æä¾›æ°¸ç»­å¢é•¿ç‡</td>
<td>0.03</td>
<td>null</td>
</tr>
<tr>
<td><code>target_debt_ratio</code></td>
<td>float</td>
<td>wacc_weight_mode="target"</td>
<td>å»ºè®®æä¾›ç›®æ ‡å€ºåŠ¡æ¯”ä¾‹</td>
<td>0.35</td>
<td>null</td>
</tr>
</tbody>
</table>
<h3 id="_17">è‚¡ç¥¨ç­›é€‰æ¥å£å‚æ•°çº¦æŸ</h3>
<h4 id="_18">ç›¸å¯¹çº¦æŸå‚æ•°</h4>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>è¯´æ˜</th>
<th>æœ‰æ•ˆç¤ºä¾‹</th>
<th>æ— æ•ˆç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pe_max</code></td>
<td>float</td>
<td>&gt;=pe_min</td>
<td>æœ€å¤§å¸‚ç›ˆç‡</td>
<td>30 (å½“pe_min=10)</td>
<td>10 (å½“pe_min=30)</td>
</tr>
<tr>
<td><code>pb_max</code></td>
<td>float</td>
<td>&gt;=pb_min</td>
<td>æœ€å¤§å¸‚å‡€ç‡</td>
<td>5 (å½“pb_min=1)</td>
<td>1 (å½“pb_min=5)</td>
</tr>
<tr>
<td><code>market_cap_max</code></td>
<td>float</td>
<td>&gt;=market_cap_min</td>
<td>æœ€å¤§å¸‚å€¼</td>
<td>1000 (å½“market_cap_min=100)</td>
<td>100 (å½“market_cap_min=1000)</td>
</tr>
</tbody>
</table>
<h4 id="_19">éè´Ÿçº¦æŸå‚æ•°</h4>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ç±»å‹</th>
<th>çº¦æŸæ¡ä»¶</th>
<th>è¯´æ˜</th>
<th>æœ‰æ•ˆç¤ºä¾‹</th>
<th>æ— æ•ˆç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pe_min</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æœ€å°å¸‚ç›ˆç‡</td>
<td>10, 0</td>
<td>-5</td>
</tr>
<tr>
<td><code>pe_max</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æœ€å¤§å¸‚ç›ˆç‡</td>
<td>30, 9999</td>
<td>-10</td>
</tr>
<tr>
<td><code>pb_min</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æœ€å°å¸‚å‡€ç‡</td>
<td>1, 0</td>
<td>-2</td>
</tr>
<tr>
<td><code>pb_max</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æœ€å¤§å¸‚å‡€ç‡</td>
<td>5, 9999</td>
<td>-3</td>
</tr>
<tr>
<td><code>market_cap_min</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æœ€å°å¸‚å€¼</td>
<td>100, 0</td>
<td>-50</td>
</tr>
<tr>
<td><code>market_cap_max</code></td>
<td>float</td>
<td>&gt;=0</td>
<td>æœ€å¤§å¸‚å€¼</td>
<td>1000, 999999</td>
<td>-100</td>
</tr>
</tbody>
</table>
<h3 id="_20">å‚æ•°éªŒè¯é”™è¯¯ç å¯¹ç…§è¡¨</h3>
<table>
<thead>
<tr>
<th>é”™è¯¯ç±»å‹</th>
<th>HTTPçŠ¶æ€ç </th>
<th>é”™è¯¯ç ç¤ºä¾‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å‚æ•°ç¼ºå¤±</td>
<td>400</td>
<td><code>field required</code></td>
<td>å¿…å¡«å‚æ•°æœªæä¾›</td>
</tr>
<tr>
<td>æ•°å€¼è¶…å‡ºèŒƒå›´</td>
<td>400</td>
<td><code>ensure this value is less than or equal to 20</code></td>
<td>æ•°å€¼å¤§äºæœ€å¤§å…è®¸å€¼</td>
</tr>
<tr>
<td>æ•°å€¼å°äºæœ€å°å€¼</td>
<td>400</td>
<td><code>ensure this value is greater than or equal to 0</code></td>
<td>æ•°å€¼å°äºæœ€å°å…è®¸å€¼</td>
</tr>
<tr>
<td>æšä¸¾å€¼æ— æ•ˆ</td>
<td>400</td>
<td><code>value is not a valid enumeration member</code></td>
<td>æä¾›çš„å€¼ä¸åœ¨æšä¸¾èŒƒå›´å†…</td>
</tr>
<tr>
<td>æ ¼å¼é”™è¯¯</td>
<td>400</td>
<td><code>invalid date format</code></td>
<td>æ—¥æœŸæ ¼å¼ä¸æ­£ç¡®</td>
</tr>
<tr>
<td>ç›¸å¯¹çº¦æŸè¿å</td>
<td>400</td>
<td><code>ensure this value is less than or equal to maximum</code></td>
<td>æœ€å¤§å€¼å°äºæœ€å°å€¼</td>
</tr>
<tr>
<td>æ¡ä»¶çº¦æŸè¿å</td>
<td>422</td>
<td><code>target_operating_margin is required when transition mode</code></td>
<td>æ¡ä»¶æ»¡è¶³æ—¶æœªæä¾›å¿…éœ€å‚æ•°</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_21">ğŸ“Š æ•°æ®æ¨¡å‹</h2>
<h3 id="_22">è¯·æ±‚æ¨¡å‹è¯¦è§£</h3>
<h4 id="stockvaluationrequest">StockValuationRequest</h4>
<pre><code class="language-python">class StockValuationRequest(BaseModel):
    # åŸºç¡€å‚æ•°
    ts_code: str                                    # è‚¡ç¥¨ä»£ç 
    market: Optional[str] = &quot;A&quot;                     # å¸‚åœºæ ‡è¯†
    valuation_date: Optional[str] = None           # ä¼°å€¼æ—¥æœŸ
    ltm_baseline_enabled: Optional[bool] = False    # æ˜¯å¦ä½¿ç”¨LTM/InterimåŸºæœŸ

    # DCFå‡è®¾å‚æ•°
    forecast_years: int = 5                        # é¢„æµ‹å¹´æ•°
    cagr_decay_rate: Optional[float] = None        # CAGRè¡°å‡ç‡
    op_margin_forecast_mode: str = &quot;historical_median&quot;  # åˆ©æ¶¦ç‡é¢„æµ‹æ¨¡å¼

    # WACCå‚æ•°
    wacc_weight_mode: str = &quot;target&quot;               # WACCæƒé‡æ¨¡å¼
    target_debt_ratio: Optional[float] = None      # ç›®æ ‡å€ºåŠ¡æ¯”ä¾‹
    risk_free_rate: Optional[float] = None         # æ— é£é™©åˆ©ç‡
    beta: Optional[float] = None                   # è´å¡”ç³»æ•°

    # ç»ˆå€¼å‚æ•°
    terminal_value_method: str = &quot;exit_multiple&quot;   # ç»ˆå€¼è®¡ç®—æ–¹æ³•
    exit_multiple: Optional[float] = None         # é€€å‡ºä¹˜æ•°
    perpetual_growth_rate: Optional[float] = None  # æ°¸ç»­å¢é•¿ç‡

    # LLMå‚æ•°
    request_llm_summary: bool = False              # LLMåˆ†æå¼€å…³
    llm_provider: Optional[str] = None            # LLMæä¾›å•†
    llm_temperature: Optional[float] = None       # æ¸©åº¦å‚æ•°

    # æ•æ„Ÿæ€§åˆ†æ
    sensitivity_analysis: Optional[SensitivityAnalysisRequest] = None
</code></pre>
<h4 id="sensitivityanalysisrequest">SensitivityAnalysisRequest</h4>
<pre><code class="language-python">class SensitivityAnalysisRequest(BaseModel):
    row_axis: SensitivityAxisInput      # è¡Œè½´é…ç½®
    column_axis: SensitivityAxisInput   # åˆ—è½´é…ç½®

class SensitivityAxisInput(BaseModel):
    parameter_name: str                  # å‚æ•°å
    values: list[float]                 # æµ‹è¯•å€¼åˆ—è¡¨
    step: Optional[float] = None        # æ­¥é•¿
    points: Optional[int] = None        # ç‚¹æ•°
</code></pre>
<h3 id="_23">å“åº”æ¨¡å‹è¯¦è§£</h3>
<h4 id="stockvaluationresponse">StockValuationResponse</h4>
<pre><code class="language-python">class StockValuationResponse(BaseModel):
    stock_info: StockBasicInfoModel                    # è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
    valuation_results: ValuationResultsContainer       # ä¼°å€¼ç»“æœå®¹å™¨
    error: Optional[str] = None                      # é”™è¯¯ä¿¡æ¯
</code></pre>
<h4 id="valuationresultscontainer">ValuationResultsContainer</h4>
<pre><code class="language-python">class ValuationResultsContainer(BaseModel):
    latest_price: Optional[float]                      # æœ€æ–°ä»·æ ¼
    current_pe: Optional[float]                        # å½“å‰PE
    current_pb: Optional[float]                        # å½“å‰PB
    dcf_forecast_details: Optional[DcfForecastDetails] # DCFè¯¦æƒ…
    detailed_forecast_table: Optional[list[dict]]      # é¢„æµ‹è¡¨æ ¼
    sensitivity_analysis_result: Optional[SensitivityAnalysisResult]  # æ•æ„Ÿæ€§åˆ†æ
    llm_analysis_summary: Optional[str]               # LLMåˆ†æ
    data_warnings: Optional[list[str]]                # æ•°æ®è­¦å‘Š
    historical_financial_summary: Optional[list[dict]] # å†å²è´¢åŠ¡æ‘˜è¦
    historical_ratios_summary: Optional[list[dict]]   # å†å²æ¯”ç‡æ‘˜è¦
    special_industry_warning: Optional[str]          # è¡Œä¸šè­¦å‘Š
</code></pre>
<h4 id="dcfforecastdetails">DcfForecastDetails</h4>
<pre><code class="language-python">class DcfForecastDetails(BaseModel):
    enterprise_value: Optional[float]          # ä¼ä¸šä»·å€¼
    equity_value: Optional[float]              # è‚¡æƒä»·å€¼
    value_per_share: Optional[float]           # æ¯è‚¡ä»·å€¼
    wacc_used: Optional[float]                 # ä½¿ç”¨çš„WACC
    terminal_value: Optional[float]             # ç»ˆå€¼
    dcf_implied_diluted_pe: Optional[float]    # DCFéšå«PE
    base_ev_ebitda: Optional[float]            # EV/EBITDA
    implied_perpetual_growth_rate: Optional[float]  # éšå«æ°¸ç»­å¢é•¿ç‡
    # ... å…¶ä»–å­—æ®µ
</code></pre>
<hr />
<h2 id="_24">âš ï¸ é”™è¯¯å¤„ç†</h2>
<h3 id="_25">é”™è¯¯ç±»å‹åˆ†ç±»</h3>
<h4 id="1-400">1. å‚æ•°éªŒè¯é”™è¯¯ (400)</h4>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>: è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯æˆ–ç¼ºå¤±å¿…éœ€å‚æ•°</li>
<li><strong>é”™è¯¯ç¤ºä¾‹</strong>:</li>
</ul>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;field required (type=value_error.missing)&quot;
}
</code></pre>
<h4 id="2-404">2. æ•°æ®æœªæ‰¾åˆ°é”™è¯¯ (404)</h4>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>: è‚¡ç¥¨ä»£ç ä¸å­˜åœ¨æˆ–æ•°æ®ä¸å¯ç”¨</li>
<li><strong>é”™è¯¯ç¤ºä¾‹</strong>:</li>
</ul>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;æ— æ³•è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯: 999999.SH&quot;
}
</code></pre>
<h4 id="3-422">3. ä¸šåŠ¡é€»è¾‘é”™è¯¯ (422)</h4>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>: å‚æ•°å€¼ä¸ç¬¦åˆä¸šåŠ¡è§„åˆ™</li>
<li><strong>é”™è¯¯ç¤ºä¾‹</strong>:</li>
</ul>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;é¢„æµ‹æœŸå¹´æ•°å¿…é¡»åœ¨1-20ä¹‹é—´&quot;
}
</code></pre>
<h4 id="4-500">4. æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ (500)</h4>
<ul>
<li><strong>è§¦å‘æ¡ä»¶</strong>: è®¡ç®—è¿‡ç¨‹å¼‚å¸¸ã€å¤–éƒ¨æœåŠ¡è°ƒç”¨å¤±è´¥</li>
<li><strong>é”™è¯¯ç¤ºä¾‹</strong>:</li>
</ul>
<pre><code class="language-json">{
    &quot;detail&quot;: &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: è®¡ç®—WACCå¤±è´¥&quot;
}
</code></pre>
<p>æ³¨æ„ï¼š
- <code>target_debt_ratio</code> æŒ‡ WACC æƒé‡ç”¨çš„å€ºåŠ¡æ¯”ä¾‹ D/(D+E)ï¼ˆå¸‚å€¼å£å¾„ï¼‰ï¼Œè¯·å‹¿ä¸â€œèµ„äº§è´Ÿå€ºç‡â€ï¼ˆè´¦é¢å£å¾„ï¼‰æ··æ·†ã€‚
- å½“å¯ç”¨ <code>ltm_baseline_enabled</code> ä¸”ç¼ºå°‘å¿…è¦çš„ä¸Šå¹´åŒå£å¾„æˆ–ä¸Šå¹´å¹´æŠ¥å¯¼è‡´ LTM è®¡ç®—å¤±è´¥æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨å›é€€ä¸ºâ€œå¹´æŠ¥åŸºæœŸâ€ï¼Œå¹¶åœ¨ <code>debug_request_slice.baseline_debug</code> ç»™å‡ºæç¤ºã€‚</p>
<h3 id="_26">é”™è¯¯å¤„ç†æœºåˆ¶</h3>
<h4 id="1_3">1. è¾“å…¥éªŒè¯</h4>
<pre><code class="language-python"># Pydanticæ¨¡å‹è‡ªåŠ¨éªŒè¯
class StockValuationRequest(BaseModel):
    forecast_years: int = Field(default=5, ge=1, le=20)
    # è‡ªåŠ¨éªŒè¯èŒƒå›´çº¦æŸ
</code></pre>
<h4 id="2_3">2. ä¸šåŠ¡é€»è¾‘éªŒè¯</h4>
<pre><code class="language-python"># ä¸šåŠ¡è§„åˆ™æ£€æŸ¥
if latest_price is None or latest_price &lt;= 0:
    raise HTTPException(
        status_code=404, 
        detail=f&quot;æ— æ³•è·å–æœ‰æ•ˆçš„æœ€æ–°ä»·æ ¼: {request.ts_code}&quot;
    )
</code></pre>
<h4 id="3_3">3. å¼‚å¸¸æ•è·å’Œè½¬æ¢</h4>
<pre><code class="language-python">try:
    # ä¸šåŠ¡é€»è¾‘
    result = valuation_service.run_single_valuation(...)
except Exception as e:
    logger.error(f&quot;Unexpected error: {e}&quot;)
    raise HTTPException(status_code=500, detail=f&quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: {str(e)}&quot;)
</code></pre>
<h4 id="4_3">4. è­¦å‘Šä¿¡æ¯å¤„ç†</h4>
<pre><code class="language-python"># éè‡´å‘½è­¦å‘Šæ”¶é›†
all_warnings = base_data_warnings + base_run_warnings
data_warnings = list(set(all_warnings)) if all_warnings else None
</code></pre>
<h3 id="_27">æ•°æ®éªŒè¯è§„åˆ™</h3>
<h4 id="_28">æ•°å€¼èŒƒå›´éªŒè¯</h4>
<ul>
<li><code>forecast_years</code>: 1-20å¹´</li>
<li><code>target_operating_margin</code>: 0-1ä¹‹é—´</li>
<li><code>llm_temperature</code>: 0.0-2.0ä¹‹é—´</li>
<li><code>llm_top_p</code>: 0.0-1.0ä¹‹é—´</li>
</ul>
<h4 id="_29">æ ¼å¼éªŒè¯</h4>
<ul>
<li><code>ts_code</code>: ç¬¦åˆè‚¡ç¥¨ä»£ç æ ¼å¼ (å¦‚ 600519.SH)</li>
<li><code>valuation_date</code>: YYYY-MM-DDæ ¼å¼</li>
<li><code>wacc_weight_mode</code>: æšä¸¾å€¼ (target/market)</li>
</ul>
<h4 id="_30">ä¸šåŠ¡è§„åˆ™éªŒè¯</h4>
<ul>
<li>å†å²æ•°æ®å®Œæ•´æ€§æ£€æŸ¥</li>
<li>è´¢åŠ¡æ•°æ®æœ‰æ•ˆæ€§éªŒè¯</li>
<li>è®¡ç®—ç»“æœåˆç†æ€§éªŒè¯</li>
</ul>
<hr />
<h2 id="_31">ğŸš€ éƒ¨ç½²å’Œæµ‹è¯•</h2>
<h3 id="_32">ç¯å¢ƒè¦æ±‚</h3>
<ul>
<li>Python 3.8+</li>
<li>FastAPI 0.100+</li>
<li>uvicorn 0.20+</li>
<li>pandas 2.0+</li>
<li>pydantic 2.0+</li>
</ul>
<h3 id="_33">æœ¬åœ°éƒ¨ç½²</h3>
<pre><code class="language-bash"># å®‰è£…ä¾èµ–
pip install -e .

# å¯åŠ¨æœåŠ¡
uvicorn src.api.main:app --reload --host 0.0.0.0 --port 8124

# æˆ–ä½¿ç”¨é¡¹ç›®è„šæœ¬
python -m uvicorn src.api.main:app --reload --host 0.0.0.0 --port 8124
</code></pre>
<h3 id="_34">ç”Ÿäº§éƒ¨ç½²</h3>
<pre><code class="language-bash"># ä½¿ç”¨gunicornå¯åŠ¨
gunicorn src.api.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8124

# ä½¿ç”¨docker
docker build -t stock-valuation-api .
docker run -p 8124:8124 stock-valuation-api
</code></pre>
<h3 id="api_1">APIæ–‡æ¡£</h3>
<p>å¯åŠ¨æœåŠ¡åè®¿é—®ï¼š
- Swagger UI: http://localhost:8124/docs
- ReDoc: http://localhost:8124/redoc
- OpenAPI Schema: http://localhost:8124/openapi.json</p>
<h3 id="_35">æµ‹è¯•è„šæœ¬</h3>
<h4 id="1_4">1. å¥åº·æ£€æŸ¥æµ‹è¯•</h4>
<pre><code class="language-bash"># åŸºç¡€å¥åº·æ£€æŸ¥
curl http://localhost:8124/

# é¢„æœŸå“åº”
# {&quot;message&quot;: &quot;Welcome to the Stock Valuation API (Streamlit Backend)&quot;}
</code></pre>
<h4 id="2_4">2. è‚¡ç¥¨ä¼°å€¼æµ‹è¯•</h4>
<h5 id="_36">åŸºç¡€ä¼°å€¼æµ‹è¯•</h5>
<pre><code class="language-bash">curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 5,
    &quot;request_llm_summary&quot;: false
  }'
</code></pre>
<h5 id="_37">å®Œæ•´å‚æ•°ä¼°å€¼æµ‹è¯•</h5>
<pre><code class="language-bash">curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;market&quot;: &quot;A&quot;,
    &quot;valuation_date&quot;: &quot;2024-12-31&quot;,
    &quot;forecast_years&quot;: 10,
    &quot;cagr_decay_rate&quot;: 0.15,
    &quot;op_margin_forecast_mode&quot;: &quot;transition_to_target&quot;,
    &quot;target_operating_margin&quot;: 0.30,
    &quot;op_margin_transition_years&quot;: 5,
    &quot;wacc_weight_mode&quot;: &quot;target&quot;,
    &quot;target_debt_ratio&quot;: 0.35,
    &quot;cost_of_debt&quot;: 0.045,
    &quot;risk_free_rate&quot;: 0.03,
    &quot;beta&quot;: 1.1,
    &quot;market_risk_premium&quot;: 0.055,
    &quot;size_premium&quot;: 0.015,
    &quot;terminal_value_method&quot;: &quot;exit_multiple&quot;,
    &quot;exit_multiple&quot;: 16.5,
    &quot;request_llm_summary&quot;: true,
    &quot;llm_provider&quot;: &quot;deepseek&quot;,
    &quot;llm_model_id&quot;: &quot;deepseek-chat&quot;,
    &quot;llm_temperature&quot;: 0.8,
    &quot;llm_top_p&quot;: 0.9,
    &quot;llm_max_tokens&quot;: 3000
  }'
</code></pre>
<h5 id="_38">æ•æ„Ÿæ€§åˆ†ææµ‹è¯•</h5>
<pre><code class="language-bash">curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 5,
    &quot;sensitivity_analysis&quot;: {
      &quot;row_axis&quot;: {
        &quot;parameter_name&quot;: &quot;wacc&quot;,
        &quot;values&quot;: [0.08, 0.09, 0.10, 0.11],
        &quot;step&quot;: 0.01,
        &quot;points&quot;: 4
      },
      &quot;column_axis&quot;: {
        &quot;parameter_name&quot;: &quot;exit_multiple&quot;,
        &quot;values&quot;: [14, 16, 18, 20],
        &quot;step&quot;: 2,
        &quot;points&quot;: 4
      }
    }
  }'
</code></pre>
<h5 id="_39">è¾¹ç•Œå€¼æµ‹è¯•</h5>
<pre><code class="language-bash"># æµ‹è¯•æœ€å°é¢„æµ‹å¹´æ•°
curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 1
  }'

# æµ‹è¯•æœ€å¤§é¢„æµ‹å¹´æ•°
curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 20
  }'

# æµ‹è¯•LLMå‚æ•°è¾¹ç•Œå€¼
curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 5,
    &quot;request_llm_summary&quot;: true,
    &quot;llm_temperature&quot;: 0.0,
    &quot;llm_top_p&quot;: 1.0,
    &quot;llm_max_tokens&quot;: 100
  }'
</code></pre>
<h5 id="_40">é”™è¯¯è¯·æ±‚æµ‹è¯•</h5>
<pre><code class="language-bash"># æµ‹è¯•æ— æ•ˆè‚¡ç¥¨ä»£ç 
curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;999999.SH&quot;,
    &quot;forecast_years&quot;: 5
  }'

# æµ‹è¯•å‚æ•°è¶…å‡ºèŒƒå›´
curl -X POST &quot;http://localhost:8124/api/v1/valuation&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;ts_code&quot;: &quot;600519.SH&quot;,
    &quot;forecast_years&quot;: 25,
    &quot;cagr_decay_rate&quot;: 1.5,
    &quot;llm_temperature&quot;: 3.0
  }'
</code></pre>
<h4 id="3_4">3. æ•°æ®æ›´æ–°æµ‹è¯•</h4>
<h5 id="_41">è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯æ›´æ–°æµ‹è¯•</h5>
<pre><code class="language-bash"># åŸºç¡€æ›´æ–°
curl -X POST &quot;http://localhost:8124/update_stock_basic&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{}'

# é¢„æœŸæˆåŠŸå“åº”
# {
#   &quot;status&quot;: &quot;success&quot;,
#   &quot;message&quot;: &quot;è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯æ›´æ–°æˆåŠŸï¼Œå…±5,234æ¡è®°å½•&quot;,
#   &quot;count&quot;: 5234
# }
</code></pre>
<h5 id="_42">æ¯æ—¥è¡Œæƒ…æ›´æ–°æµ‹è¯•</h5>
<pre><code class="language-bash"># æ›´æ–°æ¯æ—¥è¡Œæƒ…
curl -X POST &quot;http://localhost:8124/update_daily_basic&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{}'

# é¢„æœŸæˆåŠŸå“åº”
# {
#   &quot;status&quot;: &quot;success&quot;,
#   &quot;message&quot;: &quot;æ¯æ—¥è¡Œæƒ…æŒ‡æ ‡æ›´æ–°æˆåŠŸï¼Œå…±4,856æ¡è®°å½•&quot;,
#   &quot;count&quot;: 4856
# }
</code></pre>
<h4 id="4_4">4. è‚¡ç¥¨ç­›é€‰æµ‹è¯•</h4>
<h5 id="_43">åŸºç¡€ç­›é€‰æµ‹è¯•</h5>
<pre><code class="language-bash"># ä½PEè‚¡ç¥¨ç­›é€‰
curl -X POST &quot;http://localhost:8124/screen_stocks&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;pe_min&quot;: 0,
    &quot;pe_max&quot;: 15,
    &quot;market_cap_min&quot;: 100
  }'

# å¤§ç›˜è“ç­¹è‚¡ç­›é€‰
curl -X POST &quot;http://localhost:8124/screen_stocks&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;market_cap_min&quot;: 1000,
    &quot;pe_max&quot;: 25,
    &quot;pb_max&quot;: 5
  }'

# ä»·å€¼è‚¡ç­›é€‰
curl -X POST &quot;http://localhost:8124/screen_stocks&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;pe_max&quot;: 15,
    &quot;pb_max&quot;: 2,
    &quot;market_cap_max&quot;: 500
  }'
</code></pre>
<h5 id="_44">è¾¹ç•Œå€¼æµ‹è¯•</h5>
<pre><code class="language-bash"># æµ‹è¯•æå€¼ç­›é€‰
curl -X POST &quot;http://localhost:8124/screen_stocks&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;pe_min&quot;: 0,
    &quot;pe_max&quot;: 9999,
    &quot;pb_min&quot;: 0,
    &quot;pb_max&quot;: 9999,
    &quot;market_cap_min&quot;: 0,
    &quot;market_cap_max&quot;: 999999
  }'

# æµ‹è¯•ç©ºç­›é€‰æ¡ä»¶
curl -X POST &quot;http://localhost:8124/screen_stocks&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{}'
</code></pre>
<h5 id="_45">é”™è¯¯è¯·æ±‚æµ‹è¯•</h5>
<pre><code class="language-bash"># æµ‹è¯•æ— æ•ˆå‚æ•°ç»„åˆ
curl -X POST &quot;http://localhost:8124/screen_stocks&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;pe_min&quot;: 30,
    &quot;pe_max&quot;: 10,
    &quot;market_cap_min&quot;: 5000,
    &quot;market_cap_max&quot;: 1000
  }'

# æµ‹è¯•è´Ÿå€¼
curl -X POST &quot;http://localhost:8124/screen_stocks&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d '{
    &quot;pe_min&quot;: -5,
    &quot;pb_min&quot;: -1
  }'
</code></pre>
<h3 id="_46">æ€§èƒ½æµ‹è¯•</h3>
<h4 id="_47">å¹¶å‘æµ‹è¯•</h4>
<pre><code class="language-bash"># ä½¿ç”¨abæµ‹è¯•
ab -n 100 -c 10 -p test_request.json -T application/json http://localhost:8124/api/v1/valuation

# ä½¿ç”¨wrkæµ‹è¯•
wrk -t12 -c400 -d30s -s post.lua http://localhost:8124/api/v1/valuation
</code></pre>
<h4 id="_48">å“åº”æ—¶é—´ç›‘æ§</h4>
<ul>
<li>å•æ¬¡ä¼°å€¼è¯·æ±‚: 3-10ç§’ (å–å†³äºLLMè°ƒç”¨)</li>
<li>æ•°æ®æ›´æ–°è¯·æ±‚: 10-60ç§’</li>
<li>è‚¡ç¥¨ç­›é€‰è¯·æ±‚: 1-3ç§’</li>
</ul>
<hr />
<h2 id="_49">ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 id="python">Pythonå®¢æˆ·ç«¯ç¤ºä¾‹</h3>
<pre><code class="language-python">import requests
import json

# APIé…ç½®
API_BASE_URL = &quot;http://localhost:8124&quot;

def calculate_stock_valuation(ts_code, forecast_years=5, request_llm=True):
    &quot;&quot;&quot;è®¡ç®—è‚¡ç¥¨ä¼°å€¼&quot;&quot;&quot;

    # æ„å»ºè¯·æ±‚å‚æ•°
    request_data = {
        &quot;ts_code&quot;: ts_code,
        &quot;forecast_years&quot;: forecast_years,
        &quot;request_llm_summary&quot;: request_llm,
        &quot;terminal_value_method&quot;: &quot;exit_multiple&quot;,
        &quot;wacc_weight_mode&quot;: &quot;target&quot;,
        # å¯é€‰ï¼šè‡ªå®šä¹‰WACCå‚æ•°
        &quot;risk_free_rate&quot;: 0.03,
        &quot;market_risk_premium&quot;: 0.05,
        &quot;beta&quot;: 1.0
    }

    try:
        # å‘é€è¯·æ±‚
        response = requests.post(
            f&quot;{API_BASE_URL}/api/v1/valuation&quot;,
            headers={&quot;Content-Type&quot;: &quot;application/json&quot;},
            json=request_data,
            timeout=60  # 60ç§’è¶…æ—¶
        )

        response.raise_for_status()
        result = response.json()

        # è§£æç»“æœ
        stock_info = result[&quot;stock_info&quot;]
        valuation = result[&quot;valuation_results&quot;]
        dcf_details = valuation[&quot;dcf_forecast_details&quot;]

        print(f&quot;è‚¡ç¥¨: {stock_info['name']} ({stock_info['ts_code']})&quot;)
        print(f&quot;å½“å‰ä»·æ ¼: {valuation['latest_price']:.2f}&quot;)
        print(f&quot;DCFä¼°å€¼: {dcf_details['value_per_share']:.2f}&quot;)
        print(f&quot;ä¼°å€¼å·®å¼‚: {((dcf_details['value_per_share'] / valuation['latest_price'] - 1) * 100):.1f}%&quot;)

        if valuation[&quot;llm_analysis_summary&quot;]:
            print(&quot;\n=== LLMåˆ†æ ===&quot;)
            print(valuation[&quot;llm_analysis_summary&quot;])

        return result

    except requests.exceptions.RequestException as e:
        print(f&quot;è¯·æ±‚å¤±è´¥: {e}&quot;)
        return None

def screen_stocks(pe_min=None, pe_max=None, market_cap_min=None):
    &quot;&quot;&quot;ç­›é€‰è‚¡ç¥¨&quot;&quot;&quot;

    request_data = {}
    if pe_min is not None:
        request_data[&quot;pe_min&quot;] = pe_min
    if pe_max is not None:
        request_data[&quot;pe_max&quot;] = pe_max
    if market_cap_min is not None:
        request_data[&quot;market_cap_min&quot;] = market_cap_min

    try:
        response = requests.post(
            f&quot;{API_BASE_URL}/screen_stocks&quot;,
            headers={&quot;Content-Type&quot;: &quot;application/json&quot;},
            json=request_data
        )

        response.raise_for_status()
        result = response.json()

        print(f&quot;æ‰¾åˆ° {result['count']} åªç¬¦åˆæ¡ä»¶çš„è‚¡ç¥¨:&quot;)
        for stock in result[&quot;data&quot;][:10]:  # æ˜¾ç¤ºå‰10åª
            print(f&quot;{stock['name']} ({stock['ts_code']}): PE={stock['pe']:.1f}, å¸‚å€¼={stock['total_mv']:.0f}äº¿&quot;)

        return result

    except requests.exceptions.RequestException as e:
        print(f&quot;ç­›é€‰å¤±è´¥: {e}&quot;)
        return None

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == &quot;__main__&quot;:
    # è®¡ç®—è´µå·èŒ…å°ä¼°å€¼
    result = calculate_stock_valuation(&quot;600519.SH&quot;, forecast_years=5)

    # ç­›é€‰ä½PEè‚¡ç¥¨
    screen_stocks(pe_min=0, pe_max=20, market_cap_min=100)
</code></pre>
<h3 id="javascript">JavaScriptå®¢æˆ·ç«¯ç¤ºä¾‹</h3>
<pre><code class="language-javascript">// APIé…ç½®
const API_BASE_URL = 'http://localhost:8124';

// è®¡ç®—è‚¡ç¥¨ä¼°å€¼
async function calculateStockValuation(tsCode, options = {}) {
    const requestData = {
        ts_code: tsCode,
        forecast_years: options.forecastYears || 5,
        request_llm_summary: options.requestLLM || false,
        ...options
    };

    try {
        const response = await fetch(`${API_BASE_URL}/api/v1/valuation`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(requestData)
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();

        console.log(`è‚¡ç¥¨: ${result.stock_info.name} (${result.stock_info.ts_code})`);
        console.log(`å½“å‰ä»·æ ¼: ${result.valuation_results.latest_price}`);
        console.log(`DCFä¼°å€¼: ${result.valuation_results.dcf_forecast_details.value_per_share}`);

        return result;

    } catch (error) {
        console.error('è¯·æ±‚å¤±è´¥:', error);
        throw error;
    }
}

// è‚¡ç¥¨ç­›é€‰
async function screenStocks(filters = {}) {
    const requestData = {};

    if (filters.peMin !== undefined) requestData.pe_min = filters.peMin;
    if (filters.peMax !== undefined) requestData.pe_max = filters.peMax;
    if (filters.marketCapMin !== undefined) requestData.market_cap_min = filters.marketCapMin;

    try {
        const response = await fetch(`${API_BASE_URL}/screen_stocks`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(requestData)
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        console.log(`æ‰¾åˆ° ${result.count} åªç¬¦åˆæ¡ä»¶çš„è‚¡ç¥¨`);

        return result;

    } catch (error) {
        console.error('ç­›é€‰å¤±è´¥:', error);
        throw error;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
(async () =&gt; {
    try {
        // è®¡ç®—ä¼°å€¼
        const valuation = await calculateStockValuation('600519.SH', {
            forecastYears: 5,
            requestLLM: true
        });

        // ç­›é€‰è‚¡ç¥¨
        const screened = await screenStocks({
            peMin: 0,
            peMax: 20,
            marketCapMin: 100
        });

    } catch (error) {
        console.error('APIè°ƒç”¨å¤±è´¥:', error);
    }
})();
</code></pre>
<h3 id="_50">æ‰¹é‡å¤„ç†ç¤ºä¾‹</h3>
<pre><code class="language-python">import asyncio
import aiohttp
import json

async def batch_valuation(session, stock_codes):
    &quot;&quot;&quot;æ‰¹é‡è®¡ç®—è‚¡ç¥¨ä¼°å€¼&quot;&quot;&quot;

    tasks = []
    for ts_code in stock_codes:
        task = calculate_single_valuation(session, ts_code)
        tasks.append(task)

    results = await asyncio.gather(*tasks, return_exceptions=True)
    return results

async def calculate_single_valuation(session, ts_code):
    &quot;&quot;&quot;å•åªè‚¡ç¥¨ä¼°å€¼&quot;&quot;&quot;

    request_data = {
        &quot;ts_code&quot;: ts_code,
        &quot;forecast_years&quot;: 5,
        &quot;request_llm_summary&quot;: False  # æ‰¹é‡æ—¶å…³é—­LLMä»¥æé«˜é€Ÿåº¦
    }

    try:
        async with session.post(
            f&quot;{API_BASE_URL}/api/v1/valuation&quot;,
            json=request_data,
            timeout=aiohttp.ClientTimeout(total=30)
        ) as response:
            result = await response.json()
            return {
                &quot;ts_code&quot;: ts_code,
                &quot;success&quot;: True,
                &quot;data&quot;: result
            }
    except Exception as e:
        return {
            &quot;ts_code&quot;: ts_code,
            &quot;success&quot;: False,
            &quot;error&quot;: str(e)
        }

# ä½¿ç”¨ç¤ºä¾‹
async def main():
    stock_codes = [&quot;600519.SH&quot;, &quot;000858.SZ&quot;, &quot;600036.SH&quot;]

    async with aiohttp.ClientSession() as session:
        results = await batch_valuation(session, stock_codes)

        for result in results:
            if result[&quot;success&quot;]:
                stock_info = result[&quot;data&quot;][&quot;stock_info&quot;]
                dcf_details = result[&quot;data&quot;][&quot;valuation_results&quot;][&quot;dcf_forecast_details&quot;]
                print(f&quot;{stock_info['name']}: {dcf_details['value_per_share']:.2f}&quot;)
            else:
                print(f&quot;{result['ts_code']}: å¤±è´¥ - {result['error']}&quot;)

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>
<hr />
<h2 id="_51">ğŸ“ æœ€ä½³å®è·µ</h2>
<h3 id="1_5">1. è¯·æ±‚ä¼˜åŒ–</h3>
<ul>
<li><strong>æ‰¹é‡å¤„ç†</strong>: ä½¿ç”¨å¼‚æ­¥è¯·æ±‚æ‰¹é‡å¤„ç†å¤šåªè‚¡ç¥¨</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>: å¯¹ç›¸åŒå‚æ•°çš„ä¼°å€¼ç»“æœè¿›è¡Œç¼“å­˜</li>
<li><strong>è¶…æ—¶è®¾ç½®</strong>: æ ¹æ®ç½‘ç»œç¯å¢ƒåˆç†è®¾ç½®è¶…æ—¶æ—¶é—´</li>
<li><strong>é‡è¯•æœºåˆ¶</strong>: å¯¹ä¸´æ—¶æ€§é”™è¯¯å®ç°æŒ‡æ•°é€€é¿é‡è¯•</li>
</ul>
<h3 id="2_5">2. é”™è¯¯å¤„ç†</h3>
<ul>
<li><strong>å‚æ•°éªŒè¯</strong>: åœ¨å‘é€è¯·æ±‚å‰éªŒè¯å‚æ•°æ ¼å¼</li>
<li><strong>çŠ¶æ€ç æ£€æŸ¥</strong>: æ£€æŸ¥HTTPçŠ¶æ€ç å’Œä¸šåŠ¡é”™è¯¯ç </li>
<li><strong>å¼‚å¸¸æ•è·</strong>: æ•è·ç½‘ç»œå¼‚å¸¸å’Œè§£æå¼‚å¸¸</li>
<li><strong>æ—¥å¿—è®°å½•</strong>: è®°å½•è¯·æ±‚å’Œå“åº”ä¿¡æ¯ç”¨äºè°ƒè¯•</li>
</ul>
<h3 id="3_5">3. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li><strong>å¹¶å‘æ§åˆ¶</strong>: åˆç†æ§åˆ¶å¹¶å‘è¯·æ±‚æ•°é‡</li>
<li><strong>LLMè°ƒç”¨</strong>: æ‰¹é‡å¤„ç†æ—¶å…³é—­LLMåˆ†æä»¥æé«˜é€Ÿåº¦</li>
<li><strong>æ•°æ®åˆ†é¡µ</strong>: å¯¹å¤§é‡ç»“æœè¿›è¡Œåˆ†é¡µå¤„ç†</li>
<li><strong>è¿æ¥æ± </strong>: ä½¿ç”¨HTTPè¿æ¥æ± å‡å°‘è¿æ¥å¼€é”€</li>
</ul>
<h3 id="4_5">4. å®‰å…¨è€ƒè™‘</h3>
<ul>
<li><strong>HTTPS</strong>: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨HTTPSåè®®</li>
<li><strong>è®¤è¯æˆæƒ</strong>: å®ç°APIå¯†é’¥æˆ–OAuthè®¤è¯</li>
<li><strong>é™æµæ§åˆ¶</strong>: å®ç°è¯·æ±‚é¢‘ç‡é™åˆ¶</li>
<li><strong>è¾“å…¥éªŒè¯</strong>: ä¸¥æ ¼éªŒè¯æ‰€æœ‰è¾“å…¥å‚æ•°</li>
</ul>
<hr />
<h2 id="_52">ğŸ”§ æ•…éšœæ’é™¤</h2>
<h3 id="_53">å¸¸è§é—®é¢˜</h3>
<h4 id="1_6">1. è¿æ¥è¶…æ—¶</h4>
<p><strong>é—®é¢˜</strong>: è¯·æ±‚è¶…æ—¶å¤±è´¥
<strong>è§£å†³</strong>: 
- å¢åŠ è¶…æ—¶æ—¶é—´åˆ°60ç§’
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ</p>
<h4 id="2_6">2. æ•°æ®æœªæ‰¾åˆ°</h4>
<p><strong>é—®é¢˜</strong>: è¿”å›404é”™è¯¯
<strong>è§£å†³</strong>:
- éªŒè¯è‚¡ç¥¨ä»£ç æ ¼å¼
- æ£€æŸ¥æ•°æ®æ˜¯å¦å·²æ›´æ–°
- ç¡®è®¤è‚¡ç¥¨æ˜¯å¦å­˜åœ¨</p>
<h4 id="3_6">3. è®¡ç®—å¤±è´¥</h4>
<p><strong>é—®é¢˜</strong>: è¿”å›500é”™è¯¯
<strong>è§£å†³</strong>:
- æ£€æŸ¥è¯·æ±‚å‚æ•°æ˜¯å¦åˆç†
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
- éªŒè¯è´¢åŠ¡æ•°æ®å®Œæ•´æ€§</p>
<h4 id="4-llm">4. LLMè°ƒç”¨å¤±è´¥</h4>
<p><strong>é—®é¢˜</strong>: LLMåˆ†æè¿”å›é”™è¯¯
<strong>è§£å†³</strong>:
- æ£€æŸ¥LLMæœåŠ¡é…ç½®
- éªŒè¯APIå¯†é’¥å’Œç½‘ç»œè¿æ¥
- å°è¯•ä½¿ç”¨ä¸åŒçš„LLMæä¾›å•†</p>
<h3 id="_54">è°ƒè¯•æŠ€å·§</h3>
<h4 id="1_7">1. å¯ç”¨è¯¦ç»†æ—¥å¿—</h4>
<pre><code class="language-bash"># è®¾ç½®æ—¥å¿—çº§åˆ«ä¸ºDEBUG
export LOG_LEVEL=DEBUG
uvicorn src.api.main:app --reload
</code></pre>
<h4 id="2-swagger-ui">2. ä½¿ç”¨Swagger UI</h4>
<p>è®¿é—® http://localhost:8124/docs è¿›è¡Œäº¤äº’å¼æµ‹è¯•</p>
<h4 id="3_7">3. æ£€æŸ¥è¯·æ±‚/å“åº”</h4>
<pre><code class="language-python">import logging

# å¯ç”¨è¯·æ±‚æ—¥å¿—
logging.basicConfig(level=logging.DEBUG)
</code></pre>
<h4 id="4_6">4. éªŒè¯æ•°æ®æ ¼å¼</h4>
<pre><code class="language-python"># ä½¿ç”¨PydanticéªŒè¯æ•°æ®
from pydantic import ValidationError

try:
    request = StockValuationRequest(**data)
except ValidationError as e:
    print(f&quot;éªŒè¯é”™è¯¯: {e}&quot;)
</code></pre>
<hr />
<h2 id="_55">ğŸ“Š ç›‘æ§å’Œè¿ç»´</h2>
<h3 id="_56">å…³é”®æŒ‡æ ‡</h3>
<ul>
<li><strong>å“åº”æ—¶é—´</strong>: å•æ¬¡è¯·æ±‚å¤„ç†æ—¶é—´</li>
<li><strong>é”™è¯¯ç‡</strong>: HTTPé”™è¯¯ç åˆ†å¸ƒ</li>
<li><strong>å¹¶å‘æ•°</strong>: åŒæ—¶å¤„ç†çš„è¯·æ±‚æ•°</li>
<li><strong>å†…å­˜ä½¿ç”¨</strong>: æœåŠ¡å†…å­˜å ç”¨</li>
<li><strong>CPUä½¿ç”¨</strong>: æœåŠ¡CPUå ç”¨ç‡</li>
</ul>
<h3 id="_57">æ—¥å¿—ç›‘æ§</h3>
<pre><code class="language-python"># å…³é”®æ—¥å¿—æ¨¡å¼
INFO - Received valuation request for: 600519.SH
INFO - Step 1: Fetching data...
INFO - Step 2: Processing data...
INFO - Base case valuation successful.
ERROR - Error during LLM call: API timeout
</code></pre>
<h3 id="_58">å¥åº·æ£€æŸ¥</h3>
<pre><code class="language-bash"># åŸºç¡€å¥åº·æ£€æŸ¥
curl http://localhost:8124/

# è¯¦ç»†å¥åº·æ£€æŸ¥
curl http://localhost:8124/health
</code></pre>
<h3 id="_59">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li><strong>æ•°æ®åº“ä¼˜åŒ–</strong>: æ·»åŠ é€‚å½“çš„ç´¢å¼•</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>: å®ç°Redisç¼“å­˜</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>: ä½¿ç”¨å¼‚æ­¥I/Oæé«˜å¹¶å‘</li>
<li><strong>è´Ÿè½½å‡è¡¡</strong>: éƒ¨ç½²å¤šå®ä¾‹åˆ†æ‹…è´Ÿè½½</li>
</ol>
<hr />
<h2 id="_60">ğŸ“… æœ€æ–°æ›´æ–°è®°å½•</h2>
<h3 id="v300-2025-09-22">v3.0.0 (2025-09-22)</h3>
<p><strong>é‡å¤§åŠŸèƒ½æ›´æ–°</strong>:
- âœ… <strong>TuShareæ•°æ®æº</strong>: å®Œå…¨é›†æˆTuShare APIï¼Œæ”¯æŒæ•°æ®æºçƒ­åˆ‡æ¢
- âœ… <strong>LTMåŸºçº¿åŠŸèƒ½</strong>: æ–°å¢Last Twelve Monthsæ”¶å…¥åŸºæœŸæ”¯æŒ
- âœ… <strong>æ•°æ®æ¸…æ´—ä¼˜åŒ–</strong>: ä¿®å¤èµ„äº§è´Ÿå€ºè¡¨åŸºå‡†æ—¥å›é€€é—®é¢˜ï¼Œä¿æŠ¤å…³é”®ç§‘ç›®
- âœ… <strong>æ•æ„Ÿæ€§åˆ†æå¢å¼º</strong>: æ–°å¢EV/EBITDAå€æ•°ã€éšå«PE/PGRç­‰æŒ‡æ ‡
- âœ… <strong>ç”Ÿäº§çº§éƒ¨ç½²</strong>: å®Œæ•´çš„é”™è¯¯å¤„ç†ã€å…œåº•æœºåˆ¶å’Œç›‘æ§èƒ½åŠ›</p>
<p><strong>APIæ¥å£æ›´æ–°</strong>:
- æ–°å¢ <code>ltm_baseline_enabled</code> å‚æ•°å¯ç”¨LTMåŸºçº¿
- å¢å¼ºä¼°å€¼å“åº”å­—æ®µï¼ŒåŒ…å«æ›´å¤šè¯Šæ–­ä¿¡æ¯
- ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯</p>
<p><strong>æ•°æ®è´¨é‡æå‡</strong>:
- TuShareä¸PostgreSQLæ•°æ®æºç«¯åˆ°ç«¯éªŒè¯å®Œæˆ
- å…³é”®ä¼°å€¼æŒ‡æ ‡(EV/VPS/CAGR/EBITDA)å¯¹é½ç¡®è®¤
- æŒ‰å¹´æ‹©ä¼˜æ•°æ®é€‰æ‹©ç­–ç•¥ï¼Œç¡®ä¿ä½¿ç”¨æœ€æ–°å¹´æŠ¥</p>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>:
- æ•°æ®è·å–é“¾è·¯ä¼˜åŒ–ï¼Œå‡å°‘APIè°ƒç”¨æ¬¡æ•°
- Decimalç²¾åº¦è®¡ç®—ï¼Œé¿å…æµ®ç‚¹è¯¯å·®
- å¼‚æ­¥å¤„ç†æ”¯æŒï¼Œæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›</p>
<h3 id="v2xx-2025-09">v2.x.x (2025-09ä¹‹å‰)</h3>
<p><strong>å†å²åŠŸèƒ½</strong>:
- åŸºç¡€DCFä¼°å€¼è®¡ç®—
- PostgreSQLæ•°æ®æºé›†æˆ
- Streamlitå‰ç«¯
- åŸºç¡€æ•æ„Ÿæ€§åˆ†æ
- è‚¡ç¥¨ç­›é€‰å™¨</p>
<h3 id="v310">ä¸‹ä¸€ç‰ˆæœ¬è®¡åˆ’ (v3.1.0)</h3>
<p><strong>è®¡åˆ’åŠŸèƒ½</strong>:
- æ€§èƒ½ç¼“å­˜æœºåˆ¶
- æ‰¹é‡ä¼°å€¼API
- æ›´å¤šè¡Œä¸šæ¨¡å‹æ”¯æŒ
- å®æ—¶æ•°æ®æµå¤„ç†</p>
<hr />
<p>è¿™ä»½APIæ–‡æ¡£æä¾›äº†å®Œæ•´çš„æŠ€æœ¯è§„æ ¼å’Œä½¿ç”¨æŒ‡å—ï¼Œæ–¹ä¾¿å…¶ä»–é¡¹ç›®è¿›è¡Œå¯¹æ¥å’Œæµ‹è¯•ã€‚é¡¹ç›®å·²è¾¾åˆ°ç”Ÿäº§çº§æ ‡å‡†ï¼Œå…·å¤‡å®Œæ•´çš„ä¼°å€¼åˆ†æèƒ½åŠ›ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
