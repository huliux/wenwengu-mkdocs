# 数据源专题文档

本目录包含数据源配置、数据质量管控、数据对齐等数据相关文档。

## 文档列表

### 📊 数据对齐
- **tushare_alignment.md** - TuShare数据对齐技术细节（⭐⭐⭐⭐ 重要）
  - TuShare API使用规范
  - 数据质量检查方法
  - 数据对齐验证流程
  - 常见数据问题解决

## 数据源架构

### 支持的数据源
- **TuShare API**: 实时金融数据（默认）
- **PostgreSQL**: 本地历史数据
- **混合模式**: PostgreSQL优先，TuShare回退

### 数据切换配置
```bash
# 在.env文件中配置
DATA_SOURCE=tushare    # TuShare模式
DATA_SOURCE=postgres   # PostgreSQL模式
DATA_SOURCE=hybrid     # 混合模式
```

## 数据质量控制

### 质量检查机制
1. **数据完整性检查** - 关键字段非空验证
2. **数据一致性检查** - 跨表数据关联验证
3. **异常值检测** - IQR方法检测异常值
4. **时间序列校验** - 数据时间序列连续性

### 配置参数
- `ENABLE_IQR_OUTLIER_DETECTION`: 异常值检测开关
- `OCL_AGGREGATION_MODE`: 数据聚合模式

## 数据处理流程

1. **数据获取**: 从数据源获取原始数据
2. **数据清洗**: 处理缺失值和异常值
3. **数据转换**: 统一数据格式和单位
4. **数据验证**: 质量检查和一致性验证
5. **数据缓存**: 热点数据Redis缓存

## 常见问题

### TuShare相关
- **API限额**: 注意调用频率限制
- **数据延迟**: 实时数据可能有延迟
- **字段映射**: 确保字段名称映射正确

### PostgreSQL相关
- **表结构**: 按照wiki文档建立表结构
- **数据导入**: 确保历史数据完整性
- **连接池**: 配置合适的连接池大小

## 阅读建议

### 数据工程师
1. **必读**: 完整阅读TuShare对齐文档
2. 了解数据质量控制机制
3. 熟悉数据源切换方法

### 开发者
了解数据获取流程，便于调试数据相关问题

## 更新频率
季度更新或数据源API变更时更新