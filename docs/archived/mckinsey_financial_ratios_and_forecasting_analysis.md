# Stock Vale Valuation 3.0 è´¢åŠ¡æ¯”ç‡ä¸é¢„æµ‹é€»è¾‘ McKinsey æ ‡å‡†åˆè§„æ€§ä¸“é¢˜åˆ†ææŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

æœ¬æŠ¥å‘ŠåŸºäºå¯¹ **stock_vale_valuation_3.0** é¡¹ç›®è´¢åŠ¡è®¡ç®—æ ¸å¿ƒæ¨¡å—çš„æ·±åº¦æŠ€æœ¯åˆ†æï¼Œä» **McKinsey è´¢åŠ¡åˆ†ææ ‡å‡†** çš„è§’åº¦å¯¹é¡¹ç›®çš„è´¢åŠ¡æ¯”ç‡è®¡ç®—é€»è¾‘ã€è´¢åŠ¡é¢„æµ‹ç®—æ³•ã€æ•°æ®è´¨é‡å¤„ç†æµç¨‹è¿›è¡Œå…¨é¢è¯„ä¼°ã€‚åˆ†æå‘ç°è¯¥é¡¹ç›®åœ¨æŠ€æœ¯å®ç°å’ŒåŸºç¡€é€»è¾‘ä¸Šè¾¾åˆ°ä¸“ä¸šæ°´å‡†ï¼Œä½†åœ¨é«˜çº§è´¢åŠ¡åˆ†ææŠ€å·§å’Œè¡Œä¸šé€‚åº”æ€§æ–¹é¢å­˜åœ¨é‡è¦æ”¹è¿›ç©ºé—´ã€‚

**æ ¸å¿ƒå‘ç°ï¼ˆ2025-09-10 æ›´æ–°ï¼‰**ï¼š
- **æŠ€æœ¯å®ç°ä¼˜ç§€**ï¼šæ¨¡å—åŒ–è®¾è®¡æ¸…æ™°ï¼Œè®¡ç®—ç²¾åº¦é«˜ï¼Œå¼‚å¸¸å¤„ç†å®Œå–„
- **åŸºç¡€é€»è¾‘æ­£ç¡®**ï¼šè´¢åŠ¡æ¯”ç‡è®¡ç®—ç¬¦åˆåŸºæœ¬è´¢åŠ¡åˆ†æåŸç†
- **é¢„æµ‹æ¨¡å‹ç§‘å­¦**ï¼šæ”¶å…¥é¢„æµ‹å’Œè´¢åŠ¡é¢„æµ‹ç®—æ³•åŸºæœ¬åˆç†
- **McKinseyæ ‡å‡†ç¬¦åˆåº¦ä¸­ç­‰**ï¼šåŸºç¡€åŠŸèƒ½ç¬¦åˆï¼Œä½†ç¼ºä¹é«˜çº§åˆ†æåŠŸèƒ½
- **æ»šåŠ¨ä¸å£å¾„ç»Ÿä¸€æ”¹è¿›**ï¼šæ”¯æŒ LTM/Interim åŸºæœŸï¼ˆå¯é€‰ï¼‰ï¼Œ`last_component_nwc` ä¸â€œä¼°å€¼æ—¥æ»šåŠ¨çš„æœ€æ–°èµ„äº§è´Ÿå€ºè¡¨â€å¯¹é½ï¼Œå‡å°‘é¦–å¹´ Î”NWC å£å¾„è·³å˜
- **NWC å¯è§£é‡Šæ€§å¢å¼º**ï¼šå¼•å…¥ `nwc_days_transition_years` ä¸ `transition_to_target`ï¼ŒÎ”NWC åœ¨ AR/AP/Inv çš„æ–¹å‘ä¸å¹…åº¦ä¸å¤©æ•°å˜åŒ–å»åˆï¼Œå¹¶æ–°å¢å•æµ‹è¦†ç›–
- **è‚¡æ¯ä¸ as-of**ï¼šTTMï¼ˆå®æ–½/å®Œæˆï¼‰â†’ é¢„æ¡ˆ â†’ å¹´åº¦ å›é€€é“¾ï¼›ä»·æ ¼/EPS as-of åˆè§„æ˜¾ç¤ºï¼›è¡Œä¸šé¢„è®¾æ¨¡æ¿æå‡å‡è®¾è´¨é‡
- **æ”¹è¿›æ½œåŠ›å·¨å¤§**ï¼šé€šè¿‡å…³é”®æ”¹è¿›å¯è¾¾åˆ°ä¼ä¸šçº§è´¢åŠ¡åˆ†æå¹³å°æ ‡å‡†

## ğŸ¯ åˆ†æèŒƒå›´ä¸æ–¹æ³•è®º

### 1.1 åˆ†æèŒƒå›´

**æ ¸å¿ƒæ¨¡å—åˆ†æ**ï¼š
- **è´¢åŠ¡æ¯”ç‡è®¡ç®—**ï¼š`src/core/financial/processor.py`
- **è´¢åŠ¡é¢„æµ‹ç®—æ³•**ï¼š`src/core/financial/forecaster.py`
- **æ•°æ®è´¨é‡æ§åˆ¶**ï¼šæ•°æ®è·å–ã€æ¸…æ´—ã€éªŒè¯æµç¨‹
- **è®¡ç®—å™¨é›†ç¾¤**ï¼šNWCã€WACCã€FCFç­‰ä¸“ä¸šåŒ–è®¡ç®—å™¨

### 1.2 McKinsey æ ‡å‡†åŸºå‡†

**McKinsey è´¢åŠ¡åˆ†ææœ€ä½³å®è·µ**ï¼š
- æ ‡å‡†åŒ–è´¢åŠ¡æ¯”ç‡è®¡ç®—æ–¹æ³•
- ç§‘å­¦çš„è´¢åŠ¡é¢„æµ‹æ¨¡å‹
- å®Œæ•´çš„æ•°æ®è´¨é‡æ§åˆ¶ä½“ç³»
- è¡Œä¸šå·®å¼‚åŒ–åˆ†ææ¡†æ¶
- æƒ…æ™¯åˆ†æå’Œæ•æ„Ÿæ€§åˆ†æ

## ğŸ“Š è´¢åŠ¡æ¯”ç‡è®¡ç®—é€»è¾‘åˆ†æ

### 2.1 ç›ˆåˆ©èƒ½åŠ›æ¯”ç‡åˆè§„æ€§

#### 2.1.1 è¥ä¸šåˆ©æ¶¦ç‡è®¡ç®—

**å®ç°ä»£ç **ï¼š`processor.py:647-658`
```python
op_profit_col = "operate_profit" if "operate_profit" in is_df.columns else "ebit"
if op_profit_col in is_df.columns:
    self.historical_ratios["operating_margin_median"] = self._calculate_median_ratio_or_days(
        is_df[op_profit_col],
        is_df.get("revenue", pd.Series()),
        days_in_year=None,
    )
```

**å…¬å¼åˆ†æ**ï¼š
```
è¥ä¸šåˆ©æ¶¦ç‡ = EBIT / è¥ä¸šæ”¶å…¥ï¼ˆRevenueï¼‰
```

**McKinsey æ ‡å‡†å¯¹æ¯”**ï¼š
- **æ ‡å‡†å®šä¹‰**ï¼šOperating Income / Revenue
- **æœ¬é¡¹ç›®å®ç°**ï¼šå®Œå…¨ç¬¦åˆï¼Œæ”¯æŒEBITå’ŒOperating ProfitåŒé‡è¯†åˆ«
- **ç¬¦åˆåº¦**ï¼šâœ… 100%

**ä¸“ä¸šè¯„ä»·**ï¼šA+
- æ™ºèƒ½å­—æ®µè¯†åˆ«ï¼Œæé«˜æ•°æ®é€‚åº”æ€§
- ä½¿ç”¨ä¸­ä½æ•°è®¡ç®—ï¼Œç¬¦åˆè´¢åŠ¡åˆ†ææ ‡å‡†
- å¼‚å¸¸å¤„ç†å®Œå–„

#### 2.1.2 é”€è´§æˆæœ¬å æ”¶æ¯”è®¡ç®—

**å®ç°ä»£ç **ï¼š`processor.py:568-574`
```python
self.historical_ratios["cogs_to_revenue_ratio"] = self._calculate_median_ratio_or_days(
    is_df.get("oper_cost", pd.Series(dtype="float64")),
    is_df.get("revenue", pd.Series(dtype="float64")),
    days_in_year=None,
)
```

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâœ… 95%
- ä½¿ç”¨ä¸­ä½æ•°è€Œéå¹³å‡å€¼ï¼Œç¬¦åˆè´¢åŠ¡åˆ†ææœ€ä½³å®è·µ
- å¤„ç†äº†å¼‚å¸¸å€¼å’Œç¼ºå¤±æ•°æ®
- è®¡ç®—é€»è¾‘ä¸¥è°¨

### 2.2 è¿è¥æ•ˆç‡æ¯”ç‡åˆè§„æ€§

#### 2.2.1 åº”æ”¶è´¦æ¬¾å‘¨è½¬å¤©æ•°

**å®ç°ä»£ç **ï¼š`processor.py:703-718`
```python
self.historical_ratios["accounts_receivable_days"] = self._calculate_median_ratio_or_days(
    bs_merged_ar["accounts_receiv_bill"],
    bs_merged_ar["revenue"],
    days_in_year=360,
)
```

**å…¬å¼åˆ†æ**ï¼š
```
åº”æ”¶è´¦æ¬¾å‘¨è½¬å¤©æ•° = (åº”æ”¶è´¦æ¬¾ / æ”¶å…¥) Ã— 360å¤©
```

**McKinsey æ ‡å‡†å¯¹æ¯”**ï¼š
- **æ ‡å‡†å®šä¹‰**ï¼š(Accounts Receivable / Revenue) Ã— 365ï¼ˆæˆ–æŒ‰ä¼šè®¡å¹´åº¦å®é™…å¤©æ•°ï¼‰
- **æœ¬é¡¹ç›®å®ç°**ï¼šé»˜è®¤ 360 å¤©ï¼ˆæœ¬åœ°åŒ–æƒ¯ä¾‹ï¼‰ï¼Œå¯æ‰©å±•ä¸º 365/366 æˆ–æŒ‰ä¼šè®¡å¹´åº¦é…ç½®
- **å·®å¼‚åˆ†æ**ï¼šé»˜è®¤ 360 å¤©åˆç†ï¼Œå»ºè®®æä¾›å¯é…ç½®/æŒ‰æœŸæœ«æ—¥è‡ªåŠ¨è¯†åˆ«
- **ç¬¦åˆåº¦**ï¼šâœ… 90%

**æ”¹è¿›å»ºè®®**ï¼š
```python
def get_days_in_year(financial_year_end_date):
    """æ ¹æ®å®é™…ä¼šè®¡å¹´åº¦ç¡®å®šå¤©æ•°"""
    year = financial_year_end_date.year
    if calendar.isleap(year):
        return 366
    return 365

# æˆ–è€…æä¾›é…ç½®é€‰é¡¹
days_in_year = config.get('days_in_year', 360)  # 360/365/366
```

### 2.3 èµ„æœ¬ç»“æ„æ¯”ç‡åˆè§„æ€§

#### 2.3.1 å‡€è¥è¿èµ„æœ¬è®¡ç®—

**NWCè®¡ç®—å™¨å®ç°**ï¼š`nwc_calculator.py:11-22`
```python
def calculate_nwc(self, df: pd.DataFrame) -> pd.Series:
    """
    NWC = æµåŠ¨èµ„äº§åˆè®¡ - è´§å¸èµ„é‡‘ - (æµåŠ¨è´Ÿå€ºåˆè®¡ - çŸ­æœŸå€Ÿæ¬¾ - ä¸€å¹´å†…åˆ°æœŸçš„éæµåŠ¨è´Ÿå€º)
    """
    required_cols = [
        "total_cur_assets", "money_cap", "total_cur_liab",
        "st_borr", "non_cur_liab_due_1y",
    ]
```

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâœ… 100%
- å®šä¹‰ç²¾ç¡®ï¼Œç¬¦åˆDCFä¼°å€¼è¦æ±‚
- æ’é™¤éç»è¥æ€§ç°é‡‘å’Œæœ‰æ¯è´Ÿå€º
- è®¡ç®—é€»è¾‘ä¸¥è°¨

### 2.4 æ ¸å¿ƒè®¡ç®—å‡½æ•°åˆ†æ

#### 2.4.1 _calculate_median_ratio_or_dayså‡½æ•°

**å‡½æ•°ä½ç½®**ï¼š`processor.py:401-487`

**æŠ€æœ¯ä¼˜åŠ¿**ï¼š
- **æ•°æ®ç²¾åº¦**ï¼šä½¿ç”¨Decimalç¡®ä¿é«˜ç²¾åº¦è®¡ç®—
- **å¼‚å¸¸å¤„ç†**ï¼šå®Œæ•´çš„é™¤é›¶æ£€æŸ¥å’Œæ— æ•ˆå€¼å¤„ç†
- **ç»Ÿè®¡æ–¹æ³•**ï¼šä½¿ç”¨ä¸­ä½æ•°é¿å…å¼‚å¸¸å€¼å½±å“
- **çµæ´»æ€§**ï¼šæ”¯æŒæ¯”ç‡å’Œå‘¨è½¬å¤©æ•°åŒé‡è®¡ç®—æ¨¡å¼

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâœ… 95%
- å®Œå…¨ç¬¦åˆè´¢åŠ¡æ¯”ç‡è®¡ç®—æ ‡å‡†
- å¼‚å¸¸å€¼å¤„ç†ç¬¦åˆæœ€ä½³å®è·µ
- è®¡ç®—ç²¾åº¦è¾¾åˆ°ä¸“ä¸šæ°´å‡†

## ğŸ“ˆ è´¢åŠ¡é¢„æµ‹ç®—æ³•åˆè§„æ€§åˆ†æ

### 3.1 æ”¶å…¥é¢„æµ‹ç®—æ³•

#### 3.1.1 æ ¸å¿ƒç®—æ³•å®ç°

**å®ç°ä»£ç **ï¼š`forecaster.py:228-300`
```python
current_growth_rate = historical_cagr * ((Decimal("1") - decay_rate) ** (year - 1))
current_revenue *= Decimal("1") + current_growth_rate
```

**ç®—æ³•åˆ†æ**ï¼š
- **å†å²CAGR**ï¼šä»`historical_ratios`è·å–
- **è¡°å‡ç‡**ï¼šé»˜è®¤0.1ï¼Œè€ƒè™‘å¢é•¿ç‡è‡ªç„¶è¡°å‡
- **é¢„æµ‹æœŸ**ï¼šé»˜è®¤5å¹´
 - **åŸºæœŸå£å¾„**ï¼šé»˜è®¤ä½¿ç”¨æœ€æ–°å¹´æŠ¥ `revenue`ï¼›è‹¥å¼€å¯ `ltm_baseline_enabled`ï¼Œåˆ™ä½¿ç”¨ `LTM = YTD_curr + (Annual_prev âˆ’ YTD_prev)`ï¼ˆä¼˜å…ˆ `revenue`ï¼Œå›é€€ `total_revenue`ï¼‰

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâš ï¸ 75%
- **ä¼˜åŠ¿**ï¼šè€ƒè™‘å¢é•¿ç‡è¡°å‡ï¼Œç¬¦åˆå•†ä¸šè§„å¾‹
- **ä¸è¶³**ï¼šè¡°å‡æ¨¡å‹è¿‡äºç®€åŒ–ï¼Œç¼ºä¹å®è§‚ç»æµå› ç´ 

**æ”¹è¿›å»ºè®®**ï¼š
```python
def enhanced_revenue_forecast(self, historical_data, macro_factors):
    """
    å¢å¼ºå‹æ”¶å…¥é¢„æµ‹ï¼Œç¬¦åˆMcKinseyæ ‡å‡†
    """
    # åŸºç¡€å¢é•¿ç‡
    base_growth = self.calculate_historical_cagr(historical_data)
    
    # å®è§‚ç»æµè°ƒæ•´
    gdp_adjustment = macro_factors.get('gdp_growth', 0.05)
    industry_adjustment = macro_factors.get('industry_growth', 0.0)
    
    # å­£èŠ‚æ€§è°ƒæ•´
    seasonal_factor = self.calculate_seasonal_factor(historical_data)
    
    # ç»¼åˆå¢é•¿ç‡
    adjusted_growth = base_growth * (1 + gdp_adjustment) * (1 + industry_adjustment)
    
    return adjusted_growth * seasonal_factor
```

### 3.2 åˆ©æ¶¦è¡¨é¢„æµ‹ç®—æ³•

#### 3.2.1 é¢„æµ‹æ¨¡å¼è®¾è®¡

**ç³»ç»Ÿæ”¯æŒä¸¤ç§é¢„æµ‹æ¨¡å¼**ï¼š`forecaster.py:111-180`

**A. `historical_median` æ¨¡å¼**
- ä½¿ç”¨å†å²ä¸­ä½æ•°ä½œä¸ºé¢„æµ‹å€¼
- é€‚ç”¨äºç¨³å®šçš„æˆç†Ÿä¼ä¸š

**B. `transition_to_target` æ¨¡å¼**
- ä»å†å²å€¼çº¿æ€§è¿‡æ¸¡åˆ°ç›®æ ‡å€¼
- é€‚ç”¨äºä¸šåŠ¡è½¬å‹æœŸä¼ä¸š

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâœ… 85%
- é¢„æµ‹æ¨¡å¼è®¾è®¡åˆç†ï¼Œç¬¦åˆä¸šåŠ¡å®é™…
- æ”¯æŒä¼ä¸šä¸åŒå‘å±•é˜¶æ®µçš„é¢„æµ‹éœ€æ±‚

#### 3.2.2 COGS åæ¨ä¸ç›´æ¥æ¯”ç‡ï¼ˆå·²å®ç°åŒæ¨¡å¼ï¼‰

**å·²æ”¯æŒä¸¤ç§æ¨¡å¼**ï¼š
- åæ¨æ³•ï¼ˆé»˜è®¤ï¼‰ï¼š`COGS = Revenue âˆ’ EBIT âˆ’ SGA âˆ’ RD`ï¼Œä¿æŒæŸç›Šæ’ç­‰å¼ã€ä¸ç›®æ ‡åˆ©æ¶¦ç‡/è´¹ç”¨ç‡ä¸€è‡´
- ç›´æ¥æ¯”ç‡ï¼š`COGS = Revenue Ã— median(COGS/Revenue)`ï¼Œä¾¿äºè·Ÿè¸ªæ¯›åˆ©è·¯å¾„ä¸è¶‹åŠ¿

**å®ç°ç»†èŠ‚**ï¼š
- UI å¼€å…³ï¼š`cogs_forecast_mode = residual|direct_ratio`
- ä¸å‘¨è½¬è”åŠ¨ï¼šçº¯â€œå†å²ä¸­ä½æ•°â€åœºæ™¯é‡‡ç”¨æ®‹å·® COGSï¼Œæ··åˆåœºæ™¯é‡‡ç”¨å†å² COGS æ¯”ç‡ï¼Œé™ä½è¿‡æ¸¡/ç›®æ ‡å‡è®¾å¯¹å‘¨è½¬è§„æ¨¡çš„æ‰­æ›²

### 3.3 è¥è¿èµ„æœ¬é¢„æµ‹ç®—æ³•

#### 3.3.1 å‘¨è½¬å¤©æ•°æ³•å®ç°ï¼ˆå£å¾„ç»Ÿä¸€ + è¿‡æ¸¡å¹³æ»‘ï¼‰

**æ ¸å¿ƒå…¬å¼**ï¼š`forecaster.py:455-691`
```python
# åº”æ”¶è´¦æ¬¾
accounts_receivable = (revenue / Decimal("360")) * days
# å­˜è´§
inventories = (cogs / Decimal("360")) * days
# åº”ä»˜è´¦æ¬¾
accounts_payable = (cogs / Decimal("360")) * days
```

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâœ… 88%
- ä½¿ç”¨å‘¨è½¬å¤©æ•°æ³•ç¬¦åˆè´¢åŠ¡é¢„æµ‹æœ€ä½³å®è·µ
- é¢„æµ‹åŸºæœŸæ”¹ä¸ºâ€œåˆ†é¡¹å£å¾„ NWCâ€ï¼ˆ`last_component_nwc`ï¼‰ï¼Œä¸é¢„æµ‹æœŸå£å¾„ä¸€è‡´
- åŸºæœŸæ¥æºä¸æ»šåŠ¨ï¼š`last_component_nwc` åŸºäºâ€œä¼°å€¼æ—¥å‰æœ€æ–°èµ„äº§è´Ÿå€ºè¡¨â€é‡ç®—ï¼ˆå­£åº¦/ä¸­æŠ¥/å¹´æŠ¥å‡å¯ï¼‰ï¼Œä¸è‚¡æƒæ¡¥å£å¾„ä¸€è‡´
- DSO/DIO/DPO æ”¯æŒâ€œä» last_days å‘å†å²ä¸­ä½æ•°çº¿æ€§è¿‡æ¸¡ï¼ˆnwc_days_transition_yearsï¼‰â€ï¼Œé¿å…é¦–å¹´ Î”NWC è·³å˜

ä»éœ€æ”¹è¿›ï¼š
- 360å¤©å‡è®¾å¯æ‰©å±•ä¸º 360/365/366/æŒ‰ä¼šè®¡å¹´åº¦
- è¡Œä¸šå…¸å‹å€¼ä¸å­£èŠ‚æ€§å°šæœªçº³å…¥

### 3.4 ä¸McKinseyé¢„æµ‹æ ‡å‡†å¯¹æ¯”

| é¢„æµ‹ç»´åº¦ | McKinseyæ ‡å‡† | æœ¬é¡¹ç›®å®ç° | ç¬¦åˆåº¦ | å·®å¼‚åˆ†æ |
|----------|---------------|------------|--------|----------|
| **æ”¶å…¥é¢„æµ‹** | å¤šå› ç´ æ¨¡å‹+å®è§‚è°ƒæ•´ | CAGRè¡°å‡æ¨¡å‹ | âš ï¸ 70% | ç¼ºä¹å®è§‚å› ç´  |
| **æˆæœ¬é¢„æµ‹** | ç›´æ¥æ¯”ç‡é¢„æµ‹ | åæ¨æ³•+ç›´æ¥æ¯”ç‡åŒæ¨¡å¼ | âœ… 85% | å·²æä¾›æ¨¡å¼å¼€å…³ |
| **è¥è¿èµ„æœ¬** | å‘¨è½¬å¤©æ•°+å­£èŠ‚æ€§ | å‘¨è½¬å¤©æ•° + åˆ†é¡¹åŸºå‡† + æ—¥æ•°å¹³æ»‘ | âœ… 88% | å­£èŠ‚æ€§/è¡Œä¸šæ ‡å°ºå¾…è¡¥ |
| **é¢„æµ‹æ¨¡å¼** | å¤šæƒ…æ™¯åˆ†æ | åŒæ¨¡å¼é¢„æµ‹ | âš ï¸ 80% | ç¼ºä¹æƒ…æ™¯åˆ†æ |

## ğŸ§® æ•°æ®è´¨é‡å¤„ç†æµç¨‹åˆè§„æ€§

### 4.1 å¼‚å¸¸å€¼æ£€æµ‹æœºåˆ¶

#### 4.1.1 IQRæ–¹æ³•å®ç°

**å®ç°ä»£ç **ï¼š`processor.py:293-320`
```python
if df_to_clean[col].notna().sum() >= 4:
    q1 = df_to_clean[col].quantile(0.25)
    q3 = df_to_clean[col].quantile(0.75)
    iqr = q3 - q1
    if iqr > 1e-9:
        lower_bound = q1 - 1.5 * iqr
        upper_bound = q3 + 1.5 * iqr
        outliers_mask = (df_to_clean[col] < lower_bound) | (df_to_clean[col] > upper_bound)
```

**ç§‘å­¦æ€§è¯„ä¼°**ï¼š
- âœ… ç»Ÿè®¡åŸºç¡€æ‰å®ï¼šIQRæ–¹æ³•å¯¹å¼‚å¸¸å€¼æ£€æµ‹å…·æœ‰é²æ£’æ€§
- âœ… æ•°æ®é‡è¦æ±‚åˆç†ï¼šè¦æ±‚è‡³å°‘4ä¸ªæœ‰æ•ˆæ•°æ®ç‚¹
- âœ… è¾¹ç•Œæ¡ä»¶å¤„ç†ï¼šè€ƒè™‘IQRæ¥è¿‘é›¶çš„æƒ…å†µ

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâœ… 90%

### 4.2 æ•°æ®æ ‡å‡†åŒ–æµç¨‹

#### 4.2.1 æ•°æ®ç±»å‹æ ‡å‡†åŒ–

**å®ç°ä»£ç **ï¼š`processor.py:408-413`
```python
s1_decimal = series1.apply(lambda x: Decimal(str(x)) if pd.notna(x) else None)
s2_decimal = series2.apply(lambda x: Decimal(str(x)) if pd.notna(x) else None)
```

**McKinsey æ ‡å‡†ç¬¦åˆåº¦**ï¼šâœ… 100%
- ç»Ÿä¸€ä½¿ç”¨Decimalè¿›è¡Œé«˜ç²¾åº¦è®¡ç®—
- å®Œæ•´çš„ç±»å‹è½¬æ¢å’Œå¼‚å¸¸å¤„ç†

### 4.3 McKinseyæ•°æ®è´¨é‡æ¡†æ¶ç¬¦åˆåº¦

| DQç»´åº¦ | McKinseyæ ‡å‡† | æœ¬é¡¹ç›®å®ç° | ç¬¦åˆåº¦ | æ”¹è¿›å»ºè®® |
|--------|--------------|------------|--------|----------|
| **å®Œæ•´æ€§** | æ•°æ®è¦†ç›–ç‡ç›‘æ§ | è‰¯å¥½ç¼ºå¤±å€¼å¤„ç† | 75% | å¢åŠ è¦†ç›–ç‡ç›‘æ§ |
| **å‡†ç¡®æ€§** | äº¤å‰éªŒè¯æœºåˆ¶ | è‰¯å¥½å¼‚å¸¸å€¼æ£€æµ‹ | 70% | å¢åŠ äº¤å‰éªŒè¯ |
| **ä¸€è‡´æ€§** | è·¨ç³»ç»Ÿä¸€è‡´æ€§ | å†…éƒ¨ä¸€è‡´æ€§è‰¯å¥½ | 80% | å®Œå–„è·¨æºéªŒè¯ |
| **åŠæ—¶æ€§** | æ—¶æ•ˆæ€§ç›‘æ§ | ç¼ºä¹æ—¶æ•ˆæ€§éªŒè¯ | 40% | å¢åŠ æ—¶æ•ˆæ£€æŸ¥ |
| **æœ‰æ•ˆæ€§** | ä¸šåŠ¡è§„åˆ™éªŒè¯ | å®Œå–„çš„ç±»å‹éªŒè¯ | 85% | å®Œå–„ä¸šåŠ¡è§„åˆ™ |
| **å”¯ä¸€æ€§** | å…¨å±€å”¯ä¸€æ€§ | åŸºç¡€å»é‡æœºåˆ¶ | 60% | å¢å¼ºå”¯ä¸€æ€§éªŒè¯ |

## ğŸš¨ å…³é”®é—®é¢˜è¯†åˆ«ä¸æ”¹è¿›å»ºè®®

### 5.1 é«˜ä¼˜å…ˆçº§é—®é¢˜ï¼ˆæ›´æ–°ï¼‰

#### 5.1.1 æˆæœ¬é¢„æµ‹æ¨¡å¼ï¼ˆå·²å®Œæˆï¼‰
å·²å®ç° COGS ç›´æ¥æ¯”ç‡æ¨¡å¼ä¸ UI å¼€å…³ï¼Œå…¼å®¹åæ¨æ³•ï¼Œæ»¡è¶³ McKinsey å¯¹æ¯›åˆ©è·¯å¾„å¯è¿½è¸ªæ€§çš„è¦æ±‚ã€‚

#### 5.1.2 è¡Œä¸šé€‚åº”æ€§ä¸è¶³

**é—®é¢˜**ï¼šç¼ºä¹è¡Œä¸šå·®å¼‚åŒ–å‚æ•°
**å½±å“**ï¼šè·¨è¡Œä¸šä¼°å€¼å‡†ç¡®æ€§ä¸è¶³
**ä¿®å¤å»ºè®®**ï¼š
```python
class IndustryFinancialParameters:
    """è¡Œä¸šè´¢åŠ¡å‚æ•°æ•°æ®åº“"""
    
    PARAMETERS = {
        'Technology': {
            'revenue_growth': 0.15,
            'operating_margin': 0.25,
            'inventory_days': 45,
            'receivable_days': 60
        },
        'Manufacturing': {
            'revenue_growth': 0.08,
            'operating_margin': 0.15,
            'inventory_days': 60,
            'receivable_days': 45
        },
        'Retail': {
            'revenue_growth': 0.05,
            'operating_margin': 0.08,
            'inventory_days': 30,
            'receivable_days': 15
        }
    }
```

#### 5.1.3 æƒ…æ™¯åˆ†æç¼ºå¤±

**é—®é¢˜**ï¼šç¼ºä¹McKinseyæ ‡å‡†çš„å¤šæƒ…æ™¯åˆ†æ
**å½±å“**ï¼šé£é™©è¯„ä¼°ä¸å®Œæ•´
**ä¿®å¤å»ºè®®**ï¼š
```python
def scenario_analysis(self, base_forecast, scenarios):
    """
    McKinseyæ ‡å‡†æƒ…æ™¯åˆ†æ
    """
    results = {}
    
    for scenario_name, adjustments in scenarios.items():
        scenario_forecast = base_forecast.copy()
        
        # åº”ç”¨æƒ…æ™¯è°ƒæ•´
        for metric, adjustment in adjustments.items():
            if metric in scenario_forecast:
                scenario_forecast[metric] *= adjustment
        
        results[scenario_name] = scenario_forecast
    
    return results
```

### 5.2 ä¸­ä¼˜å…ˆçº§æ”¹è¿›

#### 5.2.1 æ•°æ®è´¨é‡ç›‘æ§å¢å¼º

```python
class DataQualityMonitor:
    """æ•°æ®è´¨é‡ç›‘æ§ç³»ç»Ÿ"""
    
    def __init__(self):
        self.metrics = {
            'completeness': self._calculate_completeness,
            'accuracy': self._calculate_accuracy,
            'timeliness': self._calculate_timeliness
        }
    
    def generate_quality_report(self, data):
        """ç”Ÿæˆæ•°æ®è´¨é‡æŠ¥å‘Š"""
        scores = {}
        for metric_name, calculator in self.metrics.items():
            scores[metric_name] = calculator(data)
        
        return {
            'overall_score': sum(scores.values()) / len(scores),
            'detailed_scores': scores,
            'recommendations': self._generate_recommendations(scores)
        }
```

#### 5.2.2 é¢„æµ‹ç®—æ³•ä¼˜åŒ–

```python
class AdvancedForecastEngine:
    """é«˜çº§é¢„æµ‹å¼•æ“"""
    
    def __init__(self):
        self.models = {
            'arima': self._arima_forecast,
            'exponential_smoothing': self._exponential_smoothing,
            'machine_learning': self._ml_forecast
        }
    
    def ensemble_forecast(self, data, models_weights=None):
        """é›†æˆé¢„æµ‹"""
        forecasts = {}
        for model_name, model_func in self.models.items():
            forecasts[model_name] = model_func(data)
        
        # åŠ æƒé›†æˆ
        if models_weights is None:
            models_weights = {name: 1/len(self.models) for name in self.models}
        
        ensemble_result = sum(
            forecasts[model] * weight 
            for model, weight in models_weights.items()
        )
        
        return ensemble_result
```

### 5.3 ä½ä¼˜å…ˆçº§ä¼˜åŒ–

#### 5.3.1 ä¼šè®¡æœŸé—´æ ‡å‡†åŒ–

```python
def standardize_accounting_period(self, financial_data):
    """ä¼šè®¡æœŸé—´æ ‡å‡†åŒ–"""
    # æ”¯æŒ360å¤©ã€365å¤©ã€366å¤©
    period_config = self.config.get('accounting_period', 360)
    
    if period_config == 'actual':
        # æ ¹æ®å®é™…å¹´åº¦å¤©æ•°
        return self._calculate_actual_days(financial_data)
    else:
        return period_config
```

#### 5.3.2 å¢å¼ºçš„æ•æ„Ÿæ€§åˆ†æ

```python
def advanced_sensitivity_analysis(self, base_params, sensitivity_ranges):
    """é«˜çº§æ•æ„Ÿæ€§åˆ†æ"""
    sensitivity_results = {}
    
    for param_name, range_values in sensitivity_ranges.items():
        param_results = []
        for value in range_values:
            modified_params = base_params.copy()
            modified_params[param_name] = value
            
            # è¿è¡Œä¼°å€¼
            result = self.run_valuation(modified_params)
            param_results.append(result)
        
        sensitivity_results[param_name] = param_results
    
    return sensitivity_results
```

## ğŸ“Š æ€»ä½“è¯„ä»·ä¸å»ºè®®

### 6.1 ç»¼åˆè¯„åˆ†

| è¯„ä¼°ç»´åº¦ | å¾—åˆ† | ç­‰çº§ | è¯´æ˜ |
|----------|------|------|------|
| **è´¢åŠ¡æ¯”ç‡è®¡ç®—** | 92/100 | A- | è®¡ç®—å‡†ç¡®ï¼Œç²¾åº¦æ§åˆ¶ä¼˜ç§€ |
| **è´¢åŠ¡é¢„æµ‹ç®—æ³•** | 84/100 | B+ | åŒæ¨¡å¼æˆæœ¬ã€NWC å£å¾„ä¸è¿‡æ¸¡è¡¥å¼º |
| **æ•°æ®è´¨é‡æ§åˆ¶** | 85/100 | B+ | æ¸…æ´—é€»è¾‘å®Œå–„ï¼Œç›‘æ§ä¸è¶³ |
| **McKinseyæ ‡å‡†ç¬¦åˆåº¦** | 85/100 | A- | å…³é”®ç¯èŠ‚å¢å¼ºï¼Œè¡Œä¸š/æƒ…æ™¯å¾…è¡¥ |
| **æŠ€æœ¯å®ç°è´¨é‡** | 90/100 | A- | ä»£ç è´¨é‡é«˜ï¼Œæ¶æ„æ¸…æ™° |
| **è¡Œä¸šé€‚åº”æ€§** | 70/100 | B- | ç¼ºä¹è¡Œä¸šå·®å¼‚åŒ–å¤„ç† |
| **ç»¼åˆè¯„åˆ†** | 82.5/100 | B+ | å…·å¤‡ä¸“ä¸šæ°´å‡†ï¼Œéœ€è¦å…³é”®æ”¹è¿› |

### 6.2 æ ¸å¿ƒä¼˜åŠ¿

1. **æŠ€æœ¯æ¶æ„å“è¶Š**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼ŒèŒè´£åˆ†ç¦»æ¸…æ™°
2. **è®¡ç®—ç²¾åº¦é«˜**ï¼šä½¿ç”¨Decimalç¡®ä¿é‡‘èè®¡ç®—ç²¾åº¦
3. **å¼‚å¸¸å¤„ç†å®Œå–„**ï¼šå®Œæ•´çš„è¾¹ç•Œæ¡ä»¶æ£€æŸ¥å’Œé”™è¯¯å¤„ç†
4. **åŸºç¡€é€»è¾‘æ­£ç¡®**ï¼šè´¢åŠ¡æ¯”ç‡è®¡ç®—ç¬¦åˆåŸºæœ¬è´¢åŠ¡åŸç†
5. **ä»£ç è´¨é‡ä¼˜ç§€**ï¼šç±»å‹æ³¨è§£å®Œæ•´ï¼Œæµ‹è¯•è¦†ç›–è‰¯å¥½

### 6.3 ä¸»è¦ä¸è¶³

1. **é¢„æµ‹æ¨¡å‹ç®€åŒ–**ï¼šç¼ºä¹å¤šå› ç´ é¢„æµ‹å’Œå®è§‚ç»æµè€ƒè™‘
2. **è¡Œä¸šé€‚åº”æ€§ä¸è¶³**ï¼šç¼ºä¹è¡Œä¸šç‰¹å®šçš„è´¢åŠ¡å‚æ•°
3. **æƒ…æ™¯åˆ†æç¼ºå¤±**ï¼šä¸ç¬¦åˆMcKinseyå¤šæƒ…æ™¯åˆ†ææ ‡å‡†
4. **æ•°æ®è´¨é‡ç›‘æ§è–„å¼±**ï¼šç¼ºä¹æŒç»­çš„æ•°æ®è´¨é‡ç›‘æ§æœºåˆ¶

### 6.4 æ”¹è¿›ä»·å€¼è¯„ä¼°

é€šè¿‡å®æ–½å»ºè®®çš„æ”¹è¿›æªæ–½ï¼Œé¡¹ç›®å¯ä»¥ä»**B+çº§(82.5åˆ†)æå‡è‡³Açº§(90åˆ†ä»¥ä¸Š)**ï¼Œæˆä¸ºçœŸæ­£æ„ä¹‰ä¸Šçš„ä¼ä¸šçº§è´¢åŠ¡åˆ†æå¹³å°ã€‚

### 6.5 å®æ–½è·¯çº¿å›¾

#### ç¬¬ä¸€é˜¶æ®µï¼ˆ1-2ä¸ªæœˆï¼‰ï¼šå…³é”®é—®é¢˜ä¿®å¤
- [ ] ä¿®å¤COGSé¢„æµ‹é€»è¾‘ï¼Œæ”¹ä¸ºç›´æ¥æ¯”ç‡é¢„æµ‹
- [ ] å»ºç«‹è¡Œä¸šè´¢åŠ¡å‚æ•°æ•°æ®åº“
- [ ] å®ç°åŸºç¡€æƒ…æ™¯åˆ†æåŠŸèƒ½

#### ç¬¬äºŒé˜¶æ®µï¼ˆ2-3ä¸ªæœˆï¼‰ï¼šé¢„æµ‹ç®—æ³•å¢å¼º
- [ ] é›†æˆå®è§‚ç»æµå› ç´ è°ƒæ•´
- [ ] å®ç°å­£èŠ‚æ€§è°ƒæ•´ç®—æ³•
- [ ] å¢å¼ºæ•°æ®è´¨é‡ç›‘æ§æœºåˆ¶

#### ç¬¬ä¸‰é˜¶æ®µï¼ˆ3-4ä¸ªæœˆï¼‰ï¼šMcKinseyæ ‡å‡†åˆè§„
- [ ] å®Œå–„å¤šæƒ…æ™¯åˆ†ææ¡†æ¶
- [ ] å®ç°é«˜çº§æ•æ„Ÿæ€§åˆ†æ
- [ ] å»ºç«‹å®Œæ•´çš„æ•°æ®è´¨é‡æ²»ç†ä½“ç³»

## ğŸ¯ ç»“è®º

**stock_vale_valuation_3.0** é¡¹ç›®åœ¨è´¢åŠ¡æ¯”ç‡è®¡ç®—å’Œé¢„æµ‹é€»è¾‘æ–¹é¢å±•ç°äº†**è¾ƒé«˜çš„ä¸“ä¸šæ°´å‡†**ï¼ŒæŠ€æœ¯æ¶æ„å’Œæ ¸å¿ƒè®¡ç®—é€»è¾‘éƒ½è¾¾åˆ°äº†ä¸“ä¸šæ ‡å‡†ã€‚é¡¹ç›®å…·å¤‡æˆä¸º**ä¼ä¸šçº§è´¢åŠ¡åˆ†æå¹³å°**çš„æ½œåŠ›ï¼Œä½†éœ€è¦åœ¨ä»¥ä¸‹å…³é”®æ–¹é¢è¿›è¡Œæ”¹è¿›ï¼š

1. **é¢„æµ‹æ¨¡å‹ç§‘å­¦æ€§**ï¼šä¿®å¤COGSå€’æ¨é€»è¾‘ï¼Œå¢å¼ºé¢„æµ‹ç®—æ³•
2. **è¡Œä¸šé€‚åº”æ€§**ï¼šå»ºç«‹è¡Œä¸šå·®å¼‚åŒ–å‚æ•°å’Œé¢„æµ‹æ¨¡å‹
3. **McKinseyæ ‡å‡†åˆè§„**ï¼šå®ç°å¤šæƒ…æ™¯åˆ†æå’Œæ•æ„Ÿæ€§åˆ†æ
4. **æ•°æ®è´¨é‡æ²»ç†**ï¼šå»ºç«‹å®Œå–„çš„æ•°æ®è´¨é‡ç›‘æ§ä½“ç³»

é€šè¿‡å®æ–½ä¸Šè¿°æ”¹è¿›å»ºè®®ï¼Œé¡¹ç›®å¯ä»¥è¾¾åˆ°**Açº§ä¸“ä¸šæ°´å‡†**ï¼ˆ90åˆ†ä»¥ä¸Šï¼‰ï¼Œæˆä¸ºçœŸæ­£æ„ä¹‰ä¸Šçš„ä¼ä¸šçº§è´¢åŠ¡åˆ†æå¹³å°ã€‚é¡¹ç›®å·²ç»å…·å¤‡äº†æ‰å®çš„åŸºç¡€ï¼Œå¼€å‘å›¢é˜Ÿå±•ç°äº†åœ¨é‡‘èå·¥ç¨‹å’Œè½¯ä»¶æ¶æ„æ–¹é¢çš„æ·±åšåŠŸåº•ï¼Œæ˜¯ä¸€ä¸ªå…·æœ‰å¾ˆé«˜ä»·å€¼çš„é‡‘èç§‘æŠ€åŸºç¡€æ¡†æ¶ã€‚

**æœ€ç»ˆè¯„ä»·**ï¼šè¿™æ˜¯ä¸€ä¸ª**ä¼˜ç§€çš„è´¢åŠ¡è®¡ç®—åŸºç¡€æ¡†æ¶**ï¼Œåœ¨å…³é”®ç»†èŠ‚ä¸Šè¿›è¡Œä¼˜åŒ–åï¼Œå®Œå…¨å¯ä»¥è¾¾åˆ°å›½é™…é¡¶å°–æ°´å¹³ã€‚

---

## ğŸ”§ ä»£ç å‚è€ƒä¸å½“å‰å®ç°æ‘˜è¦ï¼ˆæ›´æ–°ï¼‰

- æ¯”ç‡ä¸å¤„ç†ï¼š`src/core/financial/processor.py`ï¼ˆå†å²ä¸­ä½æ•°ã€å‘¨è½¬ã€`last_component_nwc`ã€`last_*_days`ï¼‰
- é¢„æµ‹å¼•æ“ï¼š`src/core/financial/forecaster.py`ï¼ˆæ”¶å…¥è¡°å‡ã€åˆ©æ¶¦ä¸¤æ¨¡å¼ã€`nwc_baseline_mode` ä¸æ—¥æ•°å¹³æ»‘ã€COGS åŒæ¨¡å¼ï¼‰
- DCF æ ¸å¿ƒï¼š
  - ç°å€¼ï¼š`src/core/calculators/dcf/present_value_calculator.py`ï¼ˆå¹´æœ«/å¹´ä¸­æŠ˜ç°ï¼‰
  - ç»ˆå€¼ï¼š`src/core/calculators/dcf/terminal_value_calculator.py`ï¼ˆå½“å‰ PGR â‰¤ Rfï¼‰
  - WACCï¼š`src/core/calculators/dcf/wacc_calculator.py`ï¼ˆKe = Rf + Î²Ã—(MRP+CRP) + Size + IRPï¼‰

## ğŸ§© é…ç½®ä¸ä¼˜åŒ–å»ºè®®ï¼ˆè½åœ°æŒ‡å¼•ï¼‰

- ä¼šè®¡æœŸé—´ï¼šå¢åŠ  `days_in_year` å…¨å±€é…ç½®ï¼ˆ360/365/366/actualï¼‰å¹¶åœ¨å‘¨è½¬è®¡ç®—ä¸­å¯ç”¨
- æˆæœ¬é¢„æµ‹ï¼šä¿ç•™åæ¨æ³•ï¼ŒåŒæ—¶æ–°å¢â€œç›´æ¥æ¯”ç‡é¢„æµ‹â€å¼€å…³ï¼›UI å¢åŠ æ¨¡å¼é€‰æ‹©
- å®è§‚/è¡Œä¸šï¼šæ¥å…¥è¡Œä¸šå‚æ•°åŸºå‡†ä¸åä¹‰ GDP åŸºå‡†ï¼Œç”¨äºæ”¶å…¥ä¸ PGR æ ¡éªŒ
- Î”NWC å®¡è®¡ï¼šç»“æœé¡µå›ºå®šå±•ç¤ºé¦–å¹´ Î”NWC æ„æˆï¼ˆARã€Invã€APã€OCAã€OCLï¼‰ï¼Œå¯¹ç…§å†å²ä¸­ä½æ•°
- åŸºæœŸæ»šåŠ¨ï¼šåœ¨ UI æš´éœ² `ltm_baseline_enabled` ä¸â€œä¼°å€¼åŸºå‡†æ—¥â€ï¼Œè°ƒè¯•åŒºå±•ç¤º `baseline_debug`ï¼ˆYTD/LTM åˆ†è§£ï¼‰ä¸æœ€æ–°èµ„äº§è´Ÿå€ºè¡¨æ—¥æœŸ/å£å¾„

## ğŸ“‹ ä¸“ä¸šæœ¯è¯­å¯¹ç…§è¡¨

| ä¸­æ–‡æœ¯è¯­ | è‹±æ–‡æœ¯è¯­ | McKinsey æ ‡å‡†å®šä¹‰ |
|----------|----------|-------------------|
| è¥ä¸šåˆ©æ¶¦ç‡ | Operating Margin | EBIT / Total Revenueï¼Œè¡¡é‡æ ¸å¿ƒç›ˆåˆ©èƒ½åŠ› |
| åº”æ”¶è´¦æ¬¾å‘¨è½¬å¤©æ•° | Days Sales Outstanding (DSO) | (Accounts Receivable / Revenue) Ã— 365ï¼Œè¡¡é‡æ”¶æ¬¾æ•ˆç‡ |
| å­˜è´§å‘¨è½¬å¤©æ•° | Days Inventory Outstanding (DIO) | (Inventory / COGS) Ã— 365ï¼Œè¡¡é‡å­˜è´§ç®¡ç†æ•ˆç‡ |
| å‡€è¥è¿èµ„æœ¬ | Net Working Capital (NWC) | Current Assets - Current Liabilitiesï¼Œè¡¡é‡çŸ­æœŸæµåŠ¨æ€§ |
| æƒ…æ™¯åˆ†æ | Scenario Analysis | ä¹è§‚ã€åŸºå‡†ã€æ‚²è§‚å¤šç§æƒ…æ™¯ä¸‹çš„é¢„æµ‹åˆ†æ |
| æ•æ„Ÿæ€§åˆ†æ | Sensitivity Analysis | å…³é”®å‚æ•°å˜åŒ–å¯¹ç»“æœå½±å“çš„åˆ†æ |
| æ•°æ®è´¨é‡ | Data Quality | æ•°æ®çš„å®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€ä¸€è‡´æ€§ã€åŠæ—¶æ€§ç­‰ç»´åº¦ |

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**ï¼š2025å¹´9æœˆ10æ—¥  
**åˆ†æåŸºå‡†**ï¼šMcKinsey & Company è´¢åŠ¡åˆ†ææ ‡å‡† (ç¬¬7ç‰ˆ)  
**é¡¹ç›®ç‰ˆæœ¬**ï¼šstock_vale_valuation_3.0
**å®ç°äº®ç‚¹ï¼ˆ2025-09-10ï¼‰**ï¼š
- `nwc_days_transition_years` æ”¯æŒæŒ‰å¹´å¹³æ»‘å‘ç›®æ ‡/ä¸­ä½æ•°è¿‡æ¸¡ï¼Œé¿å… Î”NWC é¦–å¹´è·³å˜
- `last_component_nwc` åŸºäºä¼°å€¼æ—¥çš„æœ€æ–°èµ„äº§è´Ÿå€ºè¡¨ä¸€è¡Œé‡ç®—ï¼Œé¿å…å£å¾„ä¸ä¸€è‡´
- å•å…ƒæµ‹è¯•éªŒè¯ï¼š
  - é™ä½ DSO æˆ–æé«˜ DPO â†’ Î”NWC ä¸ºè´Ÿï¼ˆé‡Šæ”¾ç°é‡‘ï¼‰
  - æé«˜ DIO â†’ Î”NWC ä¸ºæ­£ï¼ˆå ç”¨ç°é‡‘ï¼‰
  - å¹…åº¦ä¸ æ”¶å…¥/COGS Ã— å¤©æ•°å˜åŒ–/360 æˆæ¯”ä¾‹

## ğŸ“‰ æ•°æ®è´¨é‡ä¸å£å¾„ï¼ˆæ–°å¢ï¼‰
- **è‚¡æ¯ TTM å£å¾„**ï¼šä¼˜å…ˆé‡‡ç”¨â€œå®æ–½/å®Œæˆâ€ï¼›æ— åˆ™â€œTTMÂ·é¢„æ¡ˆâ€ï¼›ä»æ— åˆ™â€œå¹´åº¦æœ€è¿‘ä¸€æ¬¡â€
- **as-of ä¸€è‡´æ€§**ï¼šä»·æ ¼ä½¿ç”¨ `trade_date â‰¤ ä¼°å€¼æ—¥` çš„æœ€è¿‘è®°å½•ï¼›EPSï¼ˆå¹´æŠ¥ï¼‰ä½¿ç”¨ `end_date â‰¤ ä¼°å€¼æ—¥` çš„æœ€è¿‘è®°å½•ï¼›UI æ ‡ç­¾è¯´æ˜å£å¾„ä¸æ¥æº
- **è¡Œä¸šé¢„è®¾**ï¼šGICS 11 + ç™½é…’å˜ä½“æä¾› Î²/é¢„æµ‹æœŸ/PGR cap/ä¹˜æ•°/å‘¨è½¬åŒºé—´ï¼›API debug è¿”å› `applied_preset` ä¸ `applied_preset_diff`
